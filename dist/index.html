<!doctype html>
<html lang="en">
  <head>
    <!-- Configure with your npub/nprofile -->
    <meta name="author" value="npub1z3nanwnmxhkffhdx4u0tcczglmlnszne0gka4x7y8p28arjajt6sxuzrse" />

    <!-- Personalize your relays list -->
    <meta name="relays" value="wss://nos.lol, wss://relay.damus.io, wss://relay.nostr.band, wss://nostr.wine" />

    <!-- Show top notes with images, use a even value, zero to disable -->
    <meta name="top-notes" value="2" />

    <!-- Show short notes as carousel (value 'carousel') or in the main feed (value 'main'), empty to disable -->
    <meta name="short-notes" value="carousel" />

    <!-- Show short notes with X minimum characters for the 'short-notes' setting, zero to disable -->
    <meta name="short-notes-min-chars" value="800" />

    <!-- Size in characters of the short notes preview in the feed, zero to display full content -->
    <meta name="short-notes-summary-max-chars" value="400" />

    <!-- Enable navigation by topics (tags), empty to disable -->
    <meta name="topics" value="" />

    <!-- Enable comments, 'yes' to enable -->
    <meta name="comments" value="yes" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script type="module" crossorigin>var wv=Object.defineProperty;var mv=(e,t,n)=>t in e?wv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ce=(e,t,n)=>mv(e,typeof t!="symbol"?t+"":t,n);function bv(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const yv="modulepreload",vv=function(e,t){return new URL(e,t).href},Th={},_v=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(n.map(h=>{if(h=vv(h,r),h in Th)return;Th[h]=!0;const y=h.endsWith(".css"),m=y?'[rel="stylesheet"]':"";if(!!r)for(let B=c.length-1;B>=0;B--){const A=c[B];if(A.href===h&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const P=document.createElement("link");if(P.rel=y?"stylesheet":yv,y||(P.as="script"),P.crossOrigin="",P.href=h,f&&P.setAttribute("nonce",f),document.head.appendChild(P),y)return new Promise((B,A)=>{P.addEventListener("load",B),P.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})};function At(){}function Rn(e,t){for(const n in t)e[n]=t[n];return e}function cg(e){return e()}function Ph(){return Object.create(null)}function hs(e){e.forEach(cg)}function ug(e){return typeof e=="function"}function Hn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let js;function Vr(e,t){return e===t?!0:(js||(js=document.createElement("a")),js.href=t,e===js.href)}function Ev(e){return Object.keys(e).length===0}function Oa(e,t,n,r){if(e){const o=lg(e,t,n,r);return e[0](o)}}function lg(e,t,n,r){return e[1]&&r?Rn(n.ctx.slice(),e[1](r(t))):n.ctx}function Na(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const s=[],c=Math.max(t.dirty.length,o.length);for(let d=0;d<c;d+=1)s[d]=t.dirty[d]|o[d];return s}return t.dirty|o}return t.dirty}function Ra(e,t,n,r,o,s){if(o){const c=lg(t,n,r,s);e.p(c,o)}}function za(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Wl(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function di(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function we(e,t){e.appendChild(t)}function Ne(e,t,n){e.insertBefore(t,n||null)}function Ie(e){e.parentNode&&e.parentNode.removeChild(e)}function Ua(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ke(e){return document.createElement(e)}function Xe(e){return document.createTextNode(e)}function Ge(){return Xe(" ")}function Ro(){return Xe("")}function kv(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Ee(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Av=["width","height"];function fi(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&Av.indexOf(r)===-1?e[r]=t[r]:Ee(e,r,t[r])}function Ds(e,t,n){const r=t.toLowerCase();r in e?e[r]=typeof e[r]=="boolean"&&n===""?!0:n:t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:Ee(e,t,n)}function Sv(e){return Array.from(e.childNodes)}function It(e,t){t=""+t,e.data!==t&&(e.data=t)}function Lh(e,t,n){e.classList.toggle(t,!!n)}function $v(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let es;function Zi(e){es=e}function Ma(){if(!es)throw new Error("Function called outside component initialization");return es}function Ha(e){Ma().$$.on_mount.push(e)}function xv(e){Ma().$$.after_update.push(e)}function Tv(e){Ma().$$.on_destroy.push(e)}function Pv(){const e=Ma();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=$v(t,n,{cancelable:r});return o.slice().forEach(c=>{c.call(e,s)}),!s.defaultPrevented}return!0}}const Jo=[],Xu=[];let ri=[];const Ch=[],Lv=Promise.resolve();let Qu=!1;function Cv(){Qu||(Qu=!0,Lv.then(zr))}function el(e){ri.push(e)}const bu=new Set;let Fo=0;function zr(){if(Fo!==0)return;const e=es;do{try{for(;Fo<Jo.length;){const t=Jo[Fo];Fo++,Zi(t),Bv(t.$$)}}catch(t){throw Jo.length=0,Fo=0,t}for(Zi(null),Jo.length=0,Fo=0;Xu.length;)Xu.pop()();for(let t=0;t<ri.length;t+=1){const n=ri[t];bu.has(n)||(bu.add(n),n())}ri.length=0}while(Jo.length);for(;Ch.length;)Ch.pop()();Qu=!1,bu.clear(),Zi(e)}function Bv(e){if(e.fragment!==null){e.update(),hs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(el)}}function Iv(e){const t=[],n=[];ri.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),ri=t}const Ys=new Set;let So;function Qr(){So={r:0,c:[],p:So}}function eo(){So.r||hs(So.c),So=So.p}function Ve(e,t){e&&e.i&&(Ys.delete(e),e.i(t))}function Ze(e,t,n,r){if(e&&e.o){if(Ys.has(e))return;Ys.add(e),So.c.push(()=>{Ys.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Fr(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Kl(e,t){const n={},r={},o={$$scope:1};let s=e.length;for(;s--;){const c=e[s],d=t[s];if(d){for(const f in c)f in d||(r[f]=1);for(const f in d)o[f]||(n[f]=d[f],o[f]=1);e[s]=d}else for(const f in c)o[f]=1}for(const c in r)c in n||(n[c]=void 0);return n}function ur(e){e&&e.c()}function jn(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),el(()=>{const s=e.$$.on_mount.map(cg).filter(ug);e.$$.on_destroy?e.$$.on_destroy.push(...s):hs(s),e.$$.on_mount=[]}),o.forEach(el)}function Dn(e,t){const n=e.$$;n.fragment!==null&&(Iv(n.after_update),hs(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ov(e,t){e.$$.dirty[0]===-1&&(Jo.push(e),Cv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function to(e,t,n,r,o,s,c=null,d=[-1]){const f=es;Zi(e);const h=e.$$={fragment:null,ctx:[],props:s,update:At,not_equal:o,bound:Ph(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Ph(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};c&&c(h.root);let y=!1;if(h.ctx=n?n(e,t.props||{},(m,E,...P)=>{const B=P.length?P[0]:E;return h.ctx&&o(h.ctx[m],h.ctx[m]=B)&&(!h.skip_bound&&h.bound[m]&&h.bound[m](B),y&&Ov(e,m)),E}):[],h.update(),y=!0,hs(h.before_update),h.fragment=r?r(h.ctx):!1,t.target){if(t.hydrate){const m=Sv(t.target);h.fragment&&h.fragment.l(m),m.forEach(Ie)}else h.fragment&&h.fragment.c();t.intro&&Ve(e.$$.fragment),jn(e,t.target,t.anchor),zr()}Zi(f)}class no{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){Dn(this,1),this.$destroy=At}$on(t,n){if(!ug(n))return At;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Ev(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Nv="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Nv);const yu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gl=e=>e instanceof Uint8Array,vu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),$n=(e,t)=>e<<32-t|e>>>t,Rv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Rv)throw new Error("Non little-endian hardware is not supported");const zv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function wt(e){if(!Gl(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=zv[e[n]];return t}function Po(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Uv(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ts(e){if(typeof e=="string"&&(e=Uv(e)),!Gl(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function ja(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Gl(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let dg=class{clone(){return this._cloneInto()}};function fg(e){const t=r=>e().update(ts(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function hg(e=32){if(yu&&typeof yu.getRandomValues=="function")return yu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $i(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function lr(...e){const t=(o,s)=>c=>o(s(c)),n=Array.from(e).reverse().reduce((o,s)=>o?t(o,s.encode):s.encode,void 0),r=e.reduce((o,s)=>o?t(o,s.decode):s.decode,void 0);return{encode:n,decode:r}}function dr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if($i(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function fr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Da(e,t="="){if($i(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function pg(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Bh(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],s=Array.from(e);for(s.forEach(c=>{if($i(c),c<0||c>=t)throw new Error(`Wrong integer: ${c}`)});;){let c=0,d=!0;for(let f=r;f<s.length;f++){const h=s[f],y=t*c+h;if(!Number.isSafeInteger(y)||t*c/t!==c||y-h!==t*c)throw new Error("convertRadix: carry overflow");if(c=y%n,s[f]=Math.floor(y/n),!Number.isSafeInteger(s[f])||s[f]*n+c!==y)throw new Error("convertRadix: carry overflow");if(d)s[f]?d=!1:r=f;else continue}if(o.push(c),d)break}for(let c=0;c<e.length-1&&e[c]===0;c++)o.push(0);return o.reverse()}const gg=(e,t)=>t?gg(t,e%t):e,sa=(e,t)=>e+(t-gg(e,t));function tl(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(sa(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${sa(t,n)}`);let o=0,s=0;const c=2**n-1,d=[];for(const f of e){if($i(f),f>=2**t)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)d.push((o>>s-n&c)>>>0);o&=2**s-1}if(o=o<<n-s&c,!r&&s>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&s>0&&d.push(o>>>0),d}function Mv(e){return $i(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Bh(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Bh(t,e,2**8))}}}function ro(e,t=!1){if($i(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(sa(8,e)>32||sa(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return tl(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(tl(n,e,8,t))}}}function Ih(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const Hv=lr(ro(4),dr("0123456789ABCDEF"),fr("")),jv=lr(ro(5),dr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Da(5),fr(""));lr(ro(5),dr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Da(5),fr(""));lr(ro(5),dr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),fr(""),pg(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const ir=lr(ro(6),dr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Da(6),fr("")),Dv=lr(ro(6),dr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Da(6),fr("")),Zl=e=>lr(Mv(58),dr(e),fr("")),nl=Zl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Zl("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Zl("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Oh=[0,2,3,5,6,7,9,10,11],qv={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=nl.encode(r).padStart(Oh[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=Oh.indexOf(r.length),s=nl.decode(r);for(let c=0;c<s.length-o;c++)if(s[c]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(t)}},rl=lr(dr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),fr("")),Nh=[996825010,642813549,513874426,1027748829,705979059];function ji(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Nh.length;r++)(t>>r&1)===1&&(n^=Nh[r]);return n}function Rh(e,t,n=1){const r=e.length;let o=1;for(let s=0;s<r;s++){const c=e.charCodeAt(s);if(c<33||c>126)throw new Error(`Invalid prefix (${e})`);o=ji(o)^c>>5}o=ji(o);for(let s=0;s<r;s++)o=ji(o)^e.charCodeAt(s)&31;for(let s of t)o=ji(o)^s;for(let s=0;s<6;s++)o=ji(o);return o^=n,rl.encode(tl([o%2**30],30,5,!1))}function wg(e){const t=e==="bech32"?1:734539939,n=ro(5),r=n.decode,o=n.encode,s=Ih(r);function c(y,m,E=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(m)||m.length&&typeof m[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof m}`);const P=y.length+7+m.length;if(E!==!1&&P>E)throw new TypeError(`Length ${P} exceeds limit ${E}`);return y=y.toLowerCase(),`${y}1${rl.encode(m)}${Rh(y,m,t)}`}function d(y,m=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||m!==!1&&y.length>m)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${m})`);const E=y.toLowerCase();if(y!==E&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=E;const P=y.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');const B=y.slice(0,P),A=y.slice(P+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");const O=rl.decode(A).slice(0,-6),M=Rh(B,O,t);if(!A.endsWith(M))throw new Error(`Invalid checksum in ${y}: expected "${M}"`);return{prefix:B,words:O}}const f=Ih(d);function h(y){const{prefix:m,words:E}=d(y,!1);return{prefix:m,words:E,bytes:r(E)}}return{encode:c,decode:d,decodeToBytes:h,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:s,toWords:o}}const Wr=wg("bech32");wg("bech32m");const Vv={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Fv=lr(ro(4),dr("0123456789abcdef"),fr(""),pg(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Wv={utf8:Vv,hex:Fv,base16:Hv,base32:jv,base64:ir,base64url:Dv,base58:nl,base58xmr:qv};`${Object.keys(Wv).join(", ")}`;new TextDecoder("utf-8");new TextEncoder;var Kv=5e3;function Gv(e){return Yv("note",Po(e))}function Zv(e,t){let n=Wr.toWords(t);return Wr.encode(e,n,Kv)}function Yv(e,t){return Zv(e,t)}const qa=()=>{var M,T;const e=document.querySelector('meta[name="author"]'),t=document.querySelector('meta[name="relays"]'),n=document.querySelector('meta[name="top-notes"]'),r=document.querySelector('meta[name="short-notes"]'),o=document.querySelector('meta[name="short-notes-min-chars"]'),s=document.querySelector('meta[name="short-notes-summary-max-chars"]'),c=document.querySelector('meta[name="topics"]'),d=document.querySelector('meta[name="comments"]');if(!e||!t||!n||!r||!o||!s||!c||!d)throw new Error("Missing meta tags for configuration");const f=e.getAttribute("value"),h=(M=t.getAttribute("value"))==null?void 0:M.split(",").map(N=>N.trim()),y=n.getAttribute("value")||0;function m(N){if(N==null||N.trim()==="")return 0;{let l=parseFloat(N);return isNaN(l)?0:l}}const E=m(o.getAttribute("value")),P=(()=>{switch(r.getAttribute("value")){case"carousel":return"carousel";case"main":return"main";default:return""}})(),B=m(s.getAttribute("value")),A=(T=c.getAttribute("value"))==null?void 0:T.split(",").map(N=>N.trim()).filter(N=>N!==""),O=d.getAttribute("value")=="yes";return{npub:f,relays:h,topNotes:y,shortNotesMinChars:E,shortNotes:P,shortFeedSummaryMaxChars:B,topics:A,comments:O}},Wo=[];function Jv(e,t=At){let n;const r=new Set;function o(d){if(Hn(e,d)&&(e=d,n)){const f=!Wo.length;for(const h of r)h[1](),Wo.push(h,e);if(f){for(let h=0;h<Wo.length;h+=2)Wo[h][0](Wo[h+1]);Wo.length=0}}}function s(d){o(d(e))}function c(d,f=At){const h=[d,f];return r.add(h),r.size===1&&(n=t(o,s)||At),d(e),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:c}}function zh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function mg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Xv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zh(e.outputLen),zh(e.blockLen)}function aa(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Qv(e,t){mg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const _u=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bg=e=>e instanceof Uint8Array,Eu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),xn=(e,t)=>e<<32-t|e>>>t,e2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!e2)throw new Error("Non little-endian hardware is not supported");function t2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Yl(e){if(typeof e=="string"&&(e=t2(e)),!bg(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function n2(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!bg(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class yg{clone(){return this._cloneInto()}}function r2(e){const t=r=>e().update(Yl(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function vg(e=32){if(_u&&typeof _u.getRandomValues=="function")return _u.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function o2(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),d=Number(n&s),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}let i2=class extends yg{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Eu(this.buffer)}update(t){aa(this);const{view:n,buffer:r,blockLen:o}=this;t=Yl(t);const s=t.length;for(let c=0;c<s;){const d=Math.min(o-this.pos,s-c);if(d===o){const f=Eu(t);for(;o<=s-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){aa(this),Qv(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let m=c;m<o;m++)n[m]=0;o2(r,o-8,BigInt(this.length*8),s),this.process(r,0);const d=Eu(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)d.setUint32(4*m,y[m],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}};const s2=(e,t,n)=>e&t^~e&n,a2=(e,t,n)=>e&t^e&n^t&n,c2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lr=new Uint32Array(64);let u2=class extends i2{constructor(){super(64,32,8,!1),this.A=Pr[0]|0,this.B=Pr[1]|0,this.C=Pr[2]|0,this.D=Pr[3]|0,this.E=Pr[4]|0,this.F=Pr[5]|0,this.G=Pr[6]|0,this.H=Pr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:d,H:f}=this;return[t,n,r,o,s,c,d,f]}set(t,n,r,o,s,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let m=0;m<16;m++,n+=4)Lr[m]=t.getUint32(n,!1);for(let m=16;m<64;m++){const E=Lr[m-15],P=Lr[m-2],B=xn(E,7)^xn(E,18)^E>>>3,A=xn(P,17)^xn(P,19)^P>>>10;Lr[m]=A+Lr[m-7]+B+Lr[m-16]|0}let{A:r,B:o,C:s,D:c,E:d,F:f,G:h,H:y}=this;for(let m=0;m<64;m++){const E=xn(d,6)^xn(d,11)^xn(d,25),P=y+E+s2(d,f,h)+c2[m]+Lr[m]|0,A=(xn(r,2)^xn(r,13)^xn(r,22))+a2(r,o,s)|0;y=h,h=f,f=d,d=c+P|0,c=s,s=o,o=r,r=P+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,d,f,h,y)}roundClean(){Lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const ol=r2(()=>new u2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _g=BigInt(0),Va=BigInt(1),l2=BigInt(2),Fa=e=>e instanceof Uint8Array,d2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function hi(e){if(!Fa(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=d2[e[n]];return t}function Eg(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Jl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function pi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Vt(e){return Jl(hi(e))}function Xl(e){if(!Fa(e))throw new Error("Uint8Array expected");return Jl(hi(Uint8Array.from(e).reverse()))}function Kr(e,t){return pi(e.toString(16).padStart(t*2,"0"))}function Ql(e,t){return Kr(e,t).reverse()}function f2(e){return pi(Eg(e))}function Tt(e,t,n){let r;if(typeof t=="string")try{r=pi(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Fa(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Lo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Fa(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function h2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function p2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function g2(e){let t;for(t=0;e>_g;e>>=Va,t+=1);return t}function w2(e,t){return e>>BigInt(t)&Va}const m2=(e,t,n)=>e|(n?Va:_g)<<BigInt(t),ed=e=>(l2<<BigInt(e-1))-Va,ku=e=>new Uint8Array(e),Uh=e=>Uint8Array.from(e);function kg(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ku(e),o=ku(e),s=0;const c=()=>{r.fill(1),o.fill(0),s=0},d=(...m)=>n(o,r,...m),f=(m=ku())=>{o=d(Uh([0]),m),r=d(),m.length!==0&&(o=d(Uh([1]),m),r=d())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const E=[];for(;m<t;){r=d();const P=r.slice();E.push(P),m+=r.length}return Lo(...E)};return(m,E)=>{c(),f(m);let P;for(;!(P=E(h()));)f();return c(),P}}const b2={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ps(e,t,n={}){const r=(o,s,c)=>{const d=b2[s];if(typeof d!="function")throw new Error(`Invalid validator "${s}", expected function`);const f=e[o];if(!(c&&f===void 0)&&!d(f,e))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const y2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:w2,bitLen:g2,bitMask:ed,bitSet:m2,bytesToHex:hi,bytesToNumberBE:Vt,bytesToNumberLE:Xl,concatBytes:Lo,createHmacDrbg:kg,ensureBytes:Tt,equalBytes:h2,hexToBytes:pi,hexToNumber:Jl,numberToBytesBE:Kr,numberToBytesLE:Ql,numberToHexUnpadded:Eg,numberToVarBytesBE:f2,utf8ToBytes:p2,validateObject:ps},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mt=BigInt(0),ot=BigInt(1),Eo=BigInt(2),v2=BigInt(3),il=BigInt(4),Mh=BigInt(5),Hh=BigInt(8);BigInt(9);BigInt(16);function Et(e,t){const n=e%t;return n>=mt?n:t+n}function _2(e,t,n){if(n<=mt||t<mt)throw new Error("Expected power/modulo > 0");if(n===ot)return mt;let r=ot;for(;t>mt;)t&ot&&(r=r*e%n),e=e*e%n,t>>=ot;return r}function tn(e,t,n){let r=e;for(;t-- >mt;)r*=r,r%=n;return r}function sl(e,t){if(e===mt||t<=mt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Et(e,t),r=t,o=mt,s=ot;for(;n!==mt;){const d=r/n,f=r%n,h=o-s*d;r=n,n=f,o=s,s=h}if(r!==ot)throw new Error("invert: does not exist");return Et(o,t)}function E2(e){const t=(e-ot)/Eo;let n,r,o;for(n=e-ot,r=0;n%Eo===mt;n/=Eo,r++);for(o=Eo;o<e&&_2(o,t,e)!==e-ot;o++);if(r===1){const c=(e+ot)/il;return function(f,h){const y=f.pow(h,c);if(!f.eql(f.sqr(y),h))throw new Error("Cannot find square root");return y}}const s=(n+ot)/Eo;return function(d,f){if(d.pow(f,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let h=r,y=d.pow(d.mul(d.ONE,o),n),m=d.pow(f,s),E=d.pow(f,n);for(;!d.eql(E,d.ONE);){if(d.eql(E,d.ZERO))return d.ZERO;let P=1;for(let A=d.sqr(E);P<h&&!d.eql(A,d.ONE);P++)A=d.sqr(A);const B=d.pow(y,ot<<BigInt(h-P-1));y=d.sqr(B),m=d.mul(m,B),E=d.mul(E,y),h=P}return m}}function k2(e){if(e%il===v2){const t=(e+ot)/il;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%Hh===Mh){const t=(e-Mh)/Hh;return function(r,o){const s=r.mul(o,Eo),c=r.pow(s,t),d=r.mul(o,c),f=r.mul(r.mul(d,Eo),c),h=r.mul(d,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return E2(e)}const A2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function S2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=A2.reduce((r,o)=>(r[o]="function",r),t);return ps(e,n)}function $2(e,t,n){if(n<mt)throw new Error("Expected power > 0");if(n===mt)return e.ONE;if(n===ot)return t;let r=e.ONE,o=t;for(;n>mt;)n&ot&&(r=e.mul(r,o)),o=e.sqr(o),n>>=ot;return r}function x2(e,t){const n=new Array(t.length),r=t.reduce((s,c,d)=>e.is0(c)?s:(n[d]=s,e.mul(s,c)),e.ONE),o=e.inv(r);return t.reduceRight((s,c,d)=>e.is0(c)?s:(n[d]=e.mul(s,n[d]),e.mul(s,c)),o),n}function Ag(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function T2(e,t,n=!1,r={}){if(e<=mt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:s}=Ag(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=k2(e),d=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:ed(o),ZERO:mt,ONE:ot,create:f=>Et(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return mt<=f&&f<e},is0:f=>f===mt,isOdd:f=>(f&ot)===ot,neg:f=>Et(-f,e),eql:(f,h)=>f===h,sqr:f=>Et(f*f,e),add:(f,h)=>Et(f+h,e),sub:(f,h)=>Et(f-h,e),mul:(f,h)=>Et(f*h,e),pow:(f,h)=>$2(d,f,h),div:(f,h)=>Et(f*sl(h,e),e),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>sl(f,e),sqrt:r.sqrt||(f=>c(d,f)),invertBatch:f=>x2(d,f),cmov:(f,h,y)=>y?h:f,toBytes:f=>n?Ql(f,s):Kr(f,s),fromBytes:f=>{if(f.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${f.length}`);return n?Xl(f):Vt(f)}});return Object.freeze(d)}function Sg(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function $g(e){const t=Sg(e);return t+Math.ceil(t/2)}function P2(e,t,n=!1){const r=e.length,o=Sg(t),s=$g(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const c=n?Vt(e):Xl(e),d=Et(c,t-ot)+ot;return n?Ql(d,o):Kr(d,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L2=BigInt(0),Au=BigInt(1);function C2(e,t){const n=(o,s)=>{const c=s.negate();return o?c:s},r=o=>{const s=Math.ceil(t/o)+1,c=2**(o-1);return{windows:s,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,s){let c=e.ZERO,d=o;for(;s>L2;)s&Au&&(c=c.add(d)),d=d.double(),s>>=Au;return c},precomputeWindow(o,s){const{windows:c,windowSize:d}=r(s),f=[];let h=o,y=h;for(let m=0;m<c;m++){y=h,f.push(y);for(let E=1;E<d;E++)y=y.add(h),f.push(y);h=y.double()}return f},wNAF(o,s,c){const{windows:d,windowSize:f}=r(o);let h=e.ZERO,y=e.BASE;const m=BigInt(2**o-1),E=2**o,P=BigInt(o);for(let B=0;B<d;B++){const A=B*f;let O=Number(c&m);c>>=P,O>f&&(O-=E,c+=Au);const M=A,T=A+Math.abs(O)-1,N=B%2!==0,l=O<0;O===0?y=y.add(n(N,s[M])):h=h.add(n(l,s[T]))}return{p:h,f:y}},wNAFCached(o,s,c,d){const f=o._WINDOW_SIZE||1;let h=s.get(o);return h||(h=this.precomputeWindow(o,f),f!==1&&s.set(o,d(h))),this.wNAF(f,h,c)}}}function xg(e){return S2(e.Fp),ps(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ag(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function B2(e){const t=xg(e);ps(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:I2,hexToBytes:O2}=y2,$o={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=$o;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:I2(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=$o,n=typeof e=="string"?O2(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=$o._parseInt(n.subarray(2)),{d:c,l:d}=$o._parseInt(s);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const y=h.toString(16);return y.length&1?`0${y}`:y},r=t(n(e.s)),o=t(n(e.r)),s=r.length/2,c=o.length/2,d=n(s),f=n(c);return`30${n(c+s+4)}02${f}${o}02${d}${r}`}},Xn=BigInt(0),rn=BigInt(1);BigInt(2);const jh=BigInt(3);BigInt(4);function N2(e){const t=B2(e),{Fp:n}=t,r=t.toBytes||((B,A,O)=>{const M=A.toAffine();return Lo(Uint8Array.from([4]),n.toBytes(M.x),n.toBytes(M.y))}),o=t.fromBytes||(B=>{const A=B.subarray(1),O=n.fromBytes(A.subarray(0,n.BYTES)),M=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:O,y:M}});function s(B){const{a:A,b:O}=t,M=n.sqr(B),T=n.mul(M,B);return n.add(n.add(T,n.mul(B,A)),O)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function c(B){return typeof B=="bigint"&&Xn<B&&B<t.n}function d(B){if(!c(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(B){const{allowedPrivateKeyLengths:A,nByteLength:O,wrapPrivateKey:M,n:T}=t;if(A&&typeof B!="bigint"){if(B instanceof Uint8Array&&(B=hi(B)),typeof B!="string"||!A.includes(B.length))throw new Error("Invalid key");B=B.padStart(O*2,"0")}let N;try{N=typeof B=="bigint"?B:Vt(Tt("private key",B,O))}catch{throw new Error(`private key must be ${O} bytes, hex or bigint, not ${typeof B}`)}return M&&(N=Et(N,T)),d(N),N}const h=new Map;function y(B){if(!(B instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(A,O,M){if(this.px=A,this.py=O,this.pz=M,A==null||!n.isValid(A))throw new Error("x required");if(O==null||!n.isValid(O))throw new Error("y required");if(M==null||!n.isValid(M))throw new Error("z required")}static fromAffine(A){const{x:O,y:M}=A||{};if(!A||!n.isValid(O)||!n.isValid(M))throw new Error("invalid affine point");if(A instanceof m)throw new Error("projective point not allowed");const T=N=>n.eql(N,n.ZERO);return T(O)&&T(M)?m.ZERO:new m(O,M,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const O=n.invertBatch(A.map(M=>M.pz));return A.map((M,T)=>M.toAffine(O[T])).map(m.fromAffine)}static fromHex(A){const O=m.fromAffine(o(Tt("pointHex",A)));return O.assertValidity(),O}static fromPrivateKey(A){return m.BASE.multiply(f(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:O}=this.toAffine();if(!n.isValid(A)||!n.isValid(O))throw new Error("bad point: x or y not FE");const M=n.sqr(O),T=s(A);if(!n.eql(M,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){y(A);const{px:O,py:M,pz:T}=this,{px:N,py:l,pz:w}=A,p=n.eql(n.mul(O,w),n.mul(N,T)),v=n.eql(n.mul(M,w),n.mul(l,T));return p&&v}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:O}=t,M=n.mul(O,jh),{px:T,py:N,pz:l}=this;let w=n.ZERO,p=n.ZERO,v=n.ZERO,$=n.mul(T,T),R=n.mul(N,N),L=n.mul(l,l),_=n.mul(T,N);return _=n.add(_,_),v=n.mul(T,l),v=n.add(v,v),w=n.mul(A,v),p=n.mul(M,L),p=n.add(w,p),w=n.sub(R,p),p=n.add(R,p),p=n.mul(w,p),w=n.mul(_,w),v=n.mul(M,v),L=n.mul(A,L),_=n.sub($,L),_=n.mul(A,_),_=n.add(_,v),v=n.add($,$),$=n.add(v,$),$=n.add($,L),$=n.mul($,_),p=n.add(p,$),L=n.mul(N,l),L=n.add(L,L),$=n.mul(L,_),w=n.sub(w,$),v=n.mul(L,R),v=n.add(v,v),v=n.add(v,v),new m(w,p,v)}add(A){y(A);const{px:O,py:M,pz:T}=this,{px:N,py:l,pz:w}=A;let p=n.ZERO,v=n.ZERO,$=n.ZERO;const R=t.a,L=n.mul(t.b,jh);let _=n.mul(O,N),x=n.mul(M,l),z=n.mul(T,w),q=n.add(O,M),I=n.add(N,l);q=n.mul(q,I),I=n.add(_,x),q=n.sub(q,I),I=n.add(O,T);let S=n.add(N,w);return I=n.mul(I,S),S=n.add(_,z),I=n.sub(I,S),S=n.add(M,T),p=n.add(l,w),S=n.mul(S,p),p=n.add(x,z),S=n.sub(S,p),$=n.mul(R,I),p=n.mul(L,z),$=n.add(p,$),p=n.sub(x,$),$=n.add(x,$),v=n.mul(p,$),x=n.add(_,_),x=n.add(x,_),z=n.mul(R,z),I=n.mul(L,I),x=n.add(x,z),z=n.sub(_,z),z=n.mul(R,z),I=n.add(I,z),_=n.mul(x,I),v=n.add(v,_),_=n.mul(S,I),p=n.mul(q,p),p=n.sub(p,_),_=n.mul(q,x),$=n.mul(S,$),$=n.add($,_),new m(p,v,$)}subtract(A){return this.add(A.negate())}is0(){return this.equals(m.ZERO)}wNAF(A){return P.wNAFCached(this,h,A,O=>{const M=n.invertBatch(O.map(T=>T.pz));return O.map((T,N)=>T.toAffine(M[N])).map(m.fromAffine)})}multiplyUnsafe(A){const O=m.ZERO;if(A===Xn)return O;if(d(A),A===rn)return this;const{endo:M}=t;if(!M)return P.unsafeLadder(this,A);let{k1neg:T,k1:N,k2neg:l,k2:w}=M.splitScalar(A),p=O,v=O,$=this;for(;N>Xn||w>Xn;)N&rn&&(p=p.add($)),w&rn&&(v=v.add($)),$=$.double(),N>>=rn,w>>=rn;return T&&(p=p.negate()),l&&(v=v.negate()),v=new m(n.mul(v.px,M.beta),v.py,v.pz),p.add(v)}multiply(A){d(A);let O=A,M,T;const{endo:N}=t;if(N){const{k1neg:l,k1:w,k2neg:p,k2:v}=N.splitScalar(O);let{p:$,f:R}=this.wNAF(w),{p:L,f:_}=this.wNAF(v);$=P.constTimeNegate(l,$),L=P.constTimeNegate(p,L),L=new m(n.mul(L.px,N.beta),L.py,L.pz),M=$.add(L),T=R.add(_)}else{const{p:l,f:w}=this.wNAF(O);M=l,T=w}return m.normalizeZ([M,T])[0]}multiplyAndAddUnsafe(A,O,M){const T=m.BASE,N=(w,p)=>p===Xn||p===rn||!w.equals(T)?w.multiplyUnsafe(p):w.multiply(p),l=N(this,O).add(N(A,M));return l.is0()?void 0:l}toAffine(A){const{px:O,py:M,pz:T}=this,N=this.is0();A==null&&(A=N?n.ONE:n.inv(T));const l=n.mul(O,A),w=n.mul(M,A),p=n.mul(T,A);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:l,y:w}}isTorsionFree(){const{h:A,isTorsionFree:O}=t;if(A===rn)return!0;if(O)return O(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:O}=t;return A===rn?this:O?O(m,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(m,this,A)}toHex(A=!0){return hi(this.toRawBytes(A))}}m.BASE=new m(t.Gx,t.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const E=t.nBitLength,P=C2(m,t.endo?Math.ceil(E/2):E);return{CURVE:t,ProjectivePoint:m,normPrivateKeyToScalar:f,weierstrassEquation:s,isWithinCurveOrder:c}}function R2(e){const t=xg(e);return ps(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function z2(e){const t=R2(e),{Fp:n,n:r}=t,o=n.BYTES+1,s=2*n.BYTES+1;function c(I){return Xn<I&&I<n.ORDER}function d(I){return Et(I,r)}function f(I){return sl(I,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:y,weierstrassEquation:m,isWithinCurveOrder:E}=N2({...t,toBytes(I,S,D){const W=S.toAffine(),K=n.toBytes(W.x),Z=Lo;return D?Z(Uint8Array.from([S.hasEvenY()?2:3]),K):Z(Uint8Array.from([4]),K,n.toBytes(W.y))},fromBytes(I){const S=I.length,D=I[0],W=I.subarray(1);if(S===o&&(D===2||D===3)){const K=Vt(W);if(!c(K))throw new Error("Point is not on curve");const Z=m(K);let G=n.sqrt(Z);const oe=(G&rn)===rn;return(D&1)===1!==oe&&(G=n.neg(G)),{x:K,y:G}}else if(S===s&&D===4){const K=n.fromBytes(W.subarray(0,n.BYTES)),Z=n.fromBytes(W.subarray(n.BYTES,2*n.BYTES));return{x:K,y:Z}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),P=I=>hi(Kr(I,t.nByteLength));function B(I){const S=r>>rn;return I>S}function A(I){return B(I)?d(-I):I}const O=(I,S,D)=>Vt(I.slice(S,D));class M{constructor(S,D,W){this.r=S,this.s=D,this.recovery=W,this.assertValidity()}static fromCompact(S){const D=t.nByteLength;return S=Tt("compactSignature",S,D*2),new M(O(S,0,D),O(S,D,2*D))}static fromDER(S){const{r:D,s:W}=$o.toSig(Tt("DER",S));return new M(D,W)}assertValidity(){if(!E(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!E(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new M(this.r,this.s,S)}recoverPublicKey(S){const{r:D,s:W,recovery:K}=this,Z=v(Tt("msgHash",S));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const G=K===2||K===3?D+t.n:D;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const oe=K&1?"03":"02",he=h.fromHex(oe+P(G)),be=f(G),Se=d(-Z*be),re=d(W*be),ye=h.BASE.multiplyAndAddUnsafe(he,Se,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return pi(this.toDERHex())}toDERHex(){return $o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pi(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}const T={isValidPrivateKey(I){try{return y(I),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const I=$g(t.n);return P2(t.randomBytes(I),t.n)},precompute(I=8,S=h.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}};function N(I,S=!0){return h.fromPrivateKey(I).toRawBytes(S)}function l(I){const S=I instanceof Uint8Array,D=typeof I=="string",W=(S||D)&&I.length;return S?W===o||W===s:D?W===2*o||W===2*s:I instanceof h}function w(I,S,D=!0){if(l(I))throw new Error("first arg must be private key");if(!l(S))throw new Error("second arg must be public key");return h.fromHex(S).multiply(y(I)).toRawBytes(D)}const p=t.bits2int||function(I){const S=Vt(I),D=I.length*8-t.nBitLength;return D>0?S>>BigInt(D):S},v=t.bits2int_modN||function(I){return d(p(I))},$=ed(t.nBitLength);function R(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Xn<=I&&I<$))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Kr(I,t.nByteLength)}function L(I,S,D=_){if(["recovered","canonical"].some(Oe=>Oe in D))throw new Error("sign() legacy options not supported");const{hash:W,randomBytes:K}=t;let{lowS:Z,prehash:G,extraEntropy:oe}=D;Z==null&&(Z=!0),I=Tt("msgHash",I),G&&(I=Tt("prehashed msgHash",W(I)));const he=v(I),be=y(S),Se=[R(be),R(he)];if(oe!=null){const Oe=oe===!0?K(n.BYTES):oe;Se.push(Tt("extraEntropy",Oe))}const re=Lo(...Se),ye=he;function Be(Oe){const Me=p(Oe);if(!E(Me))return;const pt=f(Me),We=h.BASE.multiply(Me).toAffine(),se=d(We.x);if(se===Xn)return;const Re=d(pt*d(ye+se*be));if(Re===Xn)return;let Te=(We.x===se?0:2)|Number(We.y&rn),Pe=Re;return Z&&B(Re)&&(Pe=A(Re),Te^=1),new M(se,Pe,Te)}return{seed:re,k2sig:Be}}const _={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};function z(I,S,D=_){const{seed:W,k2sig:K}=L(I,S,D),Z=t;return kg(Z.hash.outputLen,Z.nByteLength,Z.hmac)(W,K)}h.BASE._setWindowSize(8);function q(I,S,D,W=x){var We;const K=I;if(S=Tt("msgHash",S),D=Tt("publicKey",D),"strict"in W)throw new Error("options.strict was renamed to lowS");const{lowS:Z,prehash:G}=W;let oe,he;try{if(typeof K=="string"||K instanceof Uint8Array)try{oe=M.fromDER(K)}catch(se){if(!(se instanceof $o.Err))throw se;oe=M.fromCompact(K)}else if(typeof K=="object"&&typeof K.r=="bigint"&&typeof K.s=="bigint"){const{r:se,s:Re}=K;oe=new M(se,Re)}else throw new Error("PARSE");he=h.fromHex(D)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Z&&oe.hasHighS())return!1;G&&(S=t.hash(S));const{r:be,s:Se}=oe,re=v(S),ye=f(Se),Be=d(re*ye),Oe=d(be*ye),Me=(We=h.BASE.multiplyAndAddUnsafe(he,Be,Oe))==null?void 0:We.toAffine();return Me?d(Me.x)===be:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:w,sign:z,verify:q,ProjectivePoint:h,Signature:M,utils:T}}let Tg=class extends yg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Xv(t);const r=Yl(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return aa(this),this.iHash.update(t),this}digestInto(t){aa(this),mg(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:c,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=c,t.outputLen=d,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Pg=(e,t,n)=>new Tg(e,t).update(n).digest();Pg.create=(e,t)=>new Tg(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function U2(e){return{hash:e,hmac:(t,...n)=>Pg(e,t,n2(...n)),randomBytes:vg}}function M2(e,t){const n=r=>z2({...e,...U2(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ca=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Lg=BigInt(1),ua=BigInt(2),Dh=(e,t)=>(e+t/ua)/t;function Cg(e){const t=Wa,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),c=BigInt(23),d=BigInt(44),f=BigInt(88),h=e*e*e%t,y=h*h*e%t,m=tn(y,n,t)*y%t,E=tn(m,n,t)*y%t,P=tn(E,ua,t)*h%t,B=tn(P,o,t)*P%t,A=tn(B,s,t)*B%t,O=tn(A,d,t)*A%t,M=tn(O,f,t)*O%t,T=tn(M,d,t)*A%t,N=tn(T,n,t)*y%t,l=tn(N,c,t)*B%t,w=tn(l,r,t)*h%t,p=tn(w,ua,t);if(!al.eql(al.sqr(p),e))throw new Error("Cannot find square root");return p}const al=T2(Wa,void 0,void 0,{sqrt:Cg}),xi=M2({a:BigInt(0),b:BigInt(7),Fp:al,n:ca,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ca,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Lg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,c=BigInt("0x100000000000000000000000000000000"),d=Dh(s*e,t),f=Dh(-r*e,t);let h=Et(e-d*n-f*o,t),y=Et(-d*r-f*s,t);const m=h>c,E=y>c;if(m&&(h=t-h),E&&(y=t-y),h>c||y>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:h,k2neg:E,k2:y}}}},ol),Ka=BigInt(0),Bg=e=>typeof e=="bigint"&&Ka<e&&e<Wa,H2=e=>typeof e=="bigint"&&Ka<e&&e<ca,qh={};function la(e,...t){let n=qh[e];if(n===void 0){const r=ol(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Lo(r,r),qh[e]=n}return ol(Lo(n,...t))}const td=e=>e.toRawBytes(!0).slice(1),cl=e=>Kr(e,32),Su=e=>Et(e,Wa),ns=e=>Et(e,ca),nd=xi.ProjectivePoint,j2=(e,t,n)=>nd.BASE.multiplyAndAddUnsafe(e,t,n);function ul(e){let t=xi.utils.normPrivateKeyToScalar(e),n=nd.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:ns(-t),bytes:td(n)}}function Ig(e){if(!Bg(e))throw new Error("bad x: need 0 < x < p");const t=Su(e*e),n=Su(t*e+BigInt(7));let r=Cg(n);r%ua!==Ka&&(r=Su(-r));const o=new nd(e,r,Lg);return o.assertValidity(),o}function Og(...e){return ns(Vt(la("BIP0340/challenge",...e)))}function D2(e){return ul(e).bytes}function q2(e,t,n=vg(32)){const r=Tt("message",e),{bytes:o,scalar:s}=ul(t),c=Tt("auxRand",n,32),d=cl(s^Vt(la("BIP0340/aux",c))),f=la("BIP0340/nonce",d,o,r),h=ns(Vt(f));if(h===Ka)throw new Error("sign failed: k is zero");const{bytes:y,scalar:m}=ul(h),E=Og(y,o,r),P=new Uint8Array(64);if(P.set(y,0),P.set(cl(ns(m+E*s)),32),!Ng(P,r,o))throw new Error("sign: Invalid signature produced");return P}function Ng(e,t,n){const r=Tt("signature",e,64),o=Tt("message",t),s=Tt("publicKey",n,32);try{const c=Ig(Vt(s)),d=Vt(r.subarray(0,32));if(!Bg(d))return!1;const f=Vt(r.subarray(32,64));if(!H2(f))return!1;const h=Og(cl(d),td(c),o),y=j2(c,f,ns(-h));return!(!y||!y.hasEvenY()||y.toAffine().x!==d)}catch{return!1}}const Cn={getPublicKey:D2,sign:q2,verify:Ng,utils:{randomPrivateKey:xi.utils.randomPrivateKey,lift_x:Ig,pointToBytes:td,numberToBytesBE:Kr,bytesToNumberBE:Vt,taggedHash:la,mod:Et}};function ll(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function V2(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Rg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function F2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ll(e.outputLen),ll(e.blockLen)}function W2(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function K2(e,t){Rg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const In={number:ll,bool:V2,bytes:Rg,hash:F2,exists:W2,output:K2};function G2(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),d=Number(n&s),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}class Z2 extends dg{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=vu(this.buffer)}update(t){In.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=ts(t);const s=t.length;for(let c=0;c<s;){const d=Math.min(o-this.pos,s-c);if(d===o){const f=vu(t);for(;o<=s-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){In.exists(this),In.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let m=c;m<o;m++)n[m]=0;G2(r,o-8,BigInt(this.length*8),s),this.process(r,0);const d=vu(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)d.setUint32(4*m,y[m],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}}const Y2=(e,t,n)=>e&t^~e&n,J2=(e,t,n)=>e&t^e&n^t&n,X2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Br=new Uint32Array(64);class zg extends Z2{constructor(){super(64,32,8,!1),this.A=Cr[0]|0,this.B=Cr[1]|0,this.C=Cr[2]|0,this.D=Cr[3]|0,this.E=Cr[4]|0,this.F=Cr[5]|0,this.G=Cr[6]|0,this.H=Cr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:d,H:f}=this;return[t,n,r,o,s,c,d,f]}set(t,n,r,o,s,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let m=0;m<16;m++,n+=4)Br[m]=t.getUint32(n,!1);for(let m=16;m<64;m++){const E=Br[m-15],P=Br[m-2],B=$n(E,7)^$n(E,18)^E>>>3,A=$n(P,17)^$n(P,19)^P>>>10;Br[m]=A+Br[m-7]+B+Br[m-16]|0}let{A:r,B:o,C:s,D:c,E:d,F:f,G:h,H:y}=this;for(let m=0;m<64;m++){const E=$n(d,6)^$n(d,11)^$n(d,25),P=y+E+Y2(d,f,h)+X2[m]+Br[m]|0,A=($n(r,2)^$n(r,13)^$n(r,22))+J2(r,o,s)|0;y=h,h=f,f=d,d=c+P|0,c=s,s=o,o=r,r=P+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,d,f,h,y)}roundClean(){Br.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let Q2=class extends zg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Ti=fg(()=>new zg);fg(()=>new Q2);var vo=Symbol("verified"),e3=e=>e instanceof Object;function t3(e){if(!e3(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var n3=new TextEncoder;function Fi(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var r3=class{constructor(t){Ce(this,"value");Ce(this,"next",null);Ce(this,"prev",null);this.value=t}},o3=class{constructor(){Ce(this,"first");Ce(this,"last");this.first=null,this.last=null}enqueue(t){const n=new r3(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},i3=class{generateSecretKey(){return Cn.utils.randomPrivateKey()}getPublicKey(t){return wt(Cn.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=wt(Cn.getPublicKey(n)),r.id=$u(r),r.sig=wt(Cn.sign($u(r),n)),r[vo]=!0,r}verifyEvent(t){if(typeof t[vo]=="boolean")return t[vo];const n=$u(t);if(n!==t.id)return t[vo]=!1,!1;try{const r=Cn.verify(t.sig,n,t.pubkey);return t[vo]=r,r}catch{return t[vo]=!1,!1}}};function s3(e){if(!t3(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function $u(e){let t=Ti(n3.encode(s3(e)));return wt(t)}var Ga=new i3;Ga.generateSecretKey;Ga.getPublicKey;Ga.finalizeEvent;var a3=Ga.verifyEvent,c3=22242;function u3(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,c])=>s===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function l3(e,t){for(let n=0;n<e.length;n++)if(u3(e[n],t))return!0;return!1}function d3(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function f3(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function h3(e,t){return{kind:c3,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function p3(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var g3=e=>(e[vo]=!0,!0),Ug=class{constructor(e,t){Ce(this,"url");Ce(this,"_connected",!1);Ce(this,"onclose",null);Ce(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));Ce(this,"_onauth",null);Ce(this,"baseEoseTimeout",4400);Ce(this,"connectionTimeout",4400);Ce(this,"openSubs",new Map);Ce(this,"connectionTimeoutHandle");Ce(this,"connectionPromise");Ce(this,"openCountRequests",new Map);Ce(this,"openEventPublishes",new Map);Ce(this,"ws");Ce(this,"incomingMessageQueue",new o3);Ce(this,"queueRunning",!1);Ce(this,"challenge");Ce(this,"serial",0);Ce(this,"verifyEvent");Ce(this,"_WebSocket");this.url=Fi(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){const n=new Ug(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await p3();this.queueRunning=!1}handleNext(){var n,r,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=f3(e);if(t){const s=this.openSubs.get(t);if(!s)return;const c=d3(e,"id"),d=(n=s.alreadyHaveEvent)==null?void 0:n.call(s,c);if((r=s.receivedEvent)==null||r.call(s,this,c),d)return}try{let s=JSON.parse(e);switch(s[0]){case"EVENT":{const c=this.openSubs.get(s[1]),d=s[2];this.verifyEvent(d)&&l3(c.filters,d)&&c.onevent(d);return}case"COUNT":{const c=s[1],d=s[2],f=this.openCountRequests.get(c);f&&(f.resolve(d.count),this.openCountRequests.delete(c));return}case"EOSE":{const c=this.openSubs.get(s[1]);if(!c)return;c.receivedEose();return}case"OK":{const c=s[1],d=s[2],f=s[3],h=this.openEventPublishes.get(c);d?h.resolve(f):h.reject(new Error(f)),this.openEventPublishes.delete(c);return}case"CLOSED":{const c=s[1],d=this.openSubs.get(c);if(!d)return;d.closed=!0,d.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(o=this._onauth)==null||o.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(h3(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,s)=>{this.openCountRequests.set(n,{resolve:o,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new w3(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},w3=class{constructor(e,t,n,r){Ce(this,"relay");Ce(this,"id");Ce(this,"closed",!1);Ce(this,"eosed",!1);Ce(this,"filters");Ce(this,"alreadyHaveEvent");Ce(this,"receivedEvent");Ce(this,"onevent");Ce(this,"oneose");Ce(this,"onclose");Ce(this,"eoseTimeout");Ce(this,"eoseTimeoutHandle");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},m3=class{constructor(t){Ce(this,"relays",new Map);Ce(this,"seenOn",new Map);Ce(this,"trackRelays",!1);Ce(this,"verifyEvent");Ce(this,"trustedRelayURLs",new Set);Ce(this,"_WebSocket");this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation}async ensureRelay(t,n){t=Fi(t);let r=this.relays.get(t);return r||(r=new Ug(t,{verifyEvent:this.trustedRelayURLs.has(t)?g3:this.verifyEvent,websocketImplementation:this._WebSocket}),n!=null&&n.connectionTimeout&&(r.connectionTimeout=n.connectionTimeout),this.relays.set(t,r)),await r.connect(),r}close(t){t.map(Fi).forEach(n=>{var r;(r=this.relays.get(n))==null||r.close()})}subscribeMany(t,n,r){return this.subscribeManyMap(Object.fromEntries(t.map(o=>[o,n])),r)}subscribeManyMap(t,n){this.trackRelays&&(n.receivedEvent=(E,P)=>{let B=this.seenOn.get(P);B||(B=new Set,this.seenOn.set(P,B)),B.add(E)});const r=new Set,o=[],s=Object.keys(t).length,c=[];let d=E=>{var P;c[E]=!0,c.filter(B=>B).length===s&&((P=n.oneose)==null||P.call(n),d=()=>{})};const f=[];let h=(E,P)=>{var B;d(E),f[E]=P,f.filter(A=>A).length===s&&((B=n.onclose)==null||B.call(n,f),h=()=>{})};const y=E=>{var B;if((B=n.alreadyHaveEvent)!=null&&B.call(n,E))return!0;const P=r.has(E);return r.add(E),P},m=Promise.all(Object.entries(t).map(async(E,P,B)=>{if(B.indexOf(E)!==P){h(P,"duplicate url");return}let[A,O]=E;A=Fi(A);let M;try{M=await this.ensureRelay(A,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(N){h(P,(N==null?void 0:N.message)||String(N));return}let T=M.subscribe(O,{...n,oneose:()=>d(P),onclose:N=>h(P,N),alreadyHaveEvent:y,eoseTimeout:n.maxWait});o.push(T)}));return{async close(){await m,o.forEach(E=>{E.close()})}}}subscribeManyEose(t,n,r){const o=this.subscribeMany(t,n,{...r,oneose(){o.close()}});return o}async querySync(t,n,r){return new Promise(async o=>{const s=[];this.subscribeManyEose(t,[n],{...r,onevent(c){s.push(c)},onclose(c){o(s)}})})}async get(t,n,r){n.limit=1;const o=await this.querySync(t,n,r);return o.sort((s,c)=>c.created_at-s.created_at),o[0]||null}publish(t,n){return t.map(Fi).map(async(r,o,s)=>s.indexOf(r)!==o?Promise.reject("duplicate url"):(await this.ensureRelay(r)).publish(n))}listConnectionStatus(){const t=new Map;return this.relays.forEach((n,r)=>t.set(r,n.connected)),t}destroy(){this.relays.forEach(t=>t.close()),this.relays=new Map}},Mg;try{Mg=WebSocket}catch{}var b3=class extends m3{constructor(){super({verifyEvent:a3,websocketImplementation:Mg})}};const da=new b3;function xu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Vh(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function y3(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function er(e,...t){if(!y3(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Lt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),v3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!v3)throw new Error("Non little-endian hardware is not supported");function _3(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function E3(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const k3=(e,t)=>(Object.assign(t,e),t),Dr=16,A3=283;function rd(e){return e<<1^A3&-(e>>7)}function ti(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=rd(e);return n}const dl=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=rd(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),S3=dl.map((e,t)=>dl.indexOf(t)),$3=e=>e<<24|e>>>8,Tu=e=>e<<8|e>>>24;function Hg(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((h,y)=>t(e[y])),r=n.map(Tu),o=r.map(Tu),s=o.map(Tu),c=new Uint32Array(256*256),d=new Uint32Array(256*256),f=new Uint16Array(256*256);for(let h=0;h<256;h++)for(let y=0;y<256;y++){const m=h*256+y;c[m]=n[h]^r[y],d[m]=o[h]^s[y],f[m]=e[h]<<8|e[y]}return{sbox:e,sbox2:f,T0:n,T1:r,T2:o,T3:s,T01:c,T23:d}}const od=Hg(dl,e=>ti(e,3)<<24|e<<16|e<<8|ti(e,2)),jg=Hg(S3,e=>ti(e,11)<<24|ti(e,13)<<16|ti(e,9)<<8|ti(e,14)),x3=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=rd(n))e[t]=n;return e})();function Dg(e){er(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=od,r=Lt(e),o=r.length,s=d=>On(n,d,d,d,d),c=new Uint32Array(t+28);c.set(r);for(let d=o;d<c.length;d++){let f=c[d-1];d%o===0?f=s($3(f))^x3[d/o-1]:o>6&&d%o===4&&(f=s(f)),c[d]=c[d-o]^f}return c}function T3(e){const t=Dg(e),n=t.slice(),r=t.length,{sbox2:o}=od,{T0:s,T1:c,T2:d,T3:f}=jg;for(let h=0;h<r;h+=4)for(let y=0;y<4;y++)n[h+y]=t[r-h-4+y];t.fill(0);for(let h=4;h<r-4;h++){const y=n[h],m=On(o,y,y,y,y);n[h]=s[m&255]^c[m>>>8&255]^d[m>>>16&255]^f[m>>>24]}return n}function Hr(e,t,n,r,o,s){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|s>>>24&255]}function On(e,t,n,r,o){return e[t&255|n&65280]|e[r>>>16&255|o>>>16&65280]<<16}function Fh(e,t,n,r,o){const{sbox2:s,T01:c,T23:d}=od;let f=0;t^=e[f++],n^=e[f++],r^=e[f++],o^=e[f++];const h=e.length/4-2;for(let B=0;B<h;B++){const A=e[f++]^Hr(c,d,t,n,r,o),O=e[f++]^Hr(c,d,n,r,o,t),M=e[f++]^Hr(c,d,r,o,t,n),T=e[f++]^Hr(c,d,o,t,n,r);t=A,n=O,r=M,o=T}const y=e[f++]^On(s,t,n,r,o),m=e[f++]^On(s,n,r,o,t),E=e[f++]^On(s,r,o,t,n),P=e[f++]^On(s,o,t,n,r);return{s0:y,s1:m,s2:E,s3:P}}function P3(e,t,n,r,o){const{sbox2:s,T01:c,T23:d}=jg;let f=0;t^=e[f++],n^=e[f++],r^=e[f++],o^=e[f++];const h=e.length/4-2;for(let B=0;B<h;B++){const A=e[f++]^Hr(c,d,t,o,r,n),O=e[f++]^Hr(c,d,n,t,o,r),M=e[f++]^Hr(c,d,r,n,t,o),T=e[f++]^Hr(c,d,o,r,n,t);t=A,n=O,r=M,o=T}const y=e[f++]^On(s,t,o,r,n),m=e[f++]^On(s,n,t,o,r),E=e[f++]^On(s,r,n,t,o),P=e[f++]^On(s,o,r,n,t);return{s0:y,s1:m,s2:E,s3:P}}function qg(e,t){if(!t)return new Uint8Array(e);if(er(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function L3(e){if(er(e),e.length%Dr!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Dr}`)}function C3(e,t,n){let r=e.length;const o=r%Dr;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=Lt(e);if(t){let f=Dr-o;f||(f=Dr),r=r+f}const c=qg(r,n),d=Lt(c);return{b:s,o:d,out:c}}function B3(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const o=e.subarray(0,-r);for(let s=0;s<r;s++)if(e[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function I3(e){const t=new Uint8Array(16),n=Lt(t);t.set(e);const r=Dr-e.length;for(let o=Dr-r;o<Dr;o++)t[o]=r;return n}const Vg=k3({blockSize:16,nonceLength:16},function(t,n,r={}){er(t),er(n,16);const o=!r.disablePadding;return{encrypt:(s,c)=>{const d=Dg(t),{b:f,o:h,out:y}=C3(s,o,c),m=Lt(n);let E=m[0],P=m[1],B=m[2],A=m[3],O=0;for(;O+4<=f.length;)E^=f[O+0],P^=f[O+1],B^=f[O+2],A^=f[O+3],{s0:E,s1:P,s2:B,s3:A}=Fh(d,E,P,B,A),h[O++]=E,h[O++]=P,h[O++]=B,h[O++]=A;if(o){const M=I3(s.subarray(O*4));E^=M[0],P^=M[1],B^=M[2],A^=M[3],{s0:E,s1:P,s2:B,s3:A}=Fh(d,E,P,B,A),h[O++]=E,h[O++]=P,h[O++]=B,h[O++]=A}return d.fill(0),y},decrypt:(s,c)=>{L3(s);const d=T3(t),f=Lt(n),h=qg(s.length,c),y=Lt(s),m=Lt(h);let E=f[0],P=f[1],B=f[2],A=f[3];for(let O=0;O+4<=y.length;){const M=E,T=P,N=B,l=A;E=y[O+0],P=y[O+1],B=y[O+2],A=y[O+3];const{s0:w,s1:p,s2:v,s3:$}=P3(d,E,P,B,A);m[O++]=w^M,m[O++]=p^T,m[O++]=v^N,m[O++]=$^l}return d.fill(0),B3(h,o)}}}),Fg=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),O3=Fg("expand 16-byte k"),N3=Fg("expand 32-byte k"),R3=Lt(O3),Wg=Lt(N3);Wg.slice();function Fe(e,t){return e<<t|e>>>32-t}function fl(e){return e.byteOffset%4===0}const qs=64,z3=16,Kg=2**32-1,Wh=new Uint32Array;function U3(e,t,n,r,o,s,c,d){const f=o.length,h=new Uint8Array(qs),y=Lt(h),m=fl(o)&&fl(s),E=m?Lt(o):Wh,P=m?Lt(s):Wh;for(let B=0;B<f;c++){if(e(t,n,r,y,c,d),c>=Kg)throw new Error("arx: counter overflow");const A=Math.min(qs,f-B);if(m&&A===qs){const O=B/4;if(B%4!==0)throw new Error("arx: invalid block position");for(let M=0,T;M<z3;M++)T=O+M,P[T]=E[T]^y[M];B+=qs;continue}for(let O=0,M;O<A;O++)M=B+O,s[M]=o[M]^h[O];B+=A}}function M3(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:s,rounds:c}=_3({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return xu(o),xu(c),Vh(s),Vh(n),(d,f,h,y,m=0)=>{er(d),er(f),er(h);const E=h.length;if(y||(y=new Uint8Array(E)),er(y),xu(m),m<0||m>=Kg)throw new Error("arx: counter overflow");if(y.length<E)throw new Error(`arx: output (${y.length}) is shorter than data (${E})`);const P=[];let B=d.length,A,O;if(B===32)A=d.slice(),P.push(A),O=Wg;else if(B===16&&n)A=new Uint8Array(32),A.set(d),A.set(d,16),O=R3,P.push(A);else throw new Error(`arx: invalid 32-byte key, got length=${B}`);fl(f)||(f=f.slice(),P.push(f));const M=Lt(A);if(r){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(O,M,Lt(f.subarray(0,16)),M),f=f.subarray(16)}const T=16-o;if(T!==f.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const l=new Uint8Array(12);l.set(f,s?0:12-f.length),f=l,P.push(f)}const N=Lt(f);for(U3(e,O,M,N,h,y,m,c);P.length>0;)P.pop().fill(0);return y}}function H3(e,t,n,r,o,s=20){let c=e[0],d=e[1],f=e[2],h=e[3],y=t[0],m=t[1],E=t[2],P=t[3],B=t[4],A=t[5],O=t[6],M=t[7],T=o,N=n[0],l=n[1],w=n[2],p=c,v=d,$=f,R=h,L=y,_=m,x=E,z=P,q=B,I=A,S=O,D=M,W=T,K=N,Z=l,G=w;for(let he=0;he<s;he+=2)p=p+L|0,W=Fe(W^p,16),q=q+W|0,L=Fe(L^q,12),p=p+L|0,W=Fe(W^p,8),q=q+W|0,L=Fe(L^q,7),v=v+_|0,K=Fe(K^v,16),I=I+K|0,_=Fe(_^I,12),v=v+_|0,K=Fe(K^v,8),I=I+K|0,_=Fe(_^I,7),$=$+x|0,Z=Fe(Z^$,16),S=S+Z|0,x=Fe(x^S,12),$=$+x|0,Z=Fe(Z^$,8),S=S+Z|0,x=Fe(x^S,7),R=R+z|0,G=Fe(G^R,16),D=D+G|0,z=Fe(z^D,12),R=R+z|0,G=Fe(G^R,8),D=D+G|0,z=Fe(z^D,7),p=p+_|0,G=Fe(G^p,16),S=S+G|0,_=Fe(_^S,12),p=p+_|0,G=Fe(G^p,8),S=S+G|0,_=Fe(_^S,7),v=v+x|0,W=Fe(W^v,16),D=D+W|0,x=Fe(x^D,12),v=v+x|0,W=Fe(W^v,8),D=D+W|0,x=Fe(x^D,7),$=$+z|0,K=Fe(K^$,16),q=q+K|0,z=Fe(z^q,12),$=$+z|0,K=Fe(K^$,8),q=q+K|0,z=Fe(z^q,7),R=R+L|0,Z=Fe(Z^R,16),I=I+Z|0,L=Fe(L^I,12),R=R+L|0,Z=Fe(Z^R,8),I=I+Z|0,L=Fe(L^I,7);let oe=0;r[oe++]=c+p|0,r[oe++]=d+v|0,r[oe++]=f+$|0,r[oe++]=h+R|0,r[oe++]=y+L|0,r[oe++]=m+_|0,r[oe++]=E+x|0,r[oe++]=P+z|0,r[oe++]=B+q|0,r[oe++]=A+I|0,r[oe++]=O+S|0,r[oe++]=M+D|0,r[oe++]=T+W|0,r[oe++]=N+K|0,r[oe++]=l+Z|0,r[oe++]=w+G|0}const Gg=M3(H3,{counterRight:!1,counterLength:4,allowShortKeys:!1});let Zg=class extends dg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,In.hash(t);const r=ts(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return In.exists(this),this.iHash.update(t),this}digestInto(t){In.exists(this),In.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:c,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=c,t.outputLen=d,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Za=(e,t,n)=>new Zg(e,t).update(n).digest();Za.create=(e,t)=>new Zg(e,t);function j3(e,t,n){return In.hash(e),Za(e,ts(n),ts(t))}const Pu=new Uint8Array([0]),Kh=new Uint8Array;function D3(e,t,n,r=32){if(In.hash(e),In.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=Kh);const s=new Uint8Array(o*e.outputLen),c=Za.create(e,t),d=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let h=0;h<o;h++)Pu[0]=h+1,d.update(h===0?Kh:f).update(n).update(Pu).digestInto(f),s.set(f,e.outputLen*h),c._cloneInto(d);return c.destroy(),d.destroy(),f.fill(0),Pu.fill(0),s.slice(0,r)}var q3=Object.defineProperty,st=(e,t)=>{for(var n in t)q3(e,n,{get:t[n],enumerable:!0})},Ko=Symbol("verified"),V3=e=>e instanceof Object;function Yg(e){if(!V3(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var F3={};st(F3,{Queue:()=>Z3,QueueNode:()=>Jg,binarySearch:()=>id,insertEventIntoAscendingList:()=>G3,insertEventIntoDescendingList:()=>K3,normalizeURL:()=>W3,utf8Decoder:()=>Bn,utf8Encoder:()=>mn});var Bn=new TextDecoder("utf-8"),mn=new TextEncoder;function W3(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function K3(e,t){const[n,r]=id(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return r||e.splice(n,0,t),e}function G3(e,t){const[n,r]=id(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function id(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),s=t(e[o]);if(s===0)return[o,!0];s<0?r=o-1:n=o+1}return[n,!1]}var Jg=class{constructor(e){Ce(this,"value");Ce(this,"next",null);Ce(this,"prev",null);this.value=e}},Z3=class{constructor(){Ce(this,"first");Ce(this,"last");this.first=null,this.last=null}enqueue(e){const t=new Jg(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},Y3=class{generateSecretKey(){return Cn.utils.randomPrivateKey()}getPublicKey(e){return wt(Cn.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=wt(Cn.getPublicKey(t)),n.id=Js(n),n.sig=wt(Cn.sign(Js(n),t)),n[Ko]=!0,n}verifyEvent(e){if(typeof e[Ko]=="boolean")return e[Ko];const t=Js(e);if(t!==e.id)return e[Ko]=!1,!1;try{const n=Cn.verify(e.sig,t,e.pubkey);return e[Ko]=n,n}catch{return e[Ko]=!1,!1}}};function J3(e){if(!Yg(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Js(e){let t=Ti(mn.encode(J3(e)));return wt(t)}var Ya=new Y3;Ya.generateSecretKey;Ya.getPublicKey;var oo=Ya.finalizeEvent,sd=Ya.verifyEvent,X3={};st(X3,{Application:()=>X8,BadgeAward:()=>a8,BadgeDefinition:()=>F8,BlockedRelaysList:()=>L8,BookmarkList:()=>x8,Bookmarksets:()=>D8,Calendar:()=>i_,CalendarEventRSVP:()=>s_,ChannelCreation:()=>n0,ChannelHideMessage:()=>i0,ChannelMessage:()=>o0,ChannelMetadata:()=>r0,ChannelMuteUser:()=>s0,ClassifiedListing:()=>t_,ClientAuth:()=>a0,CommunitiesList:()=>T8,CommunityDefinition:()=>u_,CommunityPostApproval:()=>w8,Contacts:()=>r8,CreateOrUpdateProduct:()=>G8,CreateOrUpdateStall:()=>K8,Curationsets:()=>q8,Date:()=>r_,DraftClassifiedListing:()=>n_,DraftLong:()=>Y8,Emojisets:()=>J8,EncryptedDirectMessage:()=>o8,EncryptedDirectMessages:()=>i8,EventDeletion:()=>s8,FileMetadata:()=>l8,FileServerPreference:()=>O8,Followsets:()=>M8,GenericRepost:()=>c8,Genericlists:()=>H8,HTTPAuth:()=>ud,Handlerinformation:()=>c_,Handlerrecommendation:()=>a_,Highlights:()=>k8,InterestsList:()=>B8,Interestsets:()=>W8,JobFeedback:()=>y8,JobRequest:()=>m8,JobResult:()=>b8,Label:()=>g8,LightningPubRPC:()=>R8,LiveChatMessage:()=>d8,LiveEvent:()=>Q8,LongFormArticle:()=>Z8,Metadata:()=>e8,Mutelist:()=>A8,NWCWalletInfo:()=>N8,NWCWalletRequest:()=>c0,NWCWalletResponse:()=>z8,NostrConnect:()=>U8,OpenTimestamps:()=>u8,Pinlist:()=>S8,ProblemTracker:()=>f8,ProfileBadges:()=>V8,PublicChatsList:()=>P8,Reaction:()=>cd,RecommendRelay:()=>n8,RelayList:()=>$8,Relaysets:()=>j8,Report:()=>h8,Reporting:()=>p8,Repost:()=>ad,SearchRelaysList:()=>C8,ShortTextNote:()=>t8,Time:()=>o_,UserEmojiList:()=>I8,UserStatuses:()=>e_,Zap:()=>E8,ZapGoal:()=>v8,ZapRequest:()=>_8,classifyKind:()=>Q3,isEphemeralKind:()=>e0,isParameterizedReplaceableKind:()=>t0,isRegularKind:()=>Xg,isReplaceableKind:()=>Qg});function Xg(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function Qg(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function e0(e){return 2e4<=e&&e<3e4}function t0(e){return 3e4<=e&&e<4e4}function Q3(e){return Xg(e)?"regular":Qg(e)?"replaceable":e0(e)?"ephemeral":t0(e)?"parameterized":"unknown"}var e8=0,t8=1,n8=2,r8=3,o8=4,i8=4,s8=5,ad=6,cd=7,a8=8,c8=16,n0=40,r0=41,o0=42,i0=43,s0=44,u8=1040,l8=1063,d8=1311,f8=1971,h8=1984,p8=1984,g8=1985,w8=4550,m8=5999,b8=6999,y8=7e3,v8=9041,_8=9734,E8=9735,k8=9802,A8=1e4,S8=10001,$8=10002,x8=10003,T8=10004,P8=10005,L8=10006,C8=10007,B8=10015,I8=10030,O8=10096,N8=13194,R8=21e3,a0=22242,c0=23194,z8=23195,U8=24133,ud=27235,M8=3e4,H8=30001,j8=30002,D8=30003,q8=30004,V8=30008,F8=30009,W8=30015,K8=30017,G8=30018,Z8=30023,Y8=30024,J8=30030,X8=30078,Q8=30311,e_=30315,t_=30402,n_=30403,r_=31922,o_=31923,i_=31924,s_=31925,a_=31989,c_=31990,u_=34550,l_={};st(l_,{getHex64:()=>ld,getInt:()=>u0,getSubscriptionId:()=>d_,matchEventId:()=>f_,matchEventKind:()=>p_,matchEventPubkey:()=>h_});function ld(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function u0(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),s=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,s),10)}function d_(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function f_(e,t){return t===ld(e,"id")}function h_(e,t){return t===ld(e,"pubkey")}function p_(e,t){return t===u0(e,"kind")}var g_={};st(g_,{makeAuthEvent:()=>w_});function w_(e,t){return{kind:a0,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}var m_;try{m_=WebSocket}catch{}var b_;try{b_=WebSocket}catch{}var l0={};st(l0,{BECH32_REGEX:()=>d0,Bech32MaxSize:()=>dd,decode:()=>Ja,encodeBytes:()=>Xa,naddrEncode:()=>S_,neventEncode:()=>A_,noteEncode:()=>E_,nprofileEncode:()=>k_,npubEncode:()=>__,nrelayEncode:()=>$_,nsecEncode:()=>v_});var dd=5e3,d0=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function y_(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function Ja(e){var o,s,c,d,f,h,y,m;let{prefix:t,words:n}=Wr.decode(e,dd),r=new Uint8Array(Wr.fromWords(n));switch(t){case"nprofile":{let E=Vs(r);if(!((o=E[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(E[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:wt(E[0][0]),relays:E[1]?E[1].map(P=>Bn.decode(P)):[]}}}case"nevent":{let E=Vs(r);if(!((s=E[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(E[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(E[2]&&E[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(E[3]&&E[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:wt(E[0][0]),relays:E[1]?E[1].map(P=>Bn.decode(P)):[],author:(c=E[2])!=null&&c[0]?wt(E[2][0]):void 0,kind:(d=E[3])!=null&&d[0]?parseInt(wt(E[3][0]),16):void 0}}}case"naddr":{let E=Vs(r);if(!((f=E[0])!=null&&f[0]))throw new Error("missing TLV 0 for naddr");if(!((h=E[2])!=null&&h[0]))throw new Error("missing TLV 2 for naddr");if(E[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((y=E[3])!=null&&y[0]))throw new Error("missing TLV 3 for naddr");if(E[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Bn.decode(E[0][0]),pubkey:wt(E[2][0]),kind:parseInt(wt(E[3][0]),16),relays:E[1]?E[1].map(P=>Bn.decode(P)):[]}}}case"nrelay":{let E=Vs(r);if(!((m=E[0])!=null&&m[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Bn.decode(E[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:wt(r)};default:throw new Error(`unknown prefix ${t}`)}}function Vs(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function v_(e){return Xa("nsec",e)}function __(e){return Xa("npub",Po(e))}function E_(e){return Xa("note",Po(e))}function gs(e,t){let n=Wr.toWords(t);return Wr.encode(e,n,dd)}function Xa(e,t){return gs(e,t)}function k_(e){let t=Qa({0:[Po(e.pubkey)],1:(e.relays||[]).map(n=>mn.encode(n))});return gs("nprofile",t)}function A_(e){let t;e.kind!==void 0&&(t=y_(e.kind));let n=Qa({0:[Po(e.id)],1:(e.relays||[]).map(r=>mn.encode(r)),2:e.author?[Po(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return gs("nevent",n)}function S_(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Qa({0:[mn.encode(e.identifier)],1:(e.relays||[]).map(r=>mn.encode(r)),2:[Po(e.pubkey)],3:[new Uint8Array(t)]});return gs("naddr",n)}function $_(e){let t=Qa({0:[mn.encode(e)]});return gs("nrelay",t)}function Qa(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let s=new Uint8Array(o.length+2);s.set([parseInt(n)],0),s.set([o.length],1),s.set(o,2),t.push(s)})}),ja(...t)}var x_={};st(x_,{decrypt:()=>T_,encrypt:()=>f0});async function f0(e,t,n){const r=e instanceof Uint8Array?wt(e):e,o=xi.getSharedSecret(r,"02"+t),s=h0(o);let c=Uint8Array.from(hg(16)),d=mn.encode(n),f=Vg(s,c).encrypt(d),h=ir.encode(new Uint8Array(f)),y=ir.encode(new Uint8Array(c.buffer));return`${h}?iv=${y}`}async function T_(e,t,n){const r=e instanceof Uint8Array?wt(e):e;let[o,s]=n.split("?iv="),c=xi.getSharedSecret(r,"02"+t),d=h0(c),f=ir.decode(s),h=ir.decode(o),y=Vg(d,f).decrypt(h);return Bn.decode(y)}function h0(e){return e.slice(1,33)}var P_={};st(P_,{NIP05_REGEX:()=>p0,isValid:()=>B_,queryProfile:()=>g0,searchDomain:()=>C_,useFetchImplementation:()=>L_});var p0=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,ec;try{ec=fetch}catch{}function L_(e){ec=e}async function C_(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`;return(await(await ec(n,{redirect:"error"})).json()).names}catch{return{}}}async function g0(e){var s;const t=e.match(p0);if(!t)return null;const[n,r="_",o]=t;try{const c=`https://${o}/.well-known/nostr.json?name=${r}`,d=await(await ec(c,{redirect:"error"})).json();let f=d.names[r];return f?{pubkey:f,relays:(s=d.relays)==null?void 0:s[f]}:null}catch{return null}}async function B_(e,t){let n=await g0(t);return n?n.pubkey===e:!1}var I_={};st(I_,{parse:()=>O_});function O_(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[s,c,d,f]=o,h={id:c,relays:d?[d]:[]},y=r===0,m=r===n.length-1;if(f==="root"){t.root=h;continue}if(f==="reply"){t.reply=h;continue}if(f==="mention"){t.mentions.push(h);continue}if(y){t.root=h;continue}if(m){t.reply=h;continue}t.mentions.push(h)}return t}var N_={};st(N_,{fetchRelayInformation:()=>z_,useFetchImplementation:()=>R_});var w0;try{w0=fetch}catch{}function R_(e){w0=e}async function z_(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var U_={};st(U_,{getPow:()=>m0,minePow:()=>M_});function m0(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(r===0)t+=4;else{t+=Math.clz32(r)-28;break}}return t}function M_(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const s=Math.floor(new Date().getTime()/1e3);if(s!==r.created_at&&(n=0,r.created_at=s),o[1]=(++n).toString(),r.id=Js(r),m0(r.id)>=t)break}return r}var H_={};st(H_,{finishRepostEvent:()=>j_,getRepostedEvent:()=>D_,getRepostedEventPointer:()=>b0});function j_(e,t,n,r){return oo({kind:ad,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},r)}function b0(e){if(e.kind!==ad)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function D_(e,{skipVerification:t}={}){const n=b0(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!sd(r)))return r}var q_={};st(q_,{NOSTR_URI_REGEX:()=>tc,parse:()=>F_,test:()=>V_});var tc=new RegExp(`nostr:(${d0.source})`);function V_(e){return typeof e=="string"&&new RegExp(`^${tc.source}$`).test(e)}function F_(e){const t=e.match(new RegExp(`^${tc.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Ja(t[1])}}var W_={};st(W_,{finishReactionEvent:()=>K_,getReactedEventPointer:()=>G_});function K_(e,t,n){const r=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return oo({...e,kind:cd,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function G_(e){if(e.kind!==cd)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var Z_={};st(Z_,{matchAll:()=>Y_,regex:()=>fd,replaceAll:()=>J_});var fd=()=>new RegExp(`\\b${tc.source}\\b`,"g");function*Y_(e){const t=e.matchAll(fd());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:Ja(o),start:n.index,end:n.index+r.length}}catch{}}function J_(e,t){return e.replaceAll(fd(),(n,r)=>t({uri:n,value:r,decoded:Ja(r)}))}var X_={};st(X_,{channelCreateEvent:()=>Q_,channelHideMessageEvent:()=>nE,channelMessageEvent:()=>tE,channelMetadataEvent:()=>eE,channelMuteUserEvent:()=>rE});var Q_=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:n0,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},eE=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:r0,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},tE=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),oo({kind:o0,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},nE=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:i0,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},rE=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:s0,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},oE={};st(oE,{EMOJI_SHORTCODE_REGEX:()=>y0,matchAll:()=>iE,regex:()=>hd,replaceAll:()=>sE});var y0=/:(\w+):/,hd=()=>new RegExp(`\\B${y0.source}\\B`,"g");function*iE(e){const t=e.matchAll(hd());for(const n of t)try{const[r,o]=n;yield{shortcode:r,name:o,start:n.index,end:n.index+r.length}}catch{}}function sE(e,t){return e.replaceAll(hd(),(n,r)=>t({shortcode:n,name:r}))}var aE={};st(aE,{useFetchImplementation:()=>cE,validateGithub:()=>uE});var pd;try{pd=fetch}catch{}function cE(e){pd=e}async function uE(e,t,n){try{return await(await pd(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var lE={};st(lE,{decrypt:()=>$0,encrypt:()=>S0,getConversationKey:()=>E0,v2:()=>gE});var v0=1,_0=65535;function E0(e,t){const n=xi.getSharedSecret(e,"02"+t).subarray(1,33);return j3(Ti,n,"nip44-v2")}function k0(e,t){const n=D3(Ti,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function gd(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function dE(e){if(!Number.isSafeInteger(e)||e<v0||e>_0)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function fE(e){const t=mn.encode(e),n=t.length,r=dE(n),o=new Uint8Array(gd(n)-n);return ja(r,t,o)}function hE(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<v0||t>_0||n.length!==t||e.length!==2+gd(t))throw new Error("invalid padding");return Bn.decode(n)}function A0(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=ja(n,t);return Za(Ti,e,r)}function pE(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=ir.decode(e)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function S0(e,t,n=hg(32)){const{chacha_key:r,chacha_nonce:o,hmac_key:s}=k0(t,n),c=fE(e),d=Gg(r,o,c),f=A0(s,d,n);return ir.encode(ja(new Uint8Array([2]),n,d,f))}function $0(e,t){const{nonce:n,ciphertext:r,mac:o}=pE(e),{chacha_key:s,chacha_nonce:c,hmac_key:d}=k0(t,n),f=A0(d,r,n);if(!E3(f,o))throw new Error("invalid MAC");const h=Gg(s,c,r);return hE(h)}var gE={utils:{getConversationKey:E0,calcPaddedLen:gd},encrypt:S0,decrypt:$0},wE={};st(wE,{makeNwcRequestEvent:()=>bE,parseConnectionString:()=>mE});function mE(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),s=n.get("secret");if(!r||!o||!s)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:s}}async function bE(e,t,n){const o=await f0(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),s={kind:c0,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return oo(s,t)}var yE={};st(yE,{getZapEndpoint:()=>_E,makeZapReceipt:()=>AE,makeZapRequest:()=>EE,useFetchImplementation:()=>vE,validateZapRequest:()=>kE});var wd;try{wd=fetch}catch{}function vE(e){wd=e}async function _E(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:c}=Wr.decode(n,1e3),d=Wr.fromWords(c);t=Bn.decode(d)}else if(r){let[c,d]=r.split("@");t=new URL(`/.well-known/lnurlp/${c}`,`https://${d}`).toString()}else return null;let s=await(await wd(t)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function EE({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&s.tags.push(["e",t]),s}function kE(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Yg(t))return"Zap request is not a valid Nostr event.";if(!sd(t))return"Invalid signature on zap request.";let n=t.tags.find(([s,c])=>s==="p"&&c);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([s,c])=>s==="e"&&c);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([s,c])=>s==="relays"&&c)?null:"Zap request doesn't have a 'relays' tag."}function AE({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e),s=o.tags.filter(([d])=>d==="e"||d==="p"||d==="a"),c={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&c.tags.push(["preimage",t]),c}var SE={};st(SE,{getToken:()=>$E,hashPayload:()=>md,unpackEventFromToken:()=>T0,validateEvent:()=>O0,validateEventKind:()=>L0,validateEventMethodTag:()=>B0,validateEventPayloadTag:()=>I0,validateEventTimestamp:()=>P0,validateEventUrlTag:()=>C0,validateToken:()=>xE});var x0="Nostr ";async function $E(e,t,n,r=!1,o){const s={kind:ud,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&s.tags.push(["payload",md(o)]);const c=await n(s);return(r?x0:"")+ir.encode(mn.encode(JSON.stringify(c)))}async function xE(e,t,n){const r=await T0(e).catch(s=>{throw s});return await O0(r,t,n).catch(s=>{throw s})}async function T0(e){if(!e)throw new Error("Missing token");e=e.replace(x0,"");const t=Bn.decode(ir.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function P0(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function L0(e){return e.kind===ud}function C0(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}function B0(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function md(e){const t=Ti(mn.encode(JSON.stringify(e)));return wt(t)}function I0(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const r=md(t);return n.length>0&&n[1]===r}async function O0(e,t,n,r){if(!sd(e))throw new Error("Invalid nostr event, signature invalid");if(!L0(e))throw new Error("Invalid nostr event, kind invalid");if(!P0(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!C0(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!B0(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!I0(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R0={exports:{}};(function(e){(function(){function t(l){var w={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(l===!1)return JSON.parse(JSON.stringify(w));var p={};for(var v in w)w.hasOwnProperty(v)&&(p[v]=w[v].defaultValue);return p}function n(){var l=t(!0),w={};for(var p in l)l.hasOwnProperty(p)&&(w[p]=!0);return w}var r={},o={},s={},c=t(!0),d="vanilla",f={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(l,w){return c[l]=w,this},r.getOption=function(l){return c[l]},r.getOptions=function(){return c},r.resetOptions=function(){c=t(!0)},r.setFlavor=function(l){if(!f.hasOwnProperty(l))throw Error(l+" flavor was not found");r.resetOptions();var w=f[l];d=l;for(var p in w)w.hasOwnProperty(p)&&(c[p]=w[p])},r.getFlavor=function(){return d},r.getFlavorOptions=function(l){if(f.hasOwnProperty(l))return f[l]},r.getDefaultOptions=function(l){return t(l)},r.subParser=function(l,w){if(r.helper.isString(l))if(typeof w<"u")o[l]=w;else{if(o.hasOwnProperty(l))return o[l];throw Error("SubParser named "+l+" not registered!")}},r.extension=function(l,w){if(!r.helper.isString(l))throw Error("Extension 'name' must be a string");if(l=r.helper.stdExtName(l),r.helper.isUndefined(w)){if(!s.hasOwnProperty(l))throw Error("Extension named "+l+" is not registered!");return s[l]}else{typeof w=="function"&&(w=w()),r.helper.isArray(w)||(w=[w]);var p=h(w,l);if(p.valid)s[l]=w;else throw Error(p.error)}},r.getAllExtensions=function(){return s},r.removeExtension=function(l){delete s[l]},r.resetExtensions=function(){s={}};function h(l,w){var p=w?"Error in "+w+" extension->":"Error in unnamed extension",v={valid:!0,error:""};r.helper.isArray(l)||(l=[l]);for(var $=0;$<l.length;++$){var R=p+" sub-extension "+$+": ",L=l[$];if(typeof L!="object")return v.valid=!1,v.error=R+"must be an object, but "+typeof L+" given",v;if(!r.helper.isString(L.type))return v.valid=!1,v.error=R+'property "type" must be a string, but '+typeof L.type+" given",v;var _=L.type=L.type.toLowerCase();if(_==="language"&&(_=L.type="lang"),_==="html"&&(_=L.type="output"),_!=="lang"&&_!=="output"&&_!=="listener")return v.valid=!1,v.error=R+"type "+_+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',v;if(_==="listener"){if(r.helper.isUndefined(L.listeners))return v.valid=!1,v.error=R+'. Extensions of type "listener" must have a property called "listeners"',v}else if(r.helper.isUndefined(L.filter)&&r.helper.isUndefined(L.regex))return v.valid=!1,v.error=R+_+' extensions must define either a "regex" property or a "filter" method',v;if(L.listeners){if(typeof L.listeners!="object")return v.valid=!1,v.error=R+'"listeners" property must be an object but '+typeof L.listeners+" given",v;for(var x in L.listeners)if(L.listeners.hasOwnProperty(x)&&typeof L.listeners[x]!="function")return v.valid=!1,v.error=R+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+x+" must be a function but "+typeof L.listeners[x]+" given",v}if(L.filter){if(typeof L.filter!="function")return v.valid=!1,v.error=R+'"filter" must be a function, but '+typeof L.filter+" given",v}else if(L.regex){if(r.helper.isString(L.regex)&&(L.regex=new RegExp(L.regex,"g")),!(L.regex instanceof RegExp))return v.valid=!1,v.error=R+'"regex" property must either be a string or a RegExp object, but '+typeof L.regex+" given",v;if(r.helper.isUndefined(L.replace))return v.valid=!1,v.error=R+'"regex" extensions must implement a replace string or function',v}}return v}r.validateExtension=function(l){var w=h(l,null);return w.valid?!0:(console.warn(w.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(l){return typeof l=="string"||l instanceof String},r.helper.isFunction=function(l){var w={};return l&&w.toString.call(l)==="[object Function]"},r.helper.isArray=function(l){return Array.isArray(l)},r.helper.isUndefined=function(l){return typeof l>"u"},r.helper.forEach=function(l,w){if(r.helper.isUndefined(l))throw new Error("obj param is required");if(r.helper.isUndefined(w))throw new Error("callback param is required");if(!r.helper.isFunction(w))throw new Error("callback param must be a function/closure");if(typeof l.forEach=="function")l.forEach(w);else if(r.helper.isArray(l))for(var p=0;p<l.length;p++)w(l[p],p,l);else if(typeof l=="object")for(var v in l)l.hasOwnProperty(v)&&w(l[v],v,l);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(l){return l.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function y(l,w){var p=w.charCodeAt(0);return"E"+p+"E"}r.helper.escapeCharactersCallback=y,r.helper.escapeCharacters=function(l,w,p){var v="(["+w.replace(/([\[\]\\])/g,"\\$1")+"])";p&&(v="\\\\"+v);var $=new RegExp(v,"g");return l=l.replace($,y),l},r.helper.unescapeHTMLEntities=function(l){return l.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var m=function(l,w,p,v){var $=v||"",R=$.indexOf("g")>-1,L=new RegExp(w+"|"+p,"g"+$.replace(/g/g,"")),_=new RegExp(w,$.replace(/g/g,"")),x=[],z,q,I,S,D;do for(z=0;I=L.exec(l);)if(_.test(I[0]))z++||(q=L.lastIndex,S=q-I[0].length);else if(z&&!--z){D=I.index+I[0].length;var W={left:{start:S,end:q},match:{start:q,end:I.index},right:{start:I.index,end:D},wholeMatch:{start:S,end:D}};if(x.push(W),!R)return x}while(z&&(L.lastIndex=q));return x};r.helper.matchRecursiveRegExp=function(l,w,p,v){for(var $=m(l,w,p,v),R=[],L=0;L<$.length;++L)R.push([l.slice($[L].wholeMatch.start,$[L].wholeMatch.end),l.slice($[L].match.start,$[L].match.end),l.slice($[L].left.start,$[L].left.end),l.slice($[L].right.start,$[L].right.end)]);return R},r.helper.replaceRecursiveRegExp=function(l,w,p,v,$){if(!r.helper.isFunction(w)){var R=w;w=function(){return R}}var L=m(l,p,v,$),_=l,x=L.length;if(x>0){var z=[];L[0].wholeMatch.start!==0&&z.push(l.slice(0,L[0].wholeMatch.start));for(var q=0;q<x;++q)z.push(w(l.slice(L[q].wholeMatch.start,L[q].wholeMatch.end),l.slice(L[q].match.start,L[q].match.end),l.slice(L[q].left.start,L[q].left.end),l.slice(L[q].right.start,L[q].right.end))),q<x-1&&z.push(l.slice(L[q].wholeMatch.end,L[q+1].wholeMatch.start));L[x-1].wholeMatch.end<l.length&&z.push(l.slice(L[x-1].wholeMatch.end)),_=z.join("")}return _},r.helper.regexIndexOf=function(l,w,p){if(!r.helper.isString(l))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(w instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var v=l.substring(p||0).search(w);return v>=0?v+(p||0):v},r.helper.splitAtIndex=function(l,w){if(!r.helper.isString(l))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[l.substring(0,w),l.substring(w)]},r.helper.encodeEmailAddress=function(l){var w=[function(p){return"&#"+p.charCodeAt(0)+";"},function(p){return"&#x"+p.charCodeAt(0).toString(16)+";"},function(p){return p}];return l=l.replace(/./g,function(p){if(p==="@")p=w[Math.floor(Math.random()*2)](p);else{var v=Math.random();p=v>.9?w[2](p):v>.45?w[1](p):w[0](p)}return p}),l},r.helper.padEnd=function(w,p,v){return p=p>>0,v=String(v||" "),w.length>p?String(w):(p=p-w.length,p>v.length&&(v+=v.repeat(p/v.length)),String(w)+v.slice(0,p))},typeof console>"u"&&(console={warn:function(l){alert(l)},log:function(l){alert(l)},error:function(l){throw l}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(l){var w={},p=[],v=[],$={},R=d,L={parsed:{},raw:"",format:""};_();function _(){l=l||{};for(var S in c)c.hasOwnProperty(S)&&(w[S]=c[S]);if(typeof l=="object")for(var D in l)l.hasOwnProperty(D)&&(w[D]=l[D]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof l+" was passed instead.");w.extensions&&r.helper.forEach(w.extensions,x)}function x(S,D){if(D=D||null,r.helper.isString(S))if(S=r.helper.stdExtName(S),D=S,r.extensions[S]){console.warn("DEPRECATION WARNING: "+S+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),z(r.extensions[S],S);return}else if(!r.helper.isUndefined(s[S]))S=s[S];else throw Error('Extension "'+S+'" could not be loaded. It was either not found or is not a valid extension.');typeof S=="function"&&(S=S()),r.helper.isArray(S)||(S=[S]);var W=h(S,D);if(!W.valid)throw Error(W.error);for(var K=0;K<S.length;++K){switch(S[K].type){case"lang":p.push(S[K]);break;case"output":v.push(S[K]);break}if(S[K].hasOwnProperty("listeners"))for(var Z in S[K].listeners)S[K].listeners.hasOwnProperty(Z)&&q(Z,S[K].listeners[Z])}}function z(S,D){typeof S=="function"&&(S=S(new r.Converter)),r.helper.isArray(S)||(S=[S]);var W=h(S,D);if(!W.valid)throw Error(W.error);for(var K=0;K<S.length;++K)switch(S[K].type){case"lang":p.push(S[K]);break;case"output":v.push(S[K]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function q(S,D){if(!r.helper.isString(S))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof S+" given");if(typeof D!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof D+" given");$.hasOwnProperty(S)||($[S]=[]),$[S].push(D)}function I(S){var D=S.match(/^\s*/)[0].length,W=new RegExp("^\\s{0,"+D+"}","gm");return S.replace(W,"")}this._dispatch=function(D,W,K,Z){if($.hasOwnProperty(D))for(var G=0;G<$[D].length;++G){var oe=$[D][G](D,W,this,K,Z);oe&&typeof oe<"u"&&(W=oe)}return W},this.listen=function(S,D){return q(S,D),this},this.makeHtml=function(S){if(!S)return S;var D={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:p,outputModifiers:v,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return S=S.replace(//g,"T"),S=S.replace(/\$/g,"D"),S=S.replace(/\r\n/g,`
`),S=S.replace(/\r/g,`
`),S=S.replace(/\u00A0/g,"&nbsp;"),w.smartIndentationFix&&(S=I(S)),S=`

`+S+`

`,S=r.subParser("detab")(S,w,D),S=S.replace(/^[ \t]+$/mg,""),r.helper.forEach(p,function(W){S=r.subParser("runExtension")(W,S,w,D)}),S=r.subParser("metadata")(S,w,D),S=r.subParser("hashPreCodeTags")(S,w,D),S=r.subParser("githubCodeBlocks")(S,w,D),S=r.subParser("hashHTMLBlocks")(S,w,D),S=r.subParser("hashCodeTags")(S,w,D),S=r.subParser("stripLinkDefinitions")(S,w,D),S=r.subParser("blockGamut")(S,w,D),S=r.subParser("unhashHTMLSpans")(S,w,D),S=r.subParser("unescapeSpecialChars")(S,w,D),S=S.replace(/D/g,"$$"),S=S.replace(/T/g,""),S=r.subParser("completeHTMLDocument")(S,w,D),r.helper.forEach(v,function(W){S=r.subParser("runExtension")(W,S,w,D)}),L=D.metadata,S},this.makeMarkdown=this.makeMd=function(S,D){if(S=S.replace(/\r\n/g,`
`),S=S.replace(/\r/g,`
`),S=S.replace(/>[ \t]+</,">NBSP;<"),!D)if(window&&window.document)D=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var W=D.createElement("div");W.innerHTML=S;var K={preList:be(W)};he(W);for(var Z=W.childNodes,G="",oe=0;oe<Z.length;oe++)G+=r.subParser("makeMarkdown.node")(Z[oe],K);function he(Se){for(var re=0;re<Se.childNodes.length;++re){var ye=Se.childNodes[re];ye.nodeType===3?!/\S/.test(ye.nodeValue)&&!/^[ ]+$/.test(ye.nodeValue)?(Se.removeChild(ye),--re):(ye.nodeValue=ye.nodeValue.split(`
`).join(" "),ye.nodeValue=ye.nodeValue.replace(/(\s)+/g,"$1")):ye.nodeType===1&&he(ye)}}function be(Se){for(var re=Se.querySelectorAll("pre"),ye=[],Be=0;Be<re.length;++Be)if(re[Be].childElementCount===1&&re[Be].firstChild.tagName.toLowerCase()==="code"){var Oe=re[Be].firstChild.innerHTML.trim(),Me=re[Be].firstChild.getAttribute("data-language")||"";if(Me==="")for(var pt=re[Be].firstChild.className.split(" "),We=0;We<pt.length;++We){var se=pt[We].match(/^language-(.+)$/);if(se!==null){Me=se[1];break}}Oe=r.helper.unescapeHTMLEntities(Oe),ye.push(Oe),re[Be].outerHTML='<precode language="'+Me+'" precodenum="'+Be.toString()+'"></precode>'}else ye.push(re[Be].innerHTML),re[Be].innerHTML="",re[Be].setAttribute("prenum",Be.toString());return ye}return G},this.setOption=function(S,D){w[S]=D},this.getOption=function(S){return w[S]},this.getOptions=function(){return w},this.addExtension=function(S,D){D=D||null,x(S,D)},this.useExtension=function(S){x(S)},this.setFlavor=function(S){if(!f.hasOwnProperty(S))throw Error(S+" flavor was not found");var D=f[S];R=S;for(var W in D)D.hasOwnProperty(W)&&(w[W]=D[W])},this.getFlavor=function(){return R},this.removeExtension=function(S){r.helper.isArray(S)||(S=[S]);for(var D=0;D<S.length;++D){for(var W=S[D],K=0;K<p.length;++K)p[K]===W&&p.splice(K,1);for(var Z=0;Z<v.length;++Z)v[Z]===W&&v.splice(Z,1)}},this.getAllExtensions=function(){return{language:p,output:v}},this.getMetadata=function(S){return S?L.raw:L.parsed},this.getMetadataFormat=function(){return L.format},this._setMetadataPair=function(S,D){L.parsed[S]=D},this._setMetadataFormat=function(S){L.format=S},this._setMetadataRaw=function(S){L.raw=S}},r.subParser("anchors",function(l,w,p){l=p.converter._dispatch("anchors.before",l,w,p);var v=function($,R,L,_,x,z,q){if(r.helper.isUndefined(q)&&(q=""),L=L.toLowerCase(),$.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)_="";else if(!_)if(L||(L=R.toLowerCase().replace(/ ?\n/g," ")),_="#"+L,!r.helper.isUndefined(p.gUrls[L]))_=p.gUrls[L],r.helper.isUndefined(p.gTitles[L])||(q=p.gTitles[L]);else return $;_=_.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var I='<a href="'+_+'"';return q!==""&&q!==null&&(q=q.replace(/"/g,"&quot;"),q=q.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),I+=' title="'+q+'"'),w.openLinksInNewWindow&&!/^#/.test(_)&&(I+=' rel="noopener noreferrer" target="E95Eblank"'),I+=">"+R+"</a>",I};return l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,v),l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),l=l.replace(/\[([^\[\]]+)]()()()()()/g,v),w.ghMentions&&(l=l.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function($,R,L,_,x){if(L==="\\")return R+_;if(!r.helper.isString(w.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var z=w.ghMentionsLink.replace(/\{u}/g,x),q="";return w.openLinksInNewWindow&&(q=' rel="noopener noreferrer" target="E95Eblank"'),R+'<a href="'+z+'"'+q+">"+_+"</a>"})),l=p.converter._dispatch("anchors.after",l,w,p),l});var E=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,P=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,B=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,A=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,O=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,M=function(l){return function(w,p,v,$,R,L,_){v=v.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var x=v,z="",q="",I=p||"",S=_||"";return/^www\./i.test(v)&&(v=v.replace(/^www\./i,"http://www.")),l.excludeTrailingPunctuationFromURLs&&L&&(z=L),l.openLinksInNewWindow&&(q=' rel="noopener noreferrer" target="E95Eblank"'),I+'<a href="'+v+'"'+q+">"+x+"</a>"+z+S}},T=function(l,w){return function(p,v,$){var R="mailto:";return v=v||"",$=r.subParser("unescapeSpecialChars")($,l,w),l.encodeEmails?(R=r.helper.encodeEmailAddress(R+$),$=r.helper.encodeEmailAddress($)):R=R+$,v+'<a href="'+R+'">'+$+"</a>"}};r.subParser("autoLinks",function(l,w,p){return l=p.converter._dispatch("autoLinks.before",l,w,p),l=l.replace(B,M(w)),l=l.replace(O,T(w,p)),l=p.converter._dispatch("autoLinks.after",l,w,p),l}),r.subParser("simplifiedAutoLinks",function(l,w,p){return w.simplifiedAutoLink&&(l=p.converter._dispatch("simplifiedAutoLinks.before",l,w,p),w.excludeTrailingPunctuationFromURLs?l=l.replace(P,M(w)):l=l.replace(E,M(w)),l=l.replace(A,T(w,p)),l=p.converter._dispatch("simplifiedAutoLinks.after",l,w,p)),l}),r.subParser("blockGamut",function(l,w,p){return l=p.converter._dispatch("blockGamut.before",l,w,p),l=r.subParser("blockQuotes")(l,w,p),l=r.subParser("headers")(l,w,p),l=r.subParser("horizontalRule")(l,w,p),l=r.subParser("lists")(l,w,p),l=r.subParser("codeBlocks")(l,w,p),l=r.subParser("tables")(l,w,p),l=r.subParser("hashHTMLBlocks")(l,w,p),l=r.subParser("paragraphs")(l,w,p),l=p.converter._dispatch("blockGamut.after",l,w,p),l}),r.subParser("blockQuotes",function(l,w,p){l=p.converter._dispatch("blockQuotes.before",l,w,p),l=l+`

`;var v=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return w.splitAdjacentBlockquotes&&(v=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),l=l.replace(v,function($){return $=$.replace(/^[ \t]*>[ \t]?/gm,""),$=$.replace(/0/g,""),$=$.replace(/^[ \t]+$/gm,""),$=r.subParser("githubCodeBlocks")($,w,p),$=r.subParser("blockGamut")($,w,p),$=$.replace(/(^|\n)/g,"$1  "),$=$.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(R,L){var _=L;return _=_.replace(/^  /mg,"0"),_=_.replace(/0/g,""),_}),r.subParser("hashBlock")(`<blockquote>
`+$+`
</blockquote>`,w,p)}),l=p.converter._dispatch("blockQuotes.after",l,w,p),l}),r.subParser("codeBlocks",function(l,w,p){l=p.converter._dispatch("codeBlocks.before",l,w,p),l+="0";var v=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return l=l.replace(v,function($,R,L){var _=R,x=L,z=`
`;return _=r.subParser("outdent")(_,w,p),_=r.subParser("encodeCode")(_,w,p),_=r.subParser("detab")(_,w,p),_=_.replace(/^\n+/g,""),_=_.replace(/\n+$/g,""),w.omitExtraWLInCodeBlocks&&(z=""),_="<pre><code>"+_+z+"</code></pre>",r.subParser("hashBlock")(_,w,p)+x}),l=l.replace(/0/,""),l=p.converter._dispatch("codeBlocks.after",l,w,p),l}),r.subParser("codeSpans",function(l,w,p){return l=p.converter._dispatch("codeSpans.before",l,w,p),typeof l>"u"&&(l=""),l=l.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(v,$,R,L){var _=L;return _=_.replace(/^([ \t]*)/g,""),_=_.replace(/[ \t]*$/g,""),_=r.subParser("encodeCode")(_,w,p),_=$+"<code>"+_+"</code>",_=r.subParser("hashHTMLSpans")(_,w,p),_}),l=p.converter._dispatch("codeSpans.after",l,w,p),l}),r.subParser("completeHTMLDocument",function(l,w,p){if(!w.completeHTMLDocument)return l;l=p.converter._dispatch("completeHTMLDocument.before",l,w,p);var v="html",$=`<!DOCTYPE HTML>
`,R="",L=`<meta charset="utf-8">
`,_="",x="";typeof p.metadata.parsed.doctype<"u"&&($="<!DOCTYPE "+p.metadata.parsed.doctype+`>
`,v=p.metadata.parsed.doctype.toString().toLowerCase(),(v==="html"||v==="html5")&&(L='<meta charset="utf-8">'));for(var z in p.metadata.parsed)if(p.metadata.parsed.hasOwnProperty(z))switch(z.toLowerCase()){case"doctype":break;case"title":R="<title>"+p.metadata.parsed.title+`</title>
`;break;case"charset":v==="html"||v==="html5"?L='<meta charset="'+p.metadata.parsed.charset+`">
`:L='<meta name="charset" content="'+p.metadata.parsed.charset+`">
`;break;case"language":case"lang":_=' lang="'+p.metadata.parsed[z]+'"',x+='<meta name="'+z+'" content="'+p.metadata.parsed[z]+`">
`;break;default:x+='<meta name="'+z+'" content="'+p.metadata.parsed[z]+`">
`}return l=$+"<html"+_+`>
<head>
`+R+L+x+`</head>
<body>
`+l.trim()+`
</body>
</html>`,l=p.converter._dispatch("completeHTMLDocument.after",l,w,p),l}),r.subParser("detab",function(l,w,p){return l=p.converter._dispatch("detab.before",l,w,p),l=l.replace(/\t(?=\t)/g,"    "),l=l.replace(/\t/g,"AB"),l=l.replace(/B(.+?)A/g,function(v,$){for(var R=$,L=4-R.length%4,_=0;_<L;_++)R+=" ";return R}),l=l.replace(/A/g,"    "),l=l.replace(/B/g,""),l=p.converter._dispatch("detab.after",l,w,p),l}),r.subParser("ellipsis",function(l,w,p){return w.ellipsis&&(l=p.converter._dispatch("ellipsis.before",l,w,p),l=l.replace(/\.\.\./g,""),l=p.converter._dispatch("ellipsis.after",l,w,p)),l}),r.subParser("emoji",function(l,w,p){if(!w.emoji)return l;l=p.converter._dispatch("emoji.before",l,w,p);var v=/:([\S]+?):/g;return l=l.replace(v,function($,R){return r.helper.emojis.hasOwnProperty(R)?r.helper.emojis[R]:$}),l=p.converter._dispatch("emoji.after",l,w,p),l}),r.subParser("encodeAmpsAndAngles",function(l,w,p){return l=p.converter._dispatch("encodeAmpsAndAngles.before",l,w,p),l=l.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),l=l.replace(/<(?![a-z\/?$!])/gi,"&lt;"),l=l.replace(/</g,"&lt;"),l=l.replace(/>/g,"&gt;"),l=p.converter._dispatch("encodeAmpsAndAngles.after",l,w,p),l}),r.subParser("encodeBackslashEscapes",function(l,w,p){return l=p.converter._dispatch("encodeBackslashEscapes.before",l,w,p),l=l.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),l=l.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("encodeBackslashEscapes.after",l,w,p),l}),r.subParser("encodeCode",function(l,w,p){return l=p.converter._dispatch("encodeCode.before",l,w,p),l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("encodeCode.after",l,w,p),l}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(l,w,p){l=p.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",l,w,p);var v=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,$=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return l=l.replace(v,function(R){return R.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),l=l.replace($,function(R){return R.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),l=p.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",l,w,p),l}),r.subParser("githubCodeBlocks",function(l,w,p){return w.ghCodeBlocks?(l=p.converter._dispatch("githubCodeBlocks.before",l,w,p),l+="0",l=l.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(v,$,R,L){var _=w.omitExtraWLInCodeBlocks?"":`
`;return L=r.subParser("encodeCode")(L,w,p),L=r.subParser("detab")(L,w,p),L=L.replace(/^\n+/g,""),L=L.replace(/\n+$/g,""),L="<pre><code"+(R?' class="'+R+" language-"+R+'"':"")+">"+L+_+"</code></pre>",L=r.subParser("hashBlock")(L,w,p),`

G`+(p.ghCodeBlocks.push({text:v,codeblock:L})-1)+`G

`}),l=l.replace(/0/,""),p.converter._dispatch("githubCodeBlocks.after",l,w,p)):l}),r.subParser("hashBlock",function(l,w,p){return l=p.converter._dispatch("hashBlock.before",l,w,p),l=l.replace(/(^\n+|\n+$)/g,""),l=`

K`+(p.gHtmlBlocks.push(l)-1)+`K

`,l=p.converter._dispatch("hashBlock.after",l,w,p),l}),r.subParser("hashCodeTags",function(l,w,p){l=p.converter._dispatch("hashCodeTags.before",l,w,p);var v=function($,R,L,_){var x=L+r.subParser("encodeCode")(R,w,p)+_;return"C"+(p.gHtmlSpans.push(x)-1)+"C"};return l=r.helper.replaceRecursiveRegExp(l,v,"<code\\b[^>]*>","</code>","gim"),l=p.converter._dispatch("hashCodeTags.after",l,w,p),l}),r.subParser("hashElement",function(l,w,p){return function(v,$){var R=$;return R=R.replace(/\n\n/g,`
`),R=R.replace(/^\n/,""),R=R.replace(/\n+$/g,""),R=`

K`+(p.gHtmlBlocks.push(R)-1)+`K

`,R}}),r.subParser("hashHTMLBlocks",function(l,w,p){l=p.converter._dispatch("hashHTMLBlocks.before",l,w,p);var v=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],$=function(S,D,W,K){var Z=S;return W.search(/\bmarkdown\b/)!==-1&&(Z=W+p.converter.makeHtml(D)+K),`

K`+(p.gHtmlBlocks.push(Z)-1)+`K

`};w.backslashEscapesHTMLTags&&(l=l.replace(/\\<(\/?[^>]+?)>/g,function(S,D){return"&lt;"+D+"&gt;"}));for(var R=0;R<v.length;++R)for(var L,_=new RegExp("^ {0,3}(<"+v[R]+"\\b[^>]*>)","im"),x="<"+v[R]+"\\b[^>]*>",z="</"+v[R]+">";(L=r.helper.regexIndexOf(l,_))!==-1;){var q=r.helper.splitAtIndex(l,L),I=r.helper.replaceRecursiveRegExp(q[1],$,x,z,"im");if(I===q[1])break;l=q[0].concat(I)}return l=l.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(l,w,p)),l=r.helper.replaceRecursiveRegExp(l,function(S){return`

K`+(p.gHtmlBlocks.push(S)-1)+`K

`},"^ {0,3}<!--","-->","gm"),l=l.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(l,w,p)),l=p.converter._dispatch("hashHTMLBlocks.after",l,w,p),l}),r.subParser("hashHTMLSpans",function(l,w,p){l=p.converter._dispatch("hashHTMLSpans.before",l,w,p);function v($){return"C"+(p.gHtmlSpans.push($)-1)+"C"}return l=l.replace(/<[^>]+?\/>/gi,function($){return v($)}),l=l.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function($){return v($)}),l=l.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function($){return v($)}),l=l.replace(/<[^>]+?>/gi,function($){return v($)}),l=p.converter._dispatch("hashHTMLSpans.after",l,w,p),l}),r.subParser("unhashHTMLSpans",function(l,w,p){l=p.converter._dispatch("unhashHTMLSpans.before",l,w,p);for(var v=0;v<p.gHtmlSpans.length;++v){for(var $=p.gHtmlSpans[v],R=0;/C(\d+)C/.test($);){var L=RegExp.$1;if($=$.replace("C"+L+"C",p.gHtmlSpans[L]),R===10){console.error("maximum nesting of 10 spans reached!!!");break}++R}l=l.replace("C"+v+"C",$)}return l=p.converter._dispatch("unhashHTMLSpans.after",l,w,p),l}),r.subParser("hashPreCodeTags",function(l,w,p){l=p.converter._dispatch("hashPreCodeTags.before",l,w,p);var v=function($,R,L,_){var x=L+r.subParser("encodeCode")(R,w,p)+_;return`

G`+(p.ghCodeBlocks.push({text:$,codeblock:x})-1)+`G

`};return l=r.helper.replaceRecursiveRegExp(l,v,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),l=p.converter._dispatch("hashPreCodeTags.after",l,w,p),l}),r.subParser("headers",function(l,w,p){l=p.converter._dispatch("headers.before",l,w,p);var v=isNaN(parseInt(w.headerLevelStart))?1:parseInt(w.headerLevelStart),$=w.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,R=w.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;l=l.replace($,function(x,z){var q=r.subParser("spanGamut")(z,w,p),I=w.noHeaderId?"":' id="'+_(z)+'"',S=v,D="<h"+S+I+">"+q+"</h"+S+">";return r.subParser("hashBlock")(D,w,p)}),l=l.replace(R,function(x,z){var q=r.subParser("spanGamut")(z,w,p),I=w.noHeaderId?"":' id="'+_(z)+'"',S=v+1,D="<h"+S+I+">"+q+"</h"+S+">";return r.subParser("hashBlock")(D,w,p)});var L=w.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;l=l.replace(L,function(x,z,q){var I=q;w.customizedHeaderId&&(I=q.replace(/\s?\{([^{]+?)}\s*$/,""));var S=r.subParser("spanGamut")(I,w,p),D=w.noHeaderId?"":' id="'+_(q)+'"',W=v-1+z.length,K="<h"+W+D+">"+S+"</h"+W+">";return r.subParser("hashBlock")(K,w,p)});function _(x){var z,q;if(w.customizedHeaderId){var I=x.match(/\{([^{]+?)}\s*$/);I&&I[1]&&(x=I[1])}return z=x,r.helper.isString(w.prefixHeaderId)?q=w.prefixHeaderId:w.prefixHeaderId===!0?q="section-":q="",w.rawPrefixHeaderId||(z=q+z),w.ghCompatibleHeaderId?z=z.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():w.rawHeaderId?z=z.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():z=z.replace(/[^\w]/g,"").toLowerCase(),w.rawPrefixHeaderId&&(z=q+z),p.hashLinkCounts[z]?z=z+"-"+p.hashLinkCounts[z]++:p.hashLinkCounts[z]=1,z}return l=p.converter._dispatch("headers.after",l,w,p),l}),r.subParser("horizontalRule",function(l,w,p){l=p.converter._dispatch("horizontalRule.before",l,w,p);var v=r.subParser("hashBlock")("<hr />",w,p);return l=l.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,v),l=l.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,v),l=l.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,v),l=p.converter._dispatch("horizontalRule.after",l,w,p),l}),r.subParser("images",function(l,w,p){l=p.converter._dispatch("images.before",l,w,p);var v=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,$=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,R=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,L=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,_=/!\[([^\[\]]+)]()()()()()/g;function x(q,I,S,D,W,K,Z,G){return D=D.replace(/\s/g,""),z(q,I,S,D,W,K,Z,G)}function z(q,I,S,D,W,K,Z,G){var oe=p.gUrls,he=p.gTitles,be=p.gDimensions;if(S=S.toLowerCase(),G||(G=""),q.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(D===""||D===null)if((S===""||S===null)&&(S=I.toLowerCase().replace(/ ?\n/g," ")),D="#"+S,!r.helper.isUndefined(oe[S]))D=oe[S],r.helper.isUndefined(he[S])||(G=he[S]),r.helper.isUndefined(be[S])||(W=be[S].width,K=be[S].height);else return q;I=I.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),D=D.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var Se='<img src="'+D+'" alt="'+I+'"';return G&&r.helper.isString(G)&&(G=G.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),Se+=' title="'+G+'"'),W&&K&&(W=W==="*"?"auto":W,K=K==="*"?"auto":K,Se+=' width="'+W+'"',Se+=' height="'+K+'"'),Se+=" />",Se}return l=l.replace(L,z),l=l.replace(R,x),l=l.replace($,z),l=l.replace(v,z),l=l.replace(_,z),l=p.converter._dispatch("images.after",l,w,p),l}),r.subParser("italicsAndBold",function(l,w,p){l=p.converter._dispatch("italicsAndBold.before",l,w,p);function v($,R,L){return R+$+L}return w.literalMidWordUnderscores?(l=l.replace(/\b___(\S[\s\S]*?)___\b/g,function($,R){return v(R,"<strong><em>","</em></strong>")}),l=l.replace(/\b__(\S[\s\S]*?)__\b/g,function($,R){return v(R,"<strong>","</strong>")}),l=l.replace(/\b_(\S[\s\S]*?)_\b/g,function($,R){return v(R,"<em>","</em>")})):(l=l.replace(/___(\S[\s\S]*?)___/g,function($,R){return/\S$/.test(R)?v(R,"<strong><em>","</em></strong>"):$}),l=l.replace(/__(\S[\s\S]*?)__/g,function($,R){return/\S$/.test(R)?v(R,"<strong>","</strong>"):$}),l=l.replace(/_([^\s_][\s\S]*?)_/g,function($,R){return/\S$/.test(R)?v(R,"<em>","</em>"):$})),w.literalMidWordAsterisks?(l=l.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function($,R,L){return v(L,R+"<strong><em>","</em></strong>")}),l=l.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function($,R,L){return v(L,R+"<strong>","</strong>")}),l=l.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function($,R,L){return v(L,R+"<em>","</em>")})):(l=l.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function($,R){return/\S$/.test(R)?v(R,"<strong><em>","</em></strong>"):$}),l=l.replace(/\*\*(\S[\s\S]*?)\*\*/g,function($,R){return/\S$/.test(R)?v(R,"<strong>","</strong>"):$}),l=l.replace(/\*([^\s*][\s\S]*?)\*/g,function($,R){return/\S$/.test(R)?v(R,"<em>","</em>"):$})),l=p.converter._dispatch("italicsAndBold.after",l,w,p),l}),r.subParser("lists",function(l,w,p){function v(L,_){p.gListLevel++,L=L.replace(/\n{2,}$/,`
`),L+="0";var x=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,z=/\n[ \t]*\n(?!0)/.test(L);return w.disableForced4SpacesIndentedSublists&&(x=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),L=L.replace(x,function(q,I,S,D,W,K,Z){Z=Z&&Z.trim()!=="";var G=r.subParser("outdent")(W,w,p),oe="";return K&&w.tasklists&&(oe=' class="task-list-item" style="list-style-type: none;"',G=G.replace(/^[ \t]*\[(x|X| )?]/m,function(){var he='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return Z&&(he+=" checked"),he+=">",he})),G=G.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(he){return"A"+he}),I||G.search(/\n{2,}/)>-1?(G=r.subParser("githubCodeBlocks")(G,w,p),G=r.subParser("blockGamut")(G,w,p)):(G=r.subParser("lists")(G,w,p),G=G.replace(/\n$/,""),G=r.subParser("hashHTMLBlocks")(G,w,p),G=G.replace(/\n\n+/g,`

`),z?G=r.subParser("paragraphs")(G,w,p):G=r.subParser("spanGamut")(G,w,p)),G=G.replace("A",""),G="<li"+oe+">"+G+`</li>
`,G}),L=L.replace(/0/g,""),p.gListLevel--,_&&(L=L.replace(/\s+$/,"")),L}function $(L,_){if(_==="ol"){var x=L.match(/^ *(\d+)\./);if(x&&x[1]!=="1")return' start="'+x[1]+'"'}return""}function R(L,_,x){var z=w.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,q=w.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,I=_==="ul"?z:q,S="";if(L.search(I)!==-1)(function W(K){var Z=K.search(I),G=$(L,_);Z!==-1?(S+=`

<`+_+G+`>
`+v(K.slice(0,Z),!!x)+"</"+_+`>
`,_=_==="ul"?"ol":"ul",I=_==="ul"?z:q,W(K.slice(Z))):S+=`

<`+_+G+`>
`+v(K,!!x)+"</"+_+`>
`})(L);else{var D=$(L,_);S=`

<`+_+D+`>
`+v(L,!!x)+"</"+_+`>
`}return S}return l=p.converter._dispatch("lists.before",l,w,p),l+="0",p.gListLevel?l=l.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(L,_,x){var z=x.search(/[*+-]/g)>-1?"ul":"ol";return R(_,z,!0)}):l=l.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(L,_,x,z){var q=z.search(/[*+-]/g)>-1?"ul":"ol";return R(x,q,!1)}),l=l.replace(/0/,""),l=p.converter._dispatch("lists.after",l,w,p),l}),r.subParser("metadata",function(l,w,p){if(!w.metadata)return l;l=p.converter._dispatch("metadata.before",l,w,p);function v($){p.metadata.raw=$,$=$.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),$=$.replace(/\n {4}/g," "),$.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(R,L,_){return p.metadata.parsed[L]=_,""})}return l=l.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function($,R,L){return v(L),"M"}),l=l.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function($,R,L){return R&&(p.metadata.format=R),v(L),"M"}),l=l.replace(/M/g,""),l=p.converter._dispatch("metadata.after",l,w,p),l}),r.subParser("outdent",function(l,w,p){return l=p.converter._dispatch("outdent.before",l,w,p),l=l.replace(/^(\t|[ ]{1,4})/gm,"0"),l=l.replace(/0/g,""),l=p.converter._dispatch("outdent.after",l,w,p),l}),r.subParser("paragraphs",function(l,w,p){l=p.converter._dispatch("paragraphs.before",l,w,p),l=l.replace(/^\n+/g,""),l=l.replace(/\n+$/g,"");for(var v=l.split(/\n{2,}/g),$=[],R=v.length,L=0;L<R;L++){var _=v[L];_.search(/(K|G)(\d+)\1/g)>=0?$.push(_):_.search(/\S/)>=0&&(_=r.subParser("spanGamut")(_,w,p),_=_.replace(/^([ \t]*)/g,"<p>"),_+="</p>",$.push(_))}for(R=$.length,L=0;L<R;L++){for(var x="",z=$[L],q=!1;/(K|G)(\d+)\1/.test(z);){var I=RegExp.$1,S=RegExp.$2;I==="K"?x=p.gHtmlBlocks[S]:q?x=r.subParser("encodeCode")(p.ghCodeBlocks[S].text,w,p):x=p.ghCodeBlocks[S].codeblock,x=x.replace(/\$/g,"$$$$"),z=z.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,x),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(z)&&(q=!0)}$[L]=z}return l=$.join(`
`),l=l.replace(/^\n+/g,""),l=l.replace(/\n+$/g,""),p.converter._dispatch("paragraphs.after",l,w,p)}),r.subParser("runExtension",function(l,w,p,v){if(l.filter)w=l.filter(w,v.converter,p);else if(l.regex){var $=l.regex;$ instanceof RegExp||($=new RegExp($,"g")),w=w.replace($,l.replace)}return w}),r.subParser("spanGamut",function(l,w,p){return l=p.converter._dispatch("spanGamut.before",l,w,p),l=r.subParser("codeSpans")(l,w,p),l=r.subParser("escapeSpecialCharsWithinTagAttributes")(l,w,p),l=r.subParser("encodeBackslashEscapes")(l,w,p),l=r.subParser("images")(l,w,p),l=r.subParser("anchors")(l,w,p),l=r.subParser("autoLinks")(l,w,p),l=r.subParser("simplifiedAutoLinks")(l,w,p),l=r.subParser("emoji")(l,w,p),l=r.subParser("underline")(l,w,p),l=r.subParser("italicsAndBold")(l,w,p),l=r.subParser("strikethrough")(l,w,p),l=r.subParser("ellipsis")(l,w,p),l=r.subParser("hashHTMLSpans")(l,w,p),l=r.subParser("encodeAmpsAndAngles")(l,w,p),w.simpleLineBreaks?/\n\nK/.test(l)||(l=l.replace(/\n+/g,`<br />
`)):l=l.replace(/  +\n/g,`<br />
`),l=p.converter._dispatch("spanGamut.after",l,w,p),l}),r.subParser("strikethrough",function(l,w,p){function v($){return w.simplifiedAutoLink&&($=r.subParser("simplifiedAutoLinks")($,w,p)),"<del>"+$+"</del>"}return w.strikethrough&&(l=p.converter._dispatch("strikethrough.before",l,w,p),l=l.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function($,R){return v(R)}),l=p.converter._dispatch("strikethrough.after",l,w,p)),l}),r.subParser("stripLinkDefinitions",function(l,w,p){var v=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,$=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;l+="0";var R=function(L,_,x,z,q,I,S){return _=_.toLowerCase(),l.toLowerCase().split(_).length-1<2?L:(x.match(/^data:.+?\/.+?;base64,/)?p.gUrls[_]=x.replace(/\s/g,""):p.gUrls[_]=r.subParser("encodeAmpsAndAngles")(x,w,p),I?I+S:(S&&(p.gTitles[_]=S.replace(/"|'/g,"&quot;")),w.parseImgDimensions&&z&&q&&(p.gDimensions[_]={width:z,height:q}),""))};return l=l.replace($,R),l=l.replace(v,R),l=l.replace(/0/,""),l}),r.subParser("tables",function(l,w,p){if(!w.tables)return l;var v=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,$=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function R(q){return/^:[ \t]*--*$/.test(q)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(q)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(q)?' style="text-align:center;"':""}function L(q,I){var S="";return q=q.trim(),(w.tablesHeaderId||w.tableHeaderId)&&(S=' id="'+q.replace(/ /g,"_").toLowerCase()+'"'),q=r.subParser("spanGamut")(q,w,p),"<th"+S+I+">"+q+`</th>
`}function _(q,I){var S=r.subParser("spanGamut")(q,w,p);return"<td"+I+">"+S+`</td>
`}function x(q,I){for(var S=`<table>
<thead>
<tr>
`,D=q.length,W=0;W<D;++W)S+=q[W];for(S+=`</tr>
</thead>
<tbody>
`,W=0;W<I.length;++W){S+=`<tr>
`;for(var K=0;K<D;++K)S+=I[W][K];S+=`</tr>
`}return S+=`</tbody>
</table>
`,S}function z(q){var I,S=q.split(`
`);for(I=0;I<S.length;++I)/^ {0,3}\|/.test(S[I])&&(S[I]=S[I].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(S[I])&&(S[I]=S[I].replace(/\|[ \t]*$/,"")),S[I]=r.subParser("codeSpans")(S[I],w,p);var D=S[0].split("|").map(function(Se){return Se.trim()}),W=S[1].split("|").map(function(Se){return Se.trim()}),K=[],Z=[],G=[],oe=[];for(S.shift(),S.shift(),I=0;I<S.length;++I)S[I].trim()!==""&&K.push(S[I].split("|").map(function(Se){return Se.trim()}));if(D.length<W.length)return q;for(I=0;I<W.length;++I)G.push(R(W[I]));for(I=0;I<D.length;++I)r.helper.isUndefined(G[I])&&(G[I]=""),Z.push(L(D[I],G[I]));for(I=0;I<K.length;++I){for(var he=[],be=0;be<Z.length;++be)r.helper.isUndefined(K[I][be]),he.push(_(K[I][be],G[be]));oe.push(he)}return x(Z,oe)}return l=p.converter._dispatch("tables.before",l,w,p),l=l.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),l=l.replace(v,z),l=l.replace($,z),l=p.converter._dispatch("tables.after",l,w,p),l}),r.subParser("underline",function(l,w,p){return w.underline&&(l=p.converter._dispatch("underline.before",l,w,p),w.literalMidWordUnderscores?(l=l.replace(/\b___(\S[\s\S]*?)___\b/g,function(v,$){return"<u>"+$+"</u>"}),l=l.replace(/\b__(\S[\s\S]*?)__\b/g,function(v,$){return"<u>"+$+"</u>"})):(l=l.replace(/___(\S[\s\S]*?)___/g,function(v,$){return/\S$/.test($)?"<u>"+$+"</u>":v}),l=l.replace(/__(\S[\s\S]*?)__/g,function(v,$){return/\S$/.test($)?"<u>"+$+"</u>":v})),l=l.replace(/(_)/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("underline.after",l,w,p)),l}),r.subParser("unescapeSpecialChars",function(l,w,p){return l=p.converter._dispatch("unescapeSpecialChars.before",l,w,p),l=l.replace(/E(\d+)E/g,function(v,$){var R=parseInt($);return String.fromCharCode(R)}),l=p.converter._dispatch("unescapeSpecialChars.after",l,w,p),l}),r.subParser("makeMarkdown.blockquote",function(l,w){var p="";if(l.hasChildNodes())for(var v=l.childNodes,$=v.length,R=0;R<$;++R){var L=r.subParser("makeMarkdown.node")(v[R],w);L!==""&&(p+=L)}return p=p.trim(),p="> "+p.split(`
`).join(`
> `),p}),r.subParser("makeMarkdown.codeBlock",function(l,w){var p=l.getAttribute("language"),v=l.getAttribute("precodenum");return"```"+p+`
`+w.preList[v]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(l){return"`"+l.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(l,w){var p="";if(l.hasChildNodes()){p+="*";for(var v=l.childNodes,$=v.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="*"}return p}),r.subParser("makeMarkdown.header",function(l,w,p){var v=new Array(p+1).join("#"),$="";if(l.hasChildNodes()){$=v+" ";for(var R=l.childNodes,L=R.length,_=0;_<L;++_)$+=r.subParser("makeMarkdown.node")(R[_],w)}return $}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(l){var w="";return l.hasAttribute("src")&&(w+="!["+l.getAttribute("alt")+"](",w+="<"+l.getAttribute("src")+">",l.hasAttribute("width")&&l.hasAttribute("height")&&(w+=" ="+l.getAttribute("width")+"x"+l.getAttribute("height")),l.hasAttribute("title")&&(w+=' "'+l.getAttribute("title")+'"'),w+=")"),w}),r.subParser("makeMarkdown.links",function(l,w){var p="";if(l.hasChildNodes()&&l.hasAttribute("href")){var v=l.childNodes,$=v.length;p="[";for(var R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="](",p+="<"+l.getAttribute("href")+">",l.hasAttribute("title")&&(p+=' "'+l.getAttribute("title")+'"'),p+=")"}return p}),r.subParser("makeMarkdown.list",function(l,w,p){var v="";if(!l.hasChildNodes())return"";for(var $=l.childNodes,R=$.length,L=l.getAttribute("start")||1,_=0;_<R;++_)if(!(typeof $[_].tagName>"u"||$[_].tagName.toLowerCase()!=="li")){var x="";p==="ol"?x=L.toString()+". ":x="- ",v+=x+r.subParser("makeMarkdown.listItem")($[_],w),++L}return v+=`
<!-- -->
`,v.trim()}),r.subParser("makeMarkdown.listItem",function(l,w){for(var p="",v=l.childNodes,$=v.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);return/\n$/.test(p)?p=p.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):p+=`
`,p}),r.subParser("makeMarkdown.node",function(l,w,p){p=p||!1;var v="";if(l.nodeType===3)return r.subParser("makeMarkdown.txt")(l,w);if(l.nodeType===8)return"<!--"+l.data+`-->

`;if(l.nodeType!==1)return"";var $=l.tagName.toLowerCase();switch($){case"h1":p||(v=r.subParser("makeMarkdown.header")(l,w,1)+`

`);break;case"h2":p||(v=r.subParser("makeMarkdown.header")(l,w,2)+`

`);break;case"h3":p||(v=r.subParser("makeMarkdown.header")(l,w,3)+`

`);break;case"h4":p||(v=r.subParser("makeMarkdown.header")(l,w,4)+`

`);break;case"h5":p||(v=r.subParser("makeMarkdown.header")(l,w,5)+`

`);break;case"h6":p||(v=r.subParser("makeMarkdown.header")(l,w,6)+`

`);break;case"p":p||(v=r.subParser("makeMarkdown.paragraph")(l,w)+`

`);break;case"blockquote":p||(v=r.subParser("makeMarkdown.blockquote")(l,w)+`

`);break;case"hr":p||(v=r.subParser("makeMarkdown.hr")(l,w)+`

`);break;case"ol":p||(v=r.subParser("makeMarkdown.list")(l,w,"ol")+`

`);break;case"ul":p||(v=r.subParser("makeMarkdown.list")(l,w,"ul")+`

`);break;case"precode":p||(v=r.subParser("makeMarkdown.codeBlock")(l,w)+`

`);break;case"pre":p||(v=r.subParser("makeMarkdown.pre")(l,w)+`

`);break;case"table":p||(v=r.subParser("makeMarkdown.table")(l,w)+`

`);break;case"code":v=r.subParser("makeMarkdown.codeSpan")(l,w);break;case"em":case"i":v=r.subParser("makeMarkdown.emphasis")(l,w);break;case"strong":case"b":v=r.subParser("makeMarkdown.strong")(l,w);break;case"del":v=r.subParser("makeMarkdown.strikethrough")(l,w);break;case"a":v=r.subParser("makeMarkdown.links")(l,w);break;case"img":v=r.subParser("makeMarkdown.image")(l,w);break;default:v=l.outerHTML+`

`}return v}),r.subParser("makeMarkdown.paragraph",function(l,w){var p="";if(l.hasChildNodes())for(var v=l.childNodes,$=v.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);return p=p.trim(),p}),r.subParser("makeMarkdown.pre",function(l,w){var p=l.getAttribute("prenum");return"<pre>"+w.preList[p]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(l,w){var p="";if(l.hasChildNodes()){p+="~~";for(var v=l.childNodes,$=v.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="~~"}return p}),r.subParser("makeMarkdown.strong",function(l,w){var p="";if(l.hasChildNodes()){p+="**";for(var v=l.childNodes,$=v.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="**"}return p}),r.subParser("makeMarkdown.table",function(l,w){var p="",v=[[],[]],$=l.querySelectorAll("thead>tr>th"),R=l.querySelectorAll("tbody>tr"),L,_;for(L=0;L<$.length;++L){var x=r.subParser("makeMarkdown.tableCell")($[L],w),z="---";if($[L].hasAttribute("style")){var q=$[L].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(q){case"text-align:left;":z=":---";break;case"text-align:right;":z="---:";break;case"text-align:center;":z=":---:";break}}v[0][L]=x.trim(),v[1][L]=z}for(L=0;L<R.length;++L){var I=v.push([])-1,S=R[L].getElementsByTagName("td");for(_=0;_<$.length;++_){var D=" ";typeof S[_]<"u"&&(D=r.subParser("makeMarkdown.tableCell")(S[_],w)),v[I].push(D)}}var W=3;for(L=0;L<v.length;++L)for(_=0;_<v[L].length;++_){var K=v[L][_].length;K>W&&(W=K)}for(L=0;L<v.length;++L){for(_=0;_<v[L].length;++_)L===1?v[L][_].slice(-1)===":"?v[L][_]=r.helper.padEnd(v[L][_].slice(-1),W-1,"-")+":":v[L][_]=r.helper.padEnd(v[L][_],W,"-"):v[L][_]=r.helper.padEnd(v[L][_],W);p+="| "+v[L].join(" | ")+` |
`}return p.trim()}),r.subParser("makeMarkdown.tableCell",function(l,w){var p="";if(!l.hasChildNodes())return"";for(var v=l.childNodes,$=v.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(v[R],w,!0);return p.trim()}),r.subParser("makeMarkdown.txt",function(l){var w=l.nodeValue;return w=w.replace(/ +/g," "),w=w.replace(/NBSP;/g," "),w=r.helper.unescapeHTMLEntities(w),w=w.replace(/([*_~|`])/g,"\\$1"),w=w.replace(/^(\s*)>/g,"\\$1>"),w=w.replace(/^#/gm,"\\#"),w=w.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),w=w.replace(/^( {0,3}\d+)\./gm,"$1\\."),w=w.replace(/^( {0,3})([+-])/gm,"$1\\$2"),w=w.replace(/]([\s]*)\(/g,"\\]$1\\("),w=w.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),w});var N=this;e.exports?e.exports=r:N.showdown=r}).call(N0)})(R0);var PE=R0.exports;const LE=TE(PE);function Gh(e){for(let t of e.tags)if(t[0]==="e"&&(t[3]==="root"||t[3]==="reply"))return!1;return!0}function Xs(e){var r,o,s;let t,n;return e.kind==30023?(t=((r=e==null?void 0:e.tags.find(([c])=>c==="title"))==null?void 0:r[1])||"No title",n=((o=e==null?void 0:e.tags.find(([c])=>c==="summary"))==null?void 0:o[1])||void 0):(t="Note of "+new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(e.created_at*1e3)),n=e.content.slice(0,200)+"..."),{id:e.id,kind:e.kind,created_at:e.created_at,title:t,image:((s=e==null?void 0:e.tags.find(([c])=>c==="image"))==null?void 0:s[1])||void 0,summary:n,content:e.content}}async function z0(e){let t;if(/^(nprofile|npub)/.test(e))try{const{type:r,data:o}=l0.decode(e);r==="npub"?t=o:r==="nprofile"&&(t=o.pubkey)}catch(r){return console.error("Failed to decode npub:",r),null}else if(e.length===64)t=e;else return console.error("Invalid code format"),null;const{relays:n}=qa();return new Promise((r,o)=>{let s=da.subscribeMany(n,[{kinds:[0],authors:[t],limit:1}],{onevent(c){s.close(),r(c)},onerror(c){console.error(`Subscription error: ${c}`),s.close(),o(c)}})})}async function U0(e){if(e==null)return;const t=/nostr:(npub1\w+|nprofile1\w+)/g,r=(e.match(t)||[]).map(async c=>{try{const d=await z0(c.slice(6));if(d){const h=JSON.parse(d.content).name||c.slice(0,24);return{match:c,replacement:`[${h}](${c})`}}else return{match:c,replacement:c}}catch(d){return console.error("Failed to fetch profile:",d),{match:c,replacement:c}}}),o=await Promise.all(r);let s=e;return o.forEach(({match:c,replacement:d})=>{s=s.replace(c,d)}),s}function M0(e){if(e==null)return;const t=/(^|\s|\n|\()(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|\)|$)/gm;e=e.replace(t,(o,s,c)=>(c.slice(0,24),`${s}nostr:${c}`));const n=/(^|\s|\n)nostr:(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|$)/gm;e=e.replace(n,(o,s,c)=>{const d=c.slice(0,24);return`${s}[${d}...](nostr:${c})`});const r=/\(nostr:([a-zA-Z0-9]+)\)/g;return e=e.replace(r,(o,s)=>`(https://njump.me/${s})`),e}function CE(e){if(e==null)return;const t=/\[([^\]]+)\]\(([^)]+)\)/g;return e.replace(t,(r,o)=>o)}function BE(e){if(e==null)return;const t=/\s*(https?:\/\/\S+\.(?:png|jpg|jpeg|gif|bmp))\s*/gi;return e.replace(t,(r,o)=>` ![Image](${o}) `)}function IE(e){if(e==null)return;const t=/\s*(https?:\/\/\S+\.(?:mp4|webm|ogg|mov))(\s*|$)/gi;return e.replace(t,(r,o)=>` <video controls><source src="${o}" type="video/mp4"></video> `)}function OE(e){const t=/\s*(https?:\/\/\S+\.(?:mp3))(\s*|$)/gi;return e.replace(t,(r,o)=>` <audio controls src="${o}"></audio> `)}function NE(e){return e==null?void 0:([{regex:/<<|/g,replacement:"&laquo;"},{regex:/>>|/g,replacement:"&raquo;"},{regex:/\.\.\./g,replacement:"&hellip;"},{regex:/---/g,replacement:"&mdash;"},{regex:/--/g,replacement:"&mdash;"}].forEach(({regex:n,replacement:r})=>{e=e.replace(n,r)}),e)}async function H0(e){let t=e.content;return t=await U0(t),t=M0(t),t=BE(t),t=IE(t),t=OE(t),t=NE(t),e.kind==1&&(t=t.replace(/\n/g,`
<br/>`)),t=t.replace("# "+e.title,""),t=new LE.Converter({simplifiedAutoLink:!0,tables:!0,strikethrough:!0}).makeHtml(t),t}function Gr(e,t=!1){const n=new Date(e*1e3),r={day:"2-digit",month:"long",year:"numeric"},o=new Intl.DateTimeFormat("en-US",r).formatToParts(n);let s,c,d;o.forEach(h=>{h.type==="day"&&(s=h.value),h.type==="month"&&(c=h.value),h.type==="year"&&(d=h.value)});let f=`${s} ${c} ${d}`;if(t){const h={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},m=new Intl.DateTimeFormat("en-US",h).format(n);f+=` - ${m}`}return f}const fa=Jv("");function gi(...e){return e.filter(Boolean).join(" ")}function RE(e,t){if(e){const n=Object.keys(e);for(let r=0;r<n.length;r++){const o=n[r];if(o!=="__proto__"&&t(e[o],o)===!1)break}}return e}function Zh(e){var n;const t=(n=e.Components.Elements)==null?void 0:n.list.children;return t&&Array.prototype.slice.call(t)||[]}function ha(e){return e!==null&&typeof e=="object"}function hl(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((n,r)=>!hl(n,t[r]));if(ha(e)&&ha(t)){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some(o=>!Object.prototype.hasOwnProperty.call(t,o)||!hl(e[o],t[o]))}return e===t}function zE(e,t){return e.length===t.length&&!e.some((n,r)=>n!==t[r])}function pl(e,t){const n=e;return RE(t,(r,o)=>{Array.isArray(r)?n[o]=r.slice():ha(r)?n[o]=pl(ha(n[o])?n[o]:{},r):n[o]=r}),n}function UE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ME(e,t,n){return t&&UE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var Yh="(prefers-reduced-motion: reduce)",ni=1,HE=2,wi=3,Pi=4,ws=5,Qs=6,pa=7,jE={CREATED:ni,MOUNTED:HE,IDLE:wi,MOVING:Pi,SCROLLING:ws,DRAGGING:Qs,DESTROYED:pa};function sr(e){e.length=0}function io(e,t,n){return Array.prototype.slice.call(e,t,n)}function Qe(e){return e.bind.apply(e,[null].concat(io(arguments,1)))}var j0=setTimeout,gl=function(){};function Jh(e){return requestAnimationFrame(e)}function nc(e,t){return typeof t===e}function rs(e){return!yd(e)&&nc("object",e)}var bd=Array.isArray,D0=Qe(nc,"function"),Zr=Qe(nc,"string"),ms=Qe(nc,"undefined");function yd(e){return e===null}function q0(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function bs(e){return bd(e)?e:[e]}function dn(e,t){bs(e).forEach(t)}function vd(e,t){return e.indexOf(t)>-1}function ea(e,t){return e.push.apply(e,bs(t)),e}function tr(e,t,n){e&&dn(t,function(r){r&&e.classList[n?"add":"remove"](r)})}function zn(e,t){tr(e,Zr(t)?t.split(" "):t,!0)}function ys(e,t){dn(t,e.appendChild.bind(e))}function _d(e,t){dn(e,function(n){var r=(t||n).parentNode;r&&r.insertBefore(n,t)})}function os(e,t){return q0(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function V0(e,t){var n=e?io(e.children):[];return t?n.filter(function(r){return os(r,t)}):n}function vs(e,t){return t?V0(e,t)[0]:e.firstElementChild}var is=Object.keys;function To(e,t,n){return e&&(n?is(e).reverse():is(e)).forEach(function(r){r!=="__proto__"&&t(e[r],r)}),e}function ss(e){return io(arguments,1).forEach(function(t){To(t,function(n,r){e[r]=t[r]})}),e}function jr(e){return io(arguments,1).forEach(function(t){To(t,function(n,r){bd(n)?e[r]=n.slice():rs(n)?e[r]=jr({},rs(e[r])?e[r]:{},n):e[r]=n})}),e}function Xh(e,t){dn(t||is(e),function(n){delete e[n]})}function Un(e,t){dn(e,function(n){dn(t,function(r){n&&n.removeAttribute(r)})})}function Ue(e,t,n){rs(t)?To(t,function(r,o){Ue(e,o,r)}):dn(e,function(r){yd(n)||n===""?Un(r,t):r.setAttribute(t,String(n))})}function oi(e,t,n){var r=document.createElement(e);return t&&(Zr(t)?zn(r,t):Ue(r,t)),n&&ys(n,r),r}function hn(e,t,n){if(ms(n))return getComputedStyle(e)[t];yd(n)||(e.style[t]=""+n)}function as(e,t){hn(e,"display",t)}function F0(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function gn(e,t){return e.getAttribute(t)}function Qh(e,t){return e&&e.classList.contains(t)}function sn(e){return e.getBoundingClientRect()}function Co(e){dn(e,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function W0(e){return vs(new DOMParser().parseFromString(e,"text/html").body)}function Jn(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function K0(e,t){return e&&e.querySelector(t)}function Ed(e,t){return t?io(e.querySelectorAll(t)):[]}function nr(e,t){tr(e,t,!1)}function wl(e){return e.timeStamp}function yo(e){return Zr(e)?e:e?e+"px":""}var _s="splide",kd="data-"+_s;function Yi(e,t){if(!e)throw new Error("["+_s+"] "+(t||""))}var Yr=Math.min,ga=Math.max,wa=Math.floor,cs=Math.ceil,qt=Math.abs;function G0(e,t,n){return qt(e-t)<n}function ta(e,t,n,r){var o=Yr(t,n),s=ga(t,n);return r?o<e&&e<s:o<=e&&e<=s}function Xo(e,t,n){var r=Yr(t,n),o=ga(t,n);return Yr(ga(r,e),o)}function ml(e){return+(e>0)-+(e<0)}function bl(e,t){return dn(t,function(n){e=e.replace("%s",""+n)}),e}function Ad(e){return e<10?"0"+e:""+e}var ep={};function DE(e){return""+e+Ad(ep[e]=(ep[e]||0)+1)}function Z0(){var e=[];function t(c,d,f,h){o(c,d,function(y,m,E){var P="addEventListener"in y,B=P?y.removeEventListener.bind(y,m,f,h):y.removeListener.bind(y,f);P?y.addEventListener(m,f,h):y.addListener(f),e.push([y,m,E,f,B])})}function n(c,d,f){o(c,d,function(h,y,m){e=e.filter(function(E){return E[0]===h&&E[1]===y&&E[2]===m&&(!f||E[3]===f)?(E[4](),!1):!0})})}function r(c,d,f){var h,y=!0;return typeof CustomEvent=="function"?h=new CustomEvent(d,{bubbles:y,detail:f}):(h=document.createEvent("CustomEvent"),h.initCustomEvent(d,y,!1,f)),c.dispatchEvent(h),h}function o(c,d,f){dn(c,function(h){h&&dn(d,function(y){y.split(" ").forEach(function(m){var E=m.split(".");f(h,E[0],E[1])})})})}function s(){e.forEach(function(c){c[4]()}),sr(e)}return{bind:t,unbind:n,dispatch:r,destroy:s}}var so="mounted",tp="ready",Mn="move",Bo="moved",ma="click",yl="active",vl="inactive",_l="visible",El="hidden",ft="refresh",Ot="updated",mi="resize",rc="resized",Y0="drag",J0="dragging",X0="dragged",oc="scroll",zo="scrolled",qE="overflow",Sd="destroy",kl="arrows:mounted",Al="arrows:updated",Sl="pagination:mounted",$l="pagination:updated",ba="navigation:mounted",$d="autoplay:play",xl="autoplay:playing",xd="autoplay:pause",ya="lazyload:loaded",Q0="sk",ew="sh",va="ei";function tt(e){var t=e?e.event.bus:document.createDocumentFragment(),n=Z0();function r(s,c){n.bind(t,bs(s).join(" "),function(d){c.apply(c,bd(d.detail)?d.detail:[])})}function o(s){n.dispatch(t,s,io(arguments,1))}return e&&e.event.on(Sd,n.destroy),ss(n,{bus:t,on:r,off:Qe(n.unbind,t),emit:o})}function ic(e,t,n,r){var o=Date.now,s,c=0,d,f=!0,h=0;function y(){if(!f){if(c=e?Yr((o()-s)/e,1):1,n&&n(c),c>=1&&(t(),s=o(),r&&++h>=r))return E();d=Jh(y)}}function m(M){M||B(),s=o()-(M?c*e:0),f=!1,d=Jh(y)}function E(){f=!0}function P(){s=o(),c=0,n&&n(c)}function B(){d&&cancelAnimationFrame(d),c=0,d=0,f=!0}function A(M){e=M}function O(){return f}return{start:m,rewind:P,pause:E,cancel:B,set:A,isPaused:O}}function VE(e){var t=e;function n(o){t=o}function r(o){return vd(bs(o),t)}return{set:n,is:r}}function FE(e,t){var n=ic(0,e,null,1);return function(){n.isPaused()&&n.start()}}function WE(e,t,n){var r=e.state,o=n.breakpoints||{},s=n.reducedMotion||{},c=Z0(),d=[];function f(){var B=n.mediaQuery==="min";is(o).sort(function(A,O){return B?+A-+O:+O-+A}).forEach(function(A){y(o[A],"("+(B?"min":"max")+"-width:"+A+"px)")}),y(s,Yh),m()}function h(B){B&&c.destroy()}function y(B,A){var O=matchMedia(A);c.bind(O,"change",m),d.push([B,O])}function m(){var B=r.is(pa),A=n.direction,O=d.reduce(function(M,T){return jr(M,T[1].matches?T[0]:{})},{});Xh(n),P(O),n.destroy?e.destroy(n.destroy==="completely"):B?(h(!0),e.mount()):A!==n.direction&&e.refresh()}function E(B){matchMedia(Yh).matches&&(B?jr(n,s):Xh(n,is(s)))}function P(B,A,O){jr(n,B),A&&jr(Object.getPrototypeOf(n),B),(O||!r.is(ni))&&e.emit(Ot,n)}return{setup:f,destroy:h,reduce:E,set:P}}var sc="Arrow",ac=sc+"Left",cc=sc+"Right",tw=sc+"Up",nw=sc+"Down",np="rtl",uc="ttb",Lu={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[tw,cc],ArrowRight:[nw,ac]};function KE(e,t,n){function r(s,c,d){d=d||n.direction;var f=d===np&&!c?1:d===uc?0:-1;return Lu[s]&&Lu[s][f]||s.replace(/width|left|right/i,function(h,y){var m=Lu[h.toLowerCase()][f]||h;return y>0?m.charAt(0).toUpperCase()+m.slice(1):m})}function o(s){return s*(n.direction===np?1:-1)}return{resolve:r,orient:o}}var rr="role",ii="tabindex",GE="disabled",vn="aria-",Es=vn+"controls",rw=vn+"current",rp=vn+"selected",ln=vn+"label",Td=vn+"labelledby",ow=vn+"hidden",Pd=vn+"orientation",us=vn+"roledescription",op=vn+"live",ip=vn+"busy",sp=vn+"atomic",Ld=[rr,ii,GE,Es,rw,ln,Td,ow,Pd,us],qn=_s+"__",ao="is-",Cu=_s,ap=qn+"track",ZE=qn+"list",lc=qn+"slide",iw=lc+"--clone",YE=lc+"__container",Cd=qn+"arrows",dc=qn+"arrow",sw=dc+"--prev",aw=dc+"--next",fc=qn+"pagination",cw=fc+"__page",JE=qn+"progress",XE=JE+"__bar",QE=qn+"toggle",e4=qn+"spinner",t4=qn+"sr",n4=ao+"initialized",Io=ao+"active",uw=ao+"prev",lw=ao+"next",Tl=ao+"visible",Pl=ao+"loading",dw=ao+"focus-in",fw=ao+"overflow",r4=[Io,Tl,uw,lw,Pl,dw,fw],o4={slide:lc,clone:iw,arrows:Cd,arrow:dc,prev:sw,next:aw,pagination:fc,page:cw,spinner:e4};function i4(e,t){if(D0(e.closest))return e.closest(t);for(var n=e;n&&n.nodeType===1&&!os(n,t);)n=n.parentElement;return n}var s4=5,cp=200,hw="touchstart mousedown",Bu="touchmove mousemove",Iu="touchend touchcancel mouseup click";function a4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=e.root,d=n.i18n,f={},h=[],y=[],m=[],E,P,B;function A(){N(),l(),T()}function O(){o(ft,M),o(ft,A),o(Ot,T),s(document,hw+" keydown",function(v){B=v.type==="keydown"},{capture:!0}),s(c,"focusin",function(){tr(c,dw,!!B)})}function M(v){var $=Ld.concat("style");sr(h),nr(c,y),nr(E,m),Un([E,P],$),Un(c,v?$:["style",us])}function T(){nr(c,y),nr(E,m),y=p(Cu),m=p(ap),zn(c,y),zn(E,m),Ue(c,ln,n.label),Ue(c,Td,n.labelledby)}function N(){E=w("."+ap),P=vs(E,"."+ZE),Yi(E&&P,"A track/list element is missing."),ea(h,V0(P,"."+lc+":not(."+iw+")")),To({arrows:Cd,pagination:fc,prev:sw,next:aw,bar:XE,toggle:QE},function(v,$){f[$]=w("."+v)}),ss(f,{root:c,track:E,list:P,slides:h})}function l(){var v=c.id||DE(_s),$=n.role;c.id=v,E.id=E.id||v+"-track",P.id=P.id||v+"-list",!gn(c,rr)&&c.tagName!=="SECTION"&&$&&Ue(c,rr,$),Ue(c,us,d.carousel),Ue(P,rr,"presentation")}function w(v){var $=K0(c,v);return $&&i4($,"."+Cu)===c?$:void 0}function p(v){return[v+"--"+n.type,v+"--"+n.direction,n.drag&&v+"--draggable",n.isNavigation&&v+"--nav",v===Cu&&Io]}return ss(f,{setup:A,mount:O,destroy:M})}var bi="slide",Li="loop",ks="fade";function c4(e,t,n,r){var o=tt(e),s=o.on,c=o.emit,d=o.bind,f=e.Components,h=e.root,y=e.options,m=y.isNavigation,E=y.updateOnMove,P=y.i18n,B=y.pagination,A=y.slideFocus,O=f.Direction.resolve,M=gn(r,"style"),T=gn(r,ln),N=n>-1,l=vs(r,"."+YE),w;function p(){N||(r.id=h.id+"-slide"+Ad(t+1),Ue(r,rr,B?"tabpanel":"group"),Ue(r,us,P.slide),Ue(r,ln,T||bl(P.slideLabel,[t+1,e.length]))),v()}function v(){d(r,"click",Qe(c,ma,W)),d(r,"keydown",Qe(c,Q0,W)),s([Bo,ew,zo],_),s(ba,R),E&&s(Mn,L)}function $(){w=!0,o.destroy(),nr(r,r4),Un(r,Ld),Ue(r,"style",M),Ue(r,ln,T||"")}function R(){var K=e.splides.map(function(Z){var G=Z.splide.Components.Slides.getAt(t);return G?G.slide.id:""}).join(" ");Ue(r,ln,bl(P.slideX,(N?n:t)+1)),Ue(r,Es,K),Ue(r,rr,A?"button":""),A&&Un(r,us)}function L(){w||_()}function _(){if(!w){var K=e.index;x(),z(),tr(r,uw,t===K-1),tr(r,lw,t===K+1)}}function x(){var K=I();K!==Qh(r,Io)&&(tr(r,Io,K),Ue(r,rw,m&&K||""),c(K?yl:vl,W))}function z(){var K=S(),Z=!K&&(!I()||N);if(e.state.is([Pi,ws])||Ue(r,ow,Z||""),Ue(Ed(r,y.focusableNodes||""),ii,Z?-1:""),A&&Ue(r,ii,Z?-1:0),K!==Qh(r,Tl)&&(tr(r,Tl,K),c(K?_l:El,W)),!K&&document.activeElement===r){var G=f.Slides.getAt(e.index);G&&F0(G.slide)}}function q(K,Z,G){hn(G&&l||r,K,Z)}function I(){var K=e.index;return K===t||y.cloneStatus&&K===n}function S(){if(e.is(ks))return I();var K=sn(f.Elements.track),Z=sn(r),G=O("left",!0),oe=O("right",!0);return wa(K[G])<=cs(Z[G])&&wa(Z[oe])<=cs(K[oe])}function D(K,Z){var G=qt(K-t);return!N&&(y.rewind||e.is(Li))&&(G=Yr(G,e.length-G)),G<=Z}var W={index:t,slideIndex:n,slide:r,container:l,isClone:N,mount:p,destroy:$,update:_,style:q,isWithin:D};return W}function u4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=r.bind,d=t.Elements,f=d.slides,h=d.list,y=[];function m(){E(),o(ft,P),o(ft,E)}function E(){f.forEach(function(_,x){A(_,x,-1)})}function P(){w(function(_){_.destroy()}),sr(y)}function B(){w(function(_){_.update()})}function A(_,x,z){var q=c4(e,x,z,_);q.mount(),y.push(q),y.sort(function(I,S){return I.index-S.index})}function O(_){return _?p(function(x){return!x.isClone}):y}function M(_){var x=t.Controller,z=x.toIndex(_),q=x.hasFocus()?1:n.perPage;return p(function(I){return ta(I.index,z,z+q-1)})}function T(_){return p(_)[0]}function N(_,x){dn(_,function(z){if(Zr(z)&&(z=W0(z)),q0(z)){var q=f[x];q?_d(z,q):ys(h,z),zn(z,n.classes.slide),$(z,Qe(s,mi))}}),s(ft)}function l(_){Co(p(_).map(function(x){return x.slide})),s(ft)}function w(_,x){O(x).forEach(_)}function p(_){return y.filter(D0(_)?_:function(x){return Zr(_)?os(x.slide,_):vd(bs(_),x.index)})}function v(_,x,z){w(function(q){q.style(_,x,z)})}function $(_,x){var z=Ed(_,"img"),q=z.length;q?z.forEach(function(I){c(I,"load error",function(){--q||x()})}):x()}function R(_){return _?f.length:y.length}function L(){return y.length>n.perPage}return{mount:m,destroy:P,update:B,register:A,get:O,getIn:M,getAt:T,add:N,remove:l,forEach:w,filter:p,style:v,getLength:R,isEnough:L}}function l4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.emit,d=t.Slides,f=t.Direction.resolve,h=t.Elements,y=h.root,m=h.track,E=h.list,P=d.getAt,B=d.style,A,O,M;function T(){N(),s(window,"resize load",FE(Qe(c,mi))),o([Ot,ft],N),o(mi,l)}function N(){A=n.direction===uc,hn(y,"maxWidth",yo(n.width)),hn(m,f("paddingLeft"),w(!1)),hn(m,f("paddingRight"),w(!0)),l(!0)}function l(W){var K=sn(y);(W||O.width!==K.width||O.height!==K.height)&&(hn(m,"height",p()),B(f("marginRight"),yo(n.gap)),B("width",$()),B("height",R(),!0),O=K,c(rc),M!==(M=D())&&(tr(y,fw,M),c(qE,M)))}function w(W){var K=n.padding,Z=f(W?"right":"left");return K&&yo(K[Z]||(rs(K)?0:K))||"0px"}function p(){var W="";return A&&(W=v(),Yi(W,"height or heightRatio is missing."),W="calc("+W+" - "+w(!1)+" - "+w(!0)+")"),W}function v(){return yo(n.height||sn(E).width*n.heightRatio)}function $(){return n.autoWidth?null:yo(n.fixedWidth)||(A?"":L())}function R(){return yo(n.fixedHeight)||(A?n.autoHeight?null:L():v())}function L(){var W=yo(n.gap);return"calc((100%"+(W&&" + "+W)+")/"+(n.perPage||1)+(W&&" - "+W)+")"}function _(){return sn(E)[f("width")]}function x(W,K){var Z=P(W||0);return Z?sn(Z.slide)[f("width")]+(K?0:I()):0}function z(W,K){var Z=P(W);if(Z){var G=sn(Z.slide)[f("right")],oe=sn(E)[f("left")];return qt(G-oe)+(K?0:I())}return 0}function q(W){return z(e.length-1)-z(0)+x(0,W)}function I(){var W=P(0);return W&&parseFloat(hn(W.slide,f("marginRight")))||0}function S(W){return parseFloat(hn(m,f("padding"+(W?"Right":"Left"))))||0}function D(){return e.is(ks)||q(!0)>_()}return{mount:T,resize:l,listSize:_,slideSize:x,sliderSize:q,totalSize:z,getPadding:S,isOverflow:D}}var d4=2;function f4(e,t,n){var r=tt(e),o=r.on,s=t.Elements,c=t.Slides,d=t.Direction.resolve,f=[],h;function y(){o(ft,m),o([Ot,mi],P),(h=O())&&(B(h),t.Layout.resize(!0))}function m(){E(),y()}function E(){Co(f),sr(f),r.destroy()}function P(){var M=O();h!==M&&(h<M||!M)&&r.emit(ft)}function B(M){var T=c.get().slice(),N=T.length;if(N){for(;T.length<M;)ea(T,T);ea(T.slice(-M),T.slice(0,M)).forEach(function(l,w){var p=w<M,v=A(l.slide,w);p?_d(v,T[0].slide):ys(s.list,v),ea(f,v),c.register(v,w-M+(p?0:N),l.index)})}}function A(M,T){var N=M.cloneNode(!0);return zn(N,n.classes.clone),N.id=e.root.id+"-clone"+Ad(T+1),N}function O(){var M=n.clones;if(!e.is(Li))M=0;else if(ms(M)){var T=n[d("fixedWidth")]&&t.Layout.slideSize(0),N=T&&cs(sn(s.track)[d("width")]/T);M=N||n[d("autoWidth")]&&e.length||n.perPage*d4}return M}return{mount:y,destroy:E}}function h4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=e.state.set,d=t.Layout,f=d.slideSize,h=d.getPadding,y=d.totalSize,m=d.listSize,E=d.sliderSize,P=t.Direction,B=P.resolve,A=P.orient,O=t.Elements,M=O.list,T=O.track,N;function l(){N=t.Transition,o([so,rc,Ot,ft],w)}function w(){t.Controller.isBusy()||(t.Scroll.cancel(),v(e.index),t.Slides.update())}function p(Z,G,oe,he){Z!==G&&W(Z>oe)&&(_(),$(L(q(),Z>oe),!0)),c(Pi),s(Mn,G,oe,Z),N.start(G,function(){c(wi),s(Bo,G,oe,Z),he&&he()})}function v(Z){$(z(Z,!0))}function $(Z,G){if(!e.is(ks)){var oe=G?Z:R(Z);hn(M,"transform","translate"+B("X")+"("+oe+"px)"),Z!==oe&&s(ew)}}function R(Z){if(e.is(Li)){var G=x(Z),oe=G>t.Controller.getEnd(),he=G<0;(he||oe)&&(Z=L(Z,oe))}return Z}function L(Z,G){var oe=Z-D(G),he=E();return Z-=A(he*(cs(qt(oe)/he)||1))*(G?1:-1),Z}function _(){$(q(),!0),N.cancel()}function x(Z){for(var G=t.Slides.get(),oe=0,he=1/0,be=0;be<G.length;be++){var Se=G[be].index,re=qt(z(Se,!0)-Z);if(re<=he)he=re,oe=Se;else break}return oe}function z(Z,G){var oe=A(y(Z-1)-S(Z));return G?I(oe):oe}function q(){var Z=B("left");return sn(M)[Z]-sn(T)[Z]+A(h(!1))}function I(Z){return n.trimSpace&&e.is(bi)&&(Z=Xo(Z,0,A(E(!0)-m()))),Z}function S(Z){var G=n.focus;return G==="center"?(m()-f(Z,!0))/2:+G*f(Z)||0}function D(Z){return z(Z?t.Controller.getEnd():0,!!n.trimSpace)}function W(Z){var G=A(L(q(),Z));return Z?G>=0:G<=M[B("scrollWidth")]-sn(T)[B("width")]}function K(Z,G){G=ms(G)?q():G;var oe=Z!==!0&&A(G)<A(D(!1)),he=Z!==!1&&A(G)>A(D(!0));return oe||he}return{mount:l,move:p,jump:v,translate:$,shift:L,cancel:_,toIndex:x,toPosition:z,getPosition:q,getLimit:D,exceededLimit:K,reposition:w}}function p4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=t.Move,d=c.getPosition,f=c.getLimit,h=c.toPosition,y=t.Slides,m=y.isEnough,E=y.getLength,P=n.omitEnd,B=e.is(Li),A=e.is(bi),O=Qe(q,!1),M=Qe(q,!0),T=n.start||0,N,l=T,w,p,v;function $(){R(),o([Ot,ft,va],R),o(rc,L)}function R(){w=E(!0),p=n.perMove,v=n.perPage,N=W();var re=Xo(T,0,P?N:w-1);re!==T&&(T=re,c.reposition())}function L(){N!==W()&&s(va)}function _(re,ye,Be){if(!Se()){var Oe=z(re),Me=D(Oe);Me>-1&&(ye||Me!==T)&&(oe(Me),c.move(Oe,Me,l,Be))}}function x(re,ye,Be,Oe){t.Scroll.scroll(re,ye,Be,function(){var Me=D(c.toIndex(d()));oe(P?Yr(Me,N):Me),Oe&&Oe()})}function z(re){var ye=T;if(Zr(re)){var Be=re.match(/([+\-<>])(\d+)?/)||[],Oe=Be[1],Me=Be[2];Oe==="+"||Oe==="-"?ye=I(T+ +(""+Oe+(+Me||1)),T):Oe===">"?ye=Me?K(+Me):O(!0):Oe==="<"&&(ye=M(!0))}else ye=B?re:Xo(re,0,N);return ye}function q(re,ye){var Be=p||(be()?1:v),Oe=I(T+Be*(re?-1:1),T,!(p||be()));return Oe===-1&&A&&!G0(d(),f(!re),1)?re?0:N:ye?Oe:D(Oe)}function I(re,ye,Be){if(m()||be()){var Oe=S(re);Oe!==re&&(ye=re,re=Oe,Be=!1),re<0||re>N?!p&&(ta(0,re,ye,!0)||ta(N,ye,re,!0))?re=K(Z(re)):B?re=Be?re<0?-(w%v||v):w:re:n.rewind?re=re<0?N:0:re=-1:Be&&re!==ye&&(re=K(Z(ye)+(re<ye?-1:1)))}else re=-1;return re}function S(re){if(A&&n.trimSpace==="move"&&re!==T)for(var ye=d();ye===h(re,!0)&&ta(re,0,e.length-1,!n.rewind);)re<T?--re:++re;return re}function D(re){return B?(re+w)%w||0:re}function W(){for(var re=w-(be()||B&&p?1:v);P&&re-- >0;)if(h(w-1,!0)!==h(re,!0)){re++;break}return Xo(re,0,w-1)}function K(re){return Xo(be()?re:v*re,0,N)}function Z(re){return be()?Yr(re,N):wa((re>=N?w-1:re)/v)}function G(re){var ye=c.toIndex(re);return A?Xo(ye,0,N):ye}function oe(re){re!==T&&(l=T,T=re)}function he(re){return re?l:T}function be(){return!ms(n.focus)||n.isNavigation}function Se(){return e.state.is([Pi,ws])&&!!n.waitForTransition}return{mount:$,go:_,scroll:x,getNext:O,getPrev:M,getAdjacent:q,getEnd:W,setIndex:oe,getIndex:he,toIndex:K,toPage:Z,toDest:G,hasFocus:be,isBusy:Se}}var g4="http://www.w3.org/2000/svg",w4="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Fs=40;function m4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.emit,d=n.classes,f=n.i18n,h=t.Elements,y=t.Controller,m=h.arrows,E=h.track,P=m,B=h.prev,A=h.next,O,M,T={};function N(){w(),o(Ot,l)}function l(){p(),N()}function w(){var x=n.arrows;x&&!(B&&A)&&R(),B&&A&&(ss(T,{prev:B,next:A}),as(P,x?"":"none"),zn(P,M=Cd+"--"+n.direction),x&&(v(),_(),Ue([B,A],Es,E.id),c(kl,B,A)))}function p(){r.destroy(),nr(P,M),O?(Co(m?[B,A]:P),B=A=null):Un([B,A],Ld)}function v(){o([so,Bo,ft,zo,va],_),s(A,"click",Qe($,">")),s(B,"click",Qe($,"<"))}function $(x){y.go(x,!0)}function R(){P=m||oi("div",d.arrows),B=L(!0),A=L(!1),O=!0,ys(P,[B,A]),!m&&_d(P,E)}function L(x){var z='<button class="'+d.arrow+" "+(x?d.prev:d.next)+'" type="button"><svg xmlns="'+g4+'" viewBox="0 0 '+Fs+" "+Fs+'" width="'+Fs+'" height="'+Fs+'" focusable="false"><path d="'+(n.arrowPath||w4)+'" />';return W0(z)}function _(){if(B&&A){var x=e.index,z=y.getPrev(),q=y.getNext(),I=z>-1&&x<z?f.last:f.prev,S=q>-1&&x>q?f.first:f.next;B.disabled=z<0,A.disabled=q<0,Ue(B,ln,I),Ue(A,ln,S),c(Al,B,A,z,q)}}return{arrows:T,mount:N,destroy:p,update:_}}var b4=kd+"-interval";function y4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.emit,d=ic(n.interval,e.go.bind(e,">"),v),f=d.isPaused,h=t.Elements,y=t.Elements,m=y.root,E=y.toggle,P=n.autoplay,B,A,O=P==="pause";function M(){P&&(T(),E&&Ue(E,Es,h.track.id),O||N(),p())}function T(){n.pauseOnHover&&s(m,"mouseenter mouseleave",function(R){B=R.type==="mouseenter",w()}),n.pauseOnFocus&&s(m,"focusin focusout",function(R){A=R.type==="focusin",w()}),E&&s(E,"click",function(){O?N():l(!0)}),o([Mn,oc,ft],d.rewind),o(Mn,$)}function N(){f()&&t.Slides.isEnough()&&(d.start(!n.resetProgress),A=B=O=!1,p(),c($d))}function l(R){R===void 0&&(R=!0),O=!!R,p(),f()||(d.pause(),c(xd))}function w(){O||(B||A?l(!1):N())}function p(){E&&(tr(E,Io,!O),Ue(E,ln,n.i18n[O?"play":"pause"]))}function v(R){var L=h.bar;L&&hn(L,"width",R*100+"%"),c(xl,R)}function $(R){var L=t.Slides.getAt(R);d.set(L&&+gn(L.slide,b4)||n.interval)}return{mount:M,destroy:d.cancel,play:N,pause:l,isPaused:f}}function v4(e,t,n){var r=tt(e),o=r.on;function s(){n.cover&&(o(ya,Qe(d,!0)),o([so,Ot,ft],Qe(c,!0)))}function c(f){t.Slides.forEach(function(h){var y=vs(h.container||h.slide,"img");y&&y.src&&d(f,y,h)})}function d(f,h,y){y.style("background",f?'center/cover no-repeat url("'+h.src+'")':"",!0),as(h,f?"none":"")}return{mount:s,destroy:Qe(c,!1)}}var _4=10,E4=600,k4=.6,A4=1.5,S4=800;function $4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=e.state.set,d=t.Move,f=d.getPosition,h=d.getLimit,y=d.exceededLimit,m=d.translate,E=e.is(bi),P,B,A=1;function O(){o(Mn,l),o([Ot,ft],w)}function M(v,$,R,L,_){var x=f();if(l(),R&&(!E||!y())){var z=t.Layout.sliderSize(),q=ml(v)*z*wa(qt(v)/z)||0;v=d.toPosition(t.Controller.toDest(v%z))+q}var I=G0(x,v,1);A=1,$=I?0:$||ga(qt(v-x)/A4,S4),B=L,P=ic($,T,Qe(N,x,v,_),1),c(ws),s(oc),P.start()}function T(){c(wi),B&&B(),s(zo)}function N(v,$,R,L){var _=f(),x=v+($-v)*p(L),z=(x-_)*A;m(_+z),E&&!R&&y()&&(A*=k4,qt(z)<_4&&M(h(y(!0)),E4,!1,B,!0))}function l(){P&&P.cancel()}function w(){P&&!P.isPaused()&&(l(),T())}function p(v){var $=n.easingFunc;return $?$(v):1-Math.pow(1-v,4)}return{mount:O,destroy:l,scroll:M,cancel:w}}var Qo={passive:!1,capture:!0};function x4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=r.bind,d=r.unbind,f=e.state,h=t.Move,y=t.Scroll,m=t.Controller,E=t.Elements.track,P=t.Media.reduce,B=t.Direction,A=B.resolve,O=B.orient,M=h.getPosition,T=h.exceededLimit,N,l,w,p,v,$=!1,R,L,_;function x(){c(E,Bu,gl,Qo),c(E,Iu,gl,Qo),c(E,hw,q,Qo),c(E,"click",D,{capture:!0}),c(E,"dragstart",Jn),o([so,Ot],z)}function z(){var se=n.drag;We(!se),p=se==="free"}function q(se){if(R=!1,!L){var Re=Me(se);Oe(se.target)&&(Re||!se.button)&&(m.isBusy()?Jn(se,!0):(_=Re?E:window,v=f.is([Pi,ws]),w=null,c(_,Bu,I,Qo),c(_,Iu,S,Qo),h.cancel(),y.cancel(),W(se)))}}function I(se){if(f.is(Qs)||(f.set(Qs),s(Y0)),se.cancelable)if(v){h.translate(N+Be(be(se)));var Re=Se(se)>cp,Te=$!==($=T());(Re||Te)&&W(se),R=!0,s(J0),Jn(se)}else G(se)&&(v=Z(se),Jn(se))}function S(se){f.is(Qs)&&(f.set(wi),s(X0)),v&&(K(se),Jn(se)),d(_,Bu,I),d(_,Iu,S),v=!1}function D(se){!L&&R&&Jn(se,!0)}function W(se){w=l,l=se,N=M()}function K(se){var Re=oe(se),Te=he(Re),Pe=n.rewind&&n.rewindByDrag;P(!1),p?m.scroll(Te,0,n.snap):e.is(ks)?m.go(O(ml(Re))<0?Pe?"<":"-":Pe?">":"+"):e.is(bi)&&$&&Pe?m.go(T(!0)?">":"<"):m.go(m.toDest(Te),!0),P(!0)}function Z(se){var Re=n.dragMinThreshold,Te=rs(Re),Pe=Te&&Re.mouse||0,je=(Te?Re.touch:+Re)||10;return qt(be(se))>(Me(se)?je:Pe)}function G(se){return qt(be(se))>qt(be(se,!0))}function oe(se){if(e.is(Li)||!$){var Re=Se(se);if(Re&&Re<cp)return be(se)/Re}return 0}function he(se){return M()+ml(se)*Yr(qt(se)*(n.flickPower||600),p?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}function be(se,Re){return ye(se,Re)-ye(re(se),Re)}function Se(se){return wl(se)-wl(re(se))}function re(se){return l===se&&w||l}function ye(se,Re){return(Me(se)?se.changedTouches[0]:se)["page"+A(Re?"Y":"X")]}function Be(se){return se/($&&e.is(bi)?s4:1)}function Oe(se){var Re=n.noDrag;return!os(se,"."+cw+", ."+dc)&&(!Re||!os(se,Re))}function Me(se){return typeof TouchEvent<"u"&&se instanceof TouchEvent}function pt(){return v}function We(se){L=se}return{mount:x,disable:We,isDragging:pt}}var T4={Spacebar:" ",Right:cc,Left:ac,Up:tw,Down:nw};function Bd(e){return e=Zr(e)?e:e.key,T4[e]||e}var up="keydown";function P4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.unbind,d=e.root,f=t.Direction.resolve,h,y;function m(){E(),o(Ot,P),o(Ot,E),o(Mn,A)}function E(){var M=n.keyboard;M&&(h=M==="global"?window:d,s(h,up,O))}function P(){c(h,up)}function B(M){y=M}function A(){var M=y;y=!0,j0(function(){y=M})}function O(M){if(!y){var T=Bd(M);T===f(ac)?e.go("<"):T===f(cc)&&e.go(">")}}return{mount:m,destroy:P,disable:B}}var Ji=kd+"-lazy",na=Ji+"-srcset",L4="["+Ji+"], ["+na+"]";function C4(e,t,n){var r=tt(e),o=r.on,s=r.off,c=r.bind,d=r.emit,f=n.lazyLoad==="sequential",h=[Bo,zo],y=[];function m(){n.lazyLoad&&(E(),o(ft,E))}function E(){sr(y),P(),f?M():(s(h),o(h,B),B())}function P(){t.Slides.forEach(function(T){Ed(T.slide,L4).forEach(function(N){var l=gn(N,Ji),w=gn(N,na);if(l!==N.src||w!==N.srcset){var p=n.classes.spinner,v=N.parentElement,$=vs(v,"."+p)||oi("span",p,v);y.push([N,T,$]),N.src||as(N,"none")}})})}function B(){y=y.filter(function(T){var N=n.perPage*((n.preloadPages||1)+1)-1;return T[1].isWithin(e.index,N)?A(T):!0}),y.length||s(h)}function A(T){var N=T[0];zn(T[1].slide,Pl),c(N,"load error",Qe(O,T)),Ue(N,"src",gn(N,Ji)),Ue(N,"srcset",gn(N,na)),Un(N,Ji),Un(N,na)}function O(T,N){var l=T[0],w=T[1];nr(w.slide,Pl),N.type!=="error"&&(Co(T[2]),as(l,""),d(ya,l,w),d(mi)),f&&M()}function M(){y.length&&A(y.shift())}return{mount:m,destroy:Qe(sr,y),check:B}}function B4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=r.bind,d=t.Slides,f=t.Elements,h=t.Controller,y=h.hasFocus,m=h.getIndex,E=h.go,P=t.Direction.resolve,B=f.pagination,A=[],O,M;function T(){N(),o([Ot,ft,va],T);var L=n.pagination;B&&as(B,L?"":"none"),L&&(o([Mn,oc,zo],R),l(),R(),s(Sl,{list:O,items:A},$(e.index)))}function N(){O&&(Co(B?io(O.children):O),nr(O,M),sr(A),O=null),r.destroy()}function l(){var L=e.length,_=n.classes,x=n.i18n,z=n.perPage,q=y()?h.getEnd()+1:cs(L/z);O=B||oi("ul",_.pagination,f.track.parentElement),zn(O,M=fc+"--"+v()),Ue(O,rr,"tablist"),Ue(O,ln,x.select),Ue(O,Pd,v()===uc?"vertical":"");for(var I=0;I<q;I++){var S=oi("li",null,O),D=oi("button",{class:_.page,type:"button"},S),W=d.getIn(I).map(function(Z){return Z.slide.id}),K=!y()&&z>1?x.pageX:x.slideX;c(D,"click",Qe(w,I)),n.paginationKeyboard&&c(D,"keydown",Qe(p,I)),Ue(S,rr,"presentation"),Ue(D,rr,"tab"),Ue(D,Es,W.join(" ")),Ue(D,ln,bl(K,I+1)),Ue(D,ii,-1),A.push({li:S,button:D,page:I})}}function w(L){E(">"+L,!0)}function p(L,_){var x=A.length,z=Bd(_),q=v(),I=-1;z===P(cc,!1,q)?I=++L%x:z===P(ac,!1,q)?I=(--L+x)%x:z==="Home"?I=0:z==="End"&&(I=x-1);var S=A[I];S&&(F0(S.button),E(">"+I),Jn(_,!0))}function v(){return n.paginationDirection||n.direction}function $(L){return A[h.toPage(L)]}function R(){var L=$(m(!0)),_=$(m());if(L){var x=L.button;nr(x,Io),Un(x,rp),Ue(x,ii,-1)}if(_){var z=_.button;zn(z,Io),Ue(z,rp,!0),Ue(z,ii,"")}s($l,{list:O,items:A},L,_)}return{items:A,mount:T,destroy:N,getAt:$,update:R}}var I4=[" ","Enter"];function O4(e,t,n){var r=n.isNavigation,o=n.slideFocus,s=[];function c(){e.splides.forEach(function(B){B.isParent||(h(e,B.splide),h(B.splide,e))}),r&&y()}function d(){s.forEach(function(B){B.destroy()}),sr(s)}function f(){d(),c()}function h(B,A){var O=tt(B);O.on(Mn,function(M,T,N){A.go(A.is(Li)?N:M)}),s.push(O)}function y(){var B=tt(e),A=B.on;A(ma,E),A(Q0,P),A([so,Ot],m),s.push(B),B.emit(ba,e.splides)}function m(){Ue(t.Elements.list,Pd,n.direction===uc?"vertical":"")}function E(B){e.go(B.index)}function P(B,A){vd(I4,Bd(A))&&(E(B),Jn(A))}return{setup:Qe(t.Media.set,{slideFocus:ms(o)?r:o},!0),mount:c,destroy:d,remount:f}}function N4(e,t,n){var r=tt(e),o=r.bind,s=0;function c(){n.wheel&&o(t.Elements.track,"wheel",d,Qo)}function d(h){if(h.cancelable){var y=h.deltaY,m=y<0,E=wl(h),P=n.wheelMinThreshold||0,B=n.wheelSleep||0;qt(y)>P&&E-s>B&&(e.go(m?"<":">"),s=E),f(m)&&Jn(h)}}function f(h){return!n.releaseWheel||e.state.is(Pi)||t.Controller.getAdjacent(h)!==-1}return{mount:c}}var R4=90;function z4(e,t,n){var r=tt(e),o=r.on,s=t.Elements.track,c=n.live&&!n.isNavigation,d=oi("span",t4),f=ic(R4,Qe(y,!1));function h(){c&&(E(!t.Autoplay.isPaused()),Ue(s,sp,!0),d.textContent="",o($d,Qe(E,!0)),o(xd,Qe(E,!1)),o([Bo,zo],Qe(y,!0)))}function y(P){Ue(s,ip,P),P?(ys(s,d),f.start()):(Co(d),f.cancel())}function m(){Un(s,[op,sp,ip]),Co(d)}function E(P){c&&Ue(s,op,P?"off":"polite")}return{mount:h,disable:E,destroy:m}}var U4=Object.freeze({__proto__:null,Media:WE,Direction:KE,Elements:a4,Slides:u4,Layout:l4,Clones:f4,Move:h4,Controller:p4,Arrows:m4,Autoplay:y4,Cover:v4,Scroll:$4,Drag:x4,Keyboard:P4,LazyLoad:C4,Pagination:B4,Sync:O4,Wheel:N4,Live:z4}),M4={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},H4={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:o4,i18n:M4,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function j4(e,t,n){var r=t.Slides;function o(){tt(e).on([so,ft],s)}function s(){r.forEach(function(d){d.style("transform","translateX(-"+100*d.index+"%)")})}function c(d,f){r.style("transition","opacity "+n.speed+"ms "+n.easing),j0(f)}return{mount:o,start:c,cancel:gl}}function D4(e,t,n){var r=t.Move,o=t.Controller,s=t.Scroll,c=t.Elements.list,d=Qe(hn,c,"transition"),f;function h(){tt(e).bind(c,"transitionend",function(P){P.target===c&&f&&(m(),f())})}function y(P,B){var A=r.toPosition(P,!0),O=r.getPosition(),M=E(P);qt(A-O)>=1&&M>=1?n.useScroll?s.scroll(A,M,!1,B):(d("transform "+M+"ms "+n.easing),r.translate(A,!0),f=B):(r.jump(P),B())}function m(){d(""),s.cancel()}function E(P){var B=n.rewindSpeed;if(e.is(bi)&&B){var A=o.getIndex(!0),O=o.getEnd();if(A===0&&P>=O||A>=O&&P===0)return B}return n.speed}return{mount:h,start:y,cancel:m}}var q4=function(){function e(n,r){this.event=tt(),this.Components={},this.state=VE(ni),this.splides=[],this._o={},this._E={};var o=Zr(n)?K0(document,n):n;Yi(o,o+" is invalid."),this.root=o,r=jr({label:gn(o,ln)||"",labelledby:gn(o,Td)||""},H4,e.defaults,r||{});try{jr(r,JSON.parse(gn(o,kd)))}catch{Yi(!1,"Invalid JSON")}this._o=Object.create(jr({},r))}var t=e.prototype;return t.mount=function(r,o){var s=this,c=this.state,d=this.Components;Yi(c.is([ni,pa]),"Already mounted!"),c.set(ni),this._C=d,this._T=o||this._T||(this.is(ks)?j4:D4),this._E=r||this._E;var f=ss({},U4,this._E,{Transition:this._T});return To(f,function(h,y){var m=h(s,d,s._o);d[y]=m,m.setup&&m.setup()}),To(d,function(h){h.mount&&h.mount()}),this.emit(so),zn(this.root,n4),c.set(wi),this.emit(tp),this},t.sync=function(r){return this.splides.push({splide:r}),r.splides.push({splide:this,isParent:!0}),this.state.is(wi)&&(this._C.Sync.remount(),r.Components.Sync.remount()),this},t.go=function(r){return this._C.Controller.go(r),this},t.on=function(r,o){return this.event.on(r,o),this},t.off=function(r){return this.event.off(r),this},t.emit=function(r){var o;return(o=this.event).emit.apply(o,[r].concat(io(arguments,1))),this},t.add=function(r,o){return this._C.Slides.add(r,o),this},t.remove=function(r){return this._C.Slides.remove(r),this},t.is=function(r){return this._o.type===r},t.refresh=function(){return this.emit(ft),this},t.destroy=function(r){r===void 0&&(r=!0);var o=this.event,s=this.state;return s.is(ni)?tt(this).on(tp,this.destroy.bind(this,r)):(To(this._C,function(c){c.destroy&&c.destroy(r)},!0),o.emit(Sd),o.destroy(),r&&sr(this.splides),s.set(pa)),this},ME(e,[{key:"options",get:function(){return this._o},set:function(r){this._C.Media.set(r,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),Id=q4;Id.defaults={};Id.STATES=jE;const V4=[so,ft,mi,rc,Y0,J0,X0,oc,zo,Sd,$d,xd];function F4(e,t){const n=(r,o={})=>{t(W4(r),{splide:e,...o})};e.on(ma,(r,o)=>{n(ma,{Slide:r,e:o})}),e.on(Mn,(r,o,s)=>{n(Mn,{index:r,prev:o,dest:s})}),e.on(Bo,(r,o,s)=>{n(Bo,{index:r,prev:o,dest:s})}),e.on(yl,r=>{n(yl,{Slide:r})}),e.on(vl,r=>{n(vl,{Slide:r})}),e.on(_l,r=>{n(_l,{Slide:r})}),e.on(El,r=>{n(El,{Slide:r})}),e.on(Ot,r=>{n(Ot,r)}),e.on(kl,(r,o)=>{n(kl,{prev:r,next:o})}),e.on(Al,(r,o)=>{n(Al,{prev:r,next:o})}),e.on(Sl,(r,o)=>{n(Sl,{data:r,item:o})}),e.on($l,(r,o,s)=>{n($l,{data:r,prev:o,curr:s})}),e.on(ba,r=>{n(ba,{splides:r})}),e.on(xl,r=>{n(xl,{rate:r})}),e.on(ya,(r,o)=>{n(ya,{img:r,Slide:o})}),V4.forEach(r=>{e.on(r,()=>{n(r)})})}function W4(e){return e.split(":").map((t,n)=>n>0?t.charAt(0).toUpperCase()+t.slice(1):t).join("").replace("Lazyload","LazyLoad")}function K4(e){let t;const n=e[11].default,r=Oa(n,e,e[13],null);return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),t=!0},p(o,s){r&&r.p&&(!t||s&8192)&&Ra(r,n,o,o[13],t?Na(n,o[13],s,null):za(o[13]),null)},i(o){t||(Ve(r,o),t=!0)},o(o){Ze(r,o),t=!1},d(o){r&&r.d(o)}}}function G4(e){let t,n;return t=new t6({props:{$$slots:{default:[Z4]},$$scope:{ctx:e}}}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function Z4(e){let t;const n=e[11].default,r=Oa(n,e,e[13],null);return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),t=!0},p(o,s){r&&r.p&&(!t||s&8192)&&Ra(r,n,o,o[13],t?Na(n,o[13],s,null):za(o[13]),null)},i(o){t||(Ve(r,o),t=!0)},o(o){Ze(r,o),t=!1},d(o){r&&r.d(o)}}}function Y4(e){let t,n,r,o,s;const c=[G4,K4],d=[];function f(m,E){return m[1]?0:1}n=f(e),r=d[n]=c[n](e);let h=[{class:o=gi("splide",e[0])},e[3]],y={};for(let m=0;m<h.length;m+=1)y=Rn(y,h[m]);return{c(){t=ke("div"),r.c(),fi(t,y)},m(m,E){Ne(m,t,E),d[n].m(t,null),e[12](t),s=!0},p(m,[E]){let P=n;n=f(m),n===P?d[n].p(m,E):(Qr(),Ze(d[P],1,1,()=>{d[P]=null}),eo(),r=d[n],r?r.p(m,E):(r=d[n]=c[n](m),r.c()),Ve(r,1),r.m(t,null)),fi(t,y=Kl(h,[(!s||E&1&&o!==(o=gi("splide",m[0])))&&{class:o},E&8&&m[3]]))},i(m){s||(Ve(r),s=!0)},o(m){Ze(r),s=!1},d(m){m&&Ie(t),d[n].d(),e[12](null)}}}function J4(e,t,n){const r=["class","options","splide","extensions","transition","hasTrack","go","sync"];let o=di(t,r),{$$slots:s={},$$scope:c}=t,{class:d=void 0}=t,{options:f={}}=t,{splide:h=void 0}=t,{extensions:y=void 0}=t,{transition:m=void 0}=t,{hasTrack:E=!0}=t;const P=Pv();let B,A,O=pl({},f);Ha(()=>(n(4,h=new Id(B,f)),F4(h,P),h.mount(y,m),A=Zh(h),()=>h.destroy())),xv(()=>{if(h){const l=Zh(h);zE(A,l)||(h.refresh(),A=l.slice())}});function M(l){h==null||h.go(l)}function T(l){h==null||h.sync(l)}function N(l){Xu[l?"unshift":"push"](()=>{B=l,n(2,B)})}return e.$$set=l=>{t=Rn(Rn({},t),Wl(l)),n(3,o=di(t,r)),"class"in l&&n(0,d=l.class),"options"in l&&n(5,f=l.options),"splide"in l&&n(4,h=l.splide),"extensions"in l&&n(6,y=l.extensions),"transition"in l&&n(7,m=l.transition),"hasTrack"in l&&n(1,E=l.hasTrack),"$$scope"in l&&n(13,c=l.$$scope)},e.$$.update=()=>{e.$$.dirty&1072&&h&&!hl(O,f)&&(n(4,h.options=f,h),n(10,O=pl({},O)))},[d,E,B,o,h,f,y,m,M,T,O,s,N,c]}class X4 extends no{constructor(t){super(),to(this,t,J4,Y4,Hn,{class:0,options:5,splide:4,extensions:6,transition:7,hasTrack:1,go:8,sync:9})}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),zr()}get options(){return this.$$.ctx[5]}set options(t){this.$$set({options:t}),zr()}get splide(){return this.$$.ctx[4]}set splide(t){this.$$set({splide:t}),zr()}get extensions(){return this.$$.ctx[6]}set extensions(t){this.$$set({extensions:t}),zr()}get transition(){return this.$$.ctx[7]}set transition(t){this.$$set({transition:t}),zr()}get hasTrack(){return this.$$.ctx[1]}set hasTrack(t){this.$$set({hasTrack:t}),zr()}get go(){return this.$$.ctx[8]}get sync(){return this.$$.ctx[9]}}function Q4(e){let t,n,r,o;const s=e[3].default,c=Oa(s,e,e[2],null);let d=[{class:r=gi("splide__track",e[0])},e[1]],f={};for(let h=0;h<d.length;h+=1)f=Rn(f,d[h]);return{c(){t=ke("div"),n=ke("ul"),c&&c.c(),Ee(n,"class","splide__list"),fi(t,f)},m(h,y){Ne(h,t,y),we(t,n),c&&c.m(n,null),o=!0},p(h,[y]){c&&c.p&&(!o||y&4)&&Ra(c,s,h,h[2],o?Na(s,h[2],y,null):za(h[2]),null),fi(t,f=Kl(d,[(!o||y&1&&r!==(r=gi("splide__track",h[0])))&&{class:r},y&2&&h[1]]))},i(h){o||(Ve(c,h),o=!0)},o(h){Ze(c,h),o=!1},d(h){h&&Ie(t),c&&c.d(h)}}}function e6(e,t,n){const r=["class"];let o=di(t,r),{$$slots:s={},$$scope:c}=t,{class:d=void 0}=t;return e.$$set=f=>{t=Rn(Rn({},t),Wl(f)),n(1,o=di(t,r)),"class"in f&&n(0,d=f.class),"$$scope"in f&&n(2,c=f.$$scope)},[d,o,c,s]}class t6 extends no{constructor(t){super(),to(this,t,e6,Q4,Hn,{class:0})}}function n6(e){let t,n,r;const o=e[3].default,s=Oa(o,e,e[2],null);let c=[{class:n=gi("splide__slide",e[0])},e[1]],d={};for(let f=0;f<c.length;f+=1)d=Rn(d,c[f]);return{c(){t=ke("li"),s&&s.c(),fi(t,d)},m(f,h){Ne(f,t,h),s&&s.m(t,null),r=!0},p(f,[h]){s&&s.p&&(!r||h&4)&&Ra(s,o,f,f[2],r?Na(o,f[2],h,null):za(f[2]),null),fi(t,d=Kl(c,[(!r||h&1&&n!==(n=gi("splide__slide",f[0])))&&{class:n},h&2&&f[1]]))},i(f){r||(Ve(s,f),r=!0)},o(f){Ze(s,f),r=!1},d(f){f&&Ie(t),s&&s.d(f)}}}function r6(e,t,n){const r=["class"];let o=di(t,r),{$$slots:s={},$$scope:c}=t,{class:d=void 0}=t;return e.$$set=f=>{t=Rn(Rn({},t),Wl(f)),n(1,o=di(t,r)),"class"in f&&n(0,d=f.class),"$$scope"in f&&n(2,c=f.$$scope)},[d,o,c,s]}class o6 extends no{constructor(t){super(),to(this,t,r6,n6,Hn,{class:0})}}function i6(e){let t;return{c(){t=ke("div"),t.innerHTML='<div class="loader svelte-181fgen"></div>',Ee(t,"class","loader-container svelte-181fgen")},m(n,r){Ne(n,t,r)},p:At,i:At,o:At,d(n){n&&Ie(t)}}}class pw extends no{constructor(t){super(),to(this,t,null,i6,Hn,{})}}function lp(e,t,n){const r=e.slice();return r[19]=t[n],r}function dp(e,t,n){const r=e.slice();return r[19]=t[n],r}function fp(e,t,n){const r=e.slice();return r[19]=t[n],r}function hp(e,t,n){const r=e.slice();return r[26]=t[n],r}function pp(e){let t,n,r,o,s,c,d=Fr(e[6]),f=[];for(let h=0;h<d.length;h+=1)f[h]=gp(hp(e,d,h));return{c(){t=ke("div"),n=ke("div"),r=ke("a"),o=Xe("Home"),c=Ge();for(let h=0;h<f.length;h+=1)f[h].c();Ee(r,"href","#"),Ee(r,"class",s=e[0]==""?"selected":""),Ee(t,"class","topic-wrapper")},m(h,y){Ne(h,t,y),we(t,n),we(n,r),we(r,o),we(t,c);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(t,null)},p(h,y){if(y&1&&s!==(s=h[0]==""?"selected":"")&&Ee(r,"class",s),y&65){d=Fr(h[6]);let m;for(m=0;m<d.length;m+=1){const E=hp(h,d,m);f[m]?f[m].p(E,y):(f[m]=gp(E),f[m].c(),f[m].m(t,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=d.length}},d(h){h&&Ie(t),Ua(f,h)}}}function gp(e){let t,n,r,o=e[26]+"",s,c,d;return{c(){t=ke("div"),n=ke("a"),r=Xe("#"),s=Xe(o),Ee(n,"href",c="#tags/"+e[26]),Ee(n,"class",d=e[26]==e[0]?"selected":"")},m(f,h){Ne(f,t,h),we(t,n),we(n,r),we(n,s)},p(f,h){h&64&&o!==(o=f[26]+"")&&It(s,o),h&64&&c!==(c="#tags/"+f[26])&&Ee(n,"href",c),h&65&&d!==(d=f[26]==f[0]?"selected":"")&&Ee(n,"class",d)},d(f){f&&Ie(t)}}}function s6(e){let t;return{c(){t=ke("div"),Ee(t,"class","separator")},m(n,r){Ne(n,t,r)},p:At,d(n){n&&Ie(t)}}}function a6(e){let t,n;return{c(){t=ke("div"),n=Xe(e[4]),Ee(t,"class","about")},m(r,o){Ne(r,t,o),we(t,n)},p(r,o){o&16&&It(n,r[4])},d(r){r&&Ie(t)}}}function c6(e){let t,n;return t=new pw({}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p:At,i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function u6(e){let t,n,r,o,s=e[10].length>0&&wp(e),c=e[8].length>0&&!e[0]&&yp(e),d=e[9].length>0&&_p(e);return{c(){s&&s.c(),t=Ge(),c&&c.c(),n=Ge(),d&&d.c(),r=Ro()},m(f,h){s&&s.m(f,h),Ne(f,t,h),c&&c.m(f,h),Ne(f,n,h),d&&d.m(f,h),Ne(f,r,h),o=!0},p(f,h){f[10].length>0?s?s.p(f,h):(s=wp(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),f[8].length>0&&!f[0]?c?(c.p(f,h),h&257&&Ve(c,1)):(c=yp(f),c.c(),Ve(c,1),c.m(n.parentNode,n)):c&&(Qr(),Ze(c,1,1,()=>{c=null}),eo()),f[9].length>0?d?d.p(f,h):(d=_p(f),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null)},i(f){o||(Ve(c),o=!0)},o(f){Ze(c),o=!1},d(f){f&&(Ie(t),Ie(n),Ie(r)),s&&s.d(f),c&&c.d(f),d&&d.d(f)}}}function wp(e){let t,n=Fr(e[10]),r=[];for(let o=0;o<n.length;o+=1)r[o]=bp(fp(e,n,o));return{c(){t=ke("div");for(let o=0;o<r.length;o+=1)r[o].c();Ee(t,"class","top-notes")},m(o,s){Ne(o,t,s);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null)},p(o,s){if(s&1024){n=Fr(o[10]);let c;for(c=0;c<n.length;c+=1){const d=fp(o,n,c);r[c]?r[c].p(d,s):(r[c]=bp(d),r[c].c(),r[c].m(t,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(o){o&&Ie(t),Ua(r,o)}}}function mp(e){let t,n=e[19].summary+"";return{c(){t=ke("div"),Ee(t,"class","summary")},m(r,o){Ne(r,t,o),t.innerHTML=n},p(r,o){o&1024&&n!==(n=r[19].summary+"")&&(t.innerHTML=n)},d(r){r&&Ie(t)}}}function bp(e){let t,n,r,o,s,c,d=e[19].title+"",f,h,y,m,E,P=Gr(e[19].created_at)+"",B,A,O=e[19].summary&&mp(e);return{c(){t=ke("div"),n=ke("a"),r=ke("img"),s=Ge(),c=ke("div"),f=Xe(d),y=Ge(),O&&O.c(),m=Ge(),E=ke("div"),B=Xe(P),A=Ge(),Vr(r.src,o=e[19].image)||Ee(r,"src",o),Ee(c,"class","title"),Ee(n,"href",h=`#${e[19].id}`),Ee(E,"class","date"),Ee(t,"class","note")},m(M,T){Ne(M,t,T),we(t,n),we(n,r),we(n,s),we(n,c),we(c,f),we(t,y),O&&O.m(t,null),we(t,m),we(t,E),we(E,B),we(t,A)},p(M,T){T&1024&&!Vr(r.src,o=M[19].image)&&Ee(r,"src",o),T&1024&&d!==(d=M[19].title+"")&&It(f,d),T&1024&&h!==(h=`#${M[19].id}`)&&Ee(n,"href",h),M[19].summary?O?O.p(M,T):(O=mp(M),O.c(),O.m(t,m)):O&&(O.d(1),O=null),T&1024&&P!==(P=Gr(M[19].created_at)+"")&&It(B,P)},d(M){M&&Ie(t),O&&O.d()}}}function yp(e){let t,n;return t=new X4({props:{class:"short-notes",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[d6]},$$scope:{ctx:e}}}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p(r,o){const s={};o&536871168&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function l6(e){let t,n,r=Gr(e[19].created_at,!0)+"",o,s,c=e[19].summary+"",d,f,h;return{c(){t=ke("a"),n=ke("div"),o=Xe(r),s=Ge(),d=Xe(c),h=Ge(),Ee(n,"class","date"),Ee(t,"href",f=`#${e[19].id}`)},m(y,m){Ne(y,t,m),we(t,n),we(n,o),we(t,s),we(t,d),Ne(y,h,m)},p(y,m){m&256&&r!==(r=Gr(y[19].created_at,!0)+"")&&It(o,r),m&256&&c!==(c=y[19].summary+"")&&It(d,c),m&256&&f!==(f=`#${y[19].id}`)&&Ee(t,"href",f)},d(y){y&&(Ie(t),Ie(h))}}}function vp(e){let t,n;return t=new o6({props:{$$slots:{default:[l6]},$$scope:{ctx:e}}}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p(r,o){const s={};o&536871168&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function d6(e){let t,n,r=Fr(e[8]),o=[];for(let c=0;c<r.length;c+=1)o[c]=vp(dp(e,r,c));const s=c=>Ze(o[c],1,1,()=>{o[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();t=Ro()},m(c,d){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(c,d);Ne(c,t,d),n=!0},p(c,d){if(d&256){r=Fr(c[8]);let f;for(f=0;f<r.length;f+=1){const h=dp(c,r,f);o[f]?(o[f].p(h,d),Ve(o[f],1)):(o[f]=vp(h),o[f].c(),Ve(o[f],1),o[f].m(t.parentNode,t))}for(Qr(),f=r.length;f<o.length;f+=1)s(f);eo()}},i(c){if(!n){for(let d=0;d<r.length;d+=1)Ve(o[d]);n=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)Ze(o[d]);n=!1},d(c){c&&Ie(t),Ua(o,c)}}}function _p(e){let t,n,r=Fr(e[9]),o=[];for(let s=0;s<r.length;s+=1)o[s]=kp(lp(e,r,s));return{c(){t=ke("div"),n=ke("ul");for(let s=0;s<o.length;s+=1)o[s].c();Ee(t,"class","listing-notes"),Lh(t,"short-feed-full",e[7])},m(s,c){Ne(s,t,c),we(t,n);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null)},p(s,c){if(c&640){r=Fr(s[9]);let d;for(d=0;d<r.length;d+=1){const f=lp(s,r,d);o[d]?o[d].p(f,c):(o[d]=kp(f),o[d].c(),o[d].m(n,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=r.length}c&128&&Lh(t,"short-feed-full",s[7])},d(s){s&&Ie(t),Ua(o,s)}}}function f6(e){let t,n=e[19].summary+"",r;return{c(){t=ke("div"),r=Xe(n),Ee(t,"class","summary")},m(o,s){Ne(o,t,s),we(t,r)},p(o,s){s&512&&n!==(n=o[19].summary+"")&&It(r,n)},d(o){o&&Ie(t)}}}function h6(e){let t,n=e[19].content+"";return{c(){t=ke("div"),Ee(t,"class","summary full")},m(r,o){Ne(r,t,o),t.innerHTML=n},p(r,o){o&512&&n!==(n=r[19].content+"")&&(t.innerHTML=n)},d(r){r&&Ie(t)}}}function Ep(e){let t,n=Gr(e[19].created_at)+"",r;return{c(){t=ke("div"),r=Xe(n),Ee(t,"class","date")},m(o,s){Ne(o,t,s),we(t,r)},p(o,s){s&512&&n!==(n=Gr(o[19].created_at)+"")&&It(r,n)},d(o){o&&Ie(t)}}}function kp(e){let t,n,r,o=e[19].title+"",s,c,d,f,h;function y(B,A){if(B[19].kind==1&&B[7])return h6;if(B[19].summary)return f6}let m=y(e),E=m&&m(e),P=!(e[19].kind==1&&e[7])&&Ep(e);return{c(){t=ke("li"),n=ke("h2"),r=ke("a"),s=Xe(o),d=Ge(),E&&E.c(),f=Ge(),P&&P.c(),h=Ge(),Ee(r,"href",c=`#${e[19].id}`)},m(B,A){Ne(B,t,A),we(t,n),we(n,r),we(r,s),we(t,d),E&&E.m(t,null),we(t,f),P&&P.m(t,null),we(t,h)},p(B,A){A&512&&o!==(o=B[19].title+"")&&It(s,o),A&512&&c!==(c=`#${B[19].id}`)&&Ee(r,"href",c),m===(m=y(B))&&E?E.p(B,A):(E&&E.d(1),E=m&&m(B),E&&(E.c(),E.m(t,f))),B[19].kind==1&&B[7]?P&&(P.d(1),P=null):P?P.p(B,A):(P=Ep(B),P.c(),P.m(t,h))},d(B){B&&Ie(t),E&&E.d(),P&&P.d()}}}function p6(e){let t,n,r,o,s=e[5].slice(0,9)+"..."+e[5].slice(-5),c,d,f,h,y,m,E,P,B,A,O,M,T,N,l,w,p=e[6].length>0&&pp(e);function v(z,q){return z[0]==""?a6:s6}let $=v(e),R=$(e);const L=[u6,c6],_=[];function x(z,q){return z[1].length>0?0:1}return T=x(e),N=_[T]=L[T](e),{c(){t=ke("div"),n=ke("div"),r=Xe("Profile: "),o=ke("a"),c=Xe(s),f=Ge(),h=ke("h1"),y=ke("div"),m=ke("img"),P=Ge(),B=Xe(e[2]),A=Ge(),p&&p.c(),O=Ge(),R.c(),M=Ge(),N.c(),l=Ro(),Ee(o,"href",d="https://njump.me/"+e[5]),Ee(n,"class","external-link"),Vr(m.src,E=e[3])||Ee(m,"src",E),Ee(y,"class","picture-container"),Ee(t,"class","header home")},m(z,q){Ne(z,t,q),we(t,n),we(n,r),we(n,o),we(o,c),we(t,f),we(t,h),we(h,y),we(y,m),we(h,P),we(h,B),Ne(z,A,q),p&&p.m(z,q),Ne(z,O,q),R.m(z,q),Ne(z,M,q),_[T].m(z,q),Ne(z,l,q),w=!0},p(z,[q]){(!w||q&32)&&s!==(s=z[5].slice(0,9)+"..."+z[5].slice(-5))&&It(c,s),(!w||q&32&&d!==(d="https://njump.me/"+z[5]))&&Ee(o,"href",d),(!w||q&8&&!Vr(m.src,E=z[3]))&&Ee(m,"src",E),(!w||q&4)&&It(B,z[2]),z[6].length>0?p?p.p(z,q):(p=pp(z),p.c(),p.m(O.parentNode,O)):p&&(p.d(1),p=null),$===($=v(z))&&R?R.p(z,q):(R.d(1),R=$(z),R&&(R.c(),R.m(M.parentNode,M)));let I=T;T=x(z),T===I?_[T].p(z,q):(Qr(),Ze(_[I],1,1,()=>{_[I]=null}),eo(),N=_[T],N?N.p(z,q):(N=_[T]=L[T](z),N.c()),Ve(N,1),N.m(l.parentNode,l))},i(z){w||(Ve(N),w=!0)},o(z){Ze(N),w=!1},d(z){z&&(Ie(t),Ie(A),Ie(O),Ie(M),Ie(l)),p&&p.d(z),R.d(z),_[T].d(z)}}}function g6(e,t,n){let r,o,s,c=[],d=[],f=new Set,h="",y="",m="",E="",P="",B="",A=!1,O=0,{tag:M}=t,{profile:T}=t;Ha(async()=>{const{npub:l,relays:w,topNotes:p,shortNotesMinChars:v,shortNotes:$,shortFeedSummaryMaxChars:R,topics:L}=qa();n(5,E=l),P=T.pubkey;const _=JSON.parse(T.content);n(2,h=_.name||null),n(3,y=_.picture||null),n(4,m=_.about||null),n(13,O=p),n(6,B=L),n(7,A=R==0);let x=[30023];$=="main"&&x.push(1),fa.set(h+" home, powered by Nostr");let z={kinds:x,authors:[P],limit:1e3};M&&(n(0,M=M.substring(5)),z={...z,"#t":[M]});let q=da.subscribeMany(w,[z],{onevent:async I=>{if(!f.has(I.id)){if(I.kind==1&&(I.content.length<v||!Gh(I)))return;I.kind==1&&A&&(I.content=await H0(I)),n(1,c=[...c,I]),f.add(I.id),c.sort((S,D)=>D.created_at-S.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),q.close()}});$=="carousel"&&(q=da.subscribeMany(w,[{kinds:[1],authors:[P],limit:1e3}],{onevent:async I=>{if(!f.has(I.id)&&I.content.length>v&&Gh(I)){if(I=await N(I),I.content.length<v)return;n(12,d=[...d,I]),f.add(I.id),d.sort((S,D)=>D.created_at-S.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),q.close()}}))});async function N(l){let w;return w=await U0(l.content),w=M0(w),w=CE(w),l.content=w,l}return e.$$set=l=>{"tag"in l&&n(0,M=l.tag),"profile"in l&&n(11,T=l.profile)},e.$$.update=()=>{e.$$.dirty&8194&&n(10,r=O>0?c.filter(l=>l.kind===30023).slice(0,O).map(Xs):[]),e.$$.dirty&8194&&n(9,o=c.slice(O).map(Xs)),e.$$.dirty&4096&&n(8,s=d.map(Xs))},fa.subscribe(l=>{document.title=l}),[M,c,h,y,m,E,B,A,s,o,r,T,d,O]}class gw extends no{constructor(t){super(),to(this,t,g6,p6,Hn,{tag:0,profile:11})}}var w6=Object.defineProperty,m6=(e,t,n)=>t in e?w6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pe=(e,t,n)=>(m6(e,typeof t!="symbol"?t+"":t,n),n);const b6=(e,t)=>e===t,Ft=Symbol("solid-proxy"),ls=Symbol("solid-track"),_a={equals:b6};let ww=_w;const hr=1,Ea=2,mw={owned:null,cleanups:null,context:null,owner:null},Ou={};var ht=null;let Nu=null,et=null,Bt=null,or=null,hc=0;function Ll(e,t){const n=et,r=ht,o=e.length===0,s=t===void 0?r:t,c=o?mw:{owned:null,cleanups:null,context:s?s.context:null,owner:s},d=o?e:()=>e(()=>bn(()=>gc(c)));ht=c,et=null;try{return Jr(d,!0)}finally{et=n,ht=r}}function dt(e,t){t=t?Object.assign({},_a,t):_a;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),vw(n,o));return[yw.bind(n),r]}function Ur(e,t,n){const r=pc(e,t,!0,hr);Ci(r)}function cn(e,t,n){const r=pc(e,t,!1,hr);Ci(r)}function yi(e,t,n){ww=k6;const r=pc(e,t,!1,hr);r.user=!0,or?or.push(r):Ci(r)}function De(e,t,n){n=n?Object.assign({},_a,n):_a;const r=pc(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ci(r),yw.bind(r)}function y6(e){return e&&typeof e=="object"&&"then"in e}function bw(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let c=null,d=Ou,f=!1,h="initialValue"in s,y=typeof r=="function"&&De(r);const m=new Set,[E,P]=(s.storage||dt)(s.initialValue),[B,A]=dt(void 0),[O,M]=dt(void 0,{equals:!1}),[T,N]=dt(h?"ready":"unresolved");function l($,R,L,_){return c===$&&(c=null,_!==void 0&&(h=!0),($===d||R===d)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(_,{value:R})),d=Ou,w(R,L)),R}function w($,R){Jr(()=>{R===void 0&&P(()=>$),N(R!==void 0?"errored":h?"ready":"unresolved"),A(R);for(const L of m.keys())L.decrement();m.clear()},!1)}function p(){const $=v6,R=E(),L=B();if(L!==void 0&&!c)throw L;return et&&!et.user&&$&&Ur(()=>{O(),c&&($.resolved||m.has($)||($.increment(),m.add($)))}),R}function v($=!0){if($!==!1&&f)return;f=!1;const R=y?y():r;if(R==null||R===!1){l(c,bn(E));return}const L=d!==Ou?d:bn(()=>o(R,{value:E(),refetching:$}));return y6(L)?(c=L,"value"in L?(L.status==="success"?l(c,L.value,void 0,R):l(c,void 0,void 0,R),L):(f=!0,queueMicrotask(()=>f=!1),Jr(()=>{N(h?"refreshing":"pending"),M()},!1),L.then(_=>l(L,_,void 0,R),_=>l(L,void 0,kw(_),R)))):(l(c,L,void 0,R),L)}return Object.defineProperties(p,{state:{get:()=>T()},error:{get:()=>B()},loading:{get(){const $=T();return $==="pending"||$==="refreshing"}},latest:{get(){if(!h)return p();const $=B();if($&&!c)throw $;return E()}}}),y?Ur(()=>v(!1)):v(!1),[p,{refetch:v,mutate:P}]}function si(e){return Jr(e,!1)}function bn(e){if(et===null)return e();const t=et;et=null;try{return e()}finally{et=t}}function Mr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return c=>{let d;if(r){d=Array(e.length);for(let h=0;h<e.length;h++)d[h]=e[h]()}else d=e();if(s){s=!1;return}const f=bn(()=>t(d,o,c));return o=d,f}}function ai(e){return ht===null||(ht.cleanups===null?ht.cleanups=[e]:ht.cleanups.push(e)),e}function vi(){return et}let v6;function yw(){if(this.sources&&this.state)if(this.state===hr)Ci(this);else{const e=Bt;Bt=null,Jr(()=>Aa(this),!1),Bt=e}if(et){const e=this.observers?this.observers.length:0;et.sources?(et.sources.push(this),et.sourceSlots.push(e)):(et.sources=[this],et.sourceSlots=[e]),this.observers?(this.observers.push(et),this.observerSlots.push(et.sources.length-1)):(this.observers=[et],this.observerSlots=[et.sources.length-1])}return this.value}function vw(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Jr(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],c=Nu&&Nu.running;c&&Nu.disposed.has(s),(c?!s.tState:!s.state)&&(s.pure?Bt.push(s):or.push(s),s.observers&&Ew(s)),c||(s.state=hr)}if(Bt.length>1e6)throw Bt=[],new Error},!1)),t}function Ci(e){if(!e.fn)return;gc(e);const t=ht,n=et,r=hc;et=ht=e,_6(e,e.value,r),et=n,ht=t}function _6(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=hr,e.owned&&e.owned.forEach(gc),e.owned=null),e.updatedAt=n+1,Aw(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?vw(e,r):e.value=r,e.updatedAt=n)}function pc(e,t,n,r=hr,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ht,context:ht?ht.context:null,pure:n};return ht===null||ht!==mw&&(ht.owned?ht.owned.push(s):ht.owned=[s]),s}function ka(e){if(e.state===0)return;if(e.state===Ea)return Aa(e);if(e.suspense&&bn(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<hc);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===hr)Ci(e);else if(e.state===Ea){const r=Bt;Bt=null,Jr(()=>Aa(e,t[0]),!1),Bt=r}}function Jr(e,t){if(Bt)return e();let n=!1;t||(Bt=[]),or?n=!0:or=[],hc++;try{const r=e();return E6(n),r}catch(r){n||(or=null),Bt=null,Aw(r)}}function E6(e){if(Bt&&(_w(Bt),Bt=null),e)return;const t=or;or=null,t.length&&Jr(()=>ww(t),!1)}function _w(e){for(let t=0;t<e.length;t++)ka(e[t])}function k6(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:ka(r)}for(t=0;t<n;t++)ka(e[t])}function Aa(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===hr?r!==t&&(!r.updatedAt||r.updatedAt<hc)&&ka(r):o===Ea&&Aa(r,t)}}}function Ew(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ea,n.pure?Bt.push(n):or.push(n),n.observers&&Ew(n))}}function gc(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),c=n.observerSlots.pop();r<o.length&&(s.sourceSlots[c]=r,o[r]=s,n.observerSlots[r]=c)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)gc(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function kw(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Aw(e,t=ht){throw kw(e)}const Ap=Symbol("fallback");function Sp(e){for(let t=0;t<e.length;t++)e[t]()}function A6(e,t,n={}){let r=[],o=[],s=[],c=[],d=0,f;return ai(()=>Sp(s)),()=>{const h=e()||[];return h[ls],bn(()=>{if(h.length===0)return d!==0&&(Sp(s),s=[],r=[],o=[],d=0,c=[]),n.fallback&&(r=[Ap],o[0]=Ll(m=>(s[0]=m,n.fallback())),d=1),o;for(r[0]===Ap&&(s[0](),s=[],r=[],o=[],d=0),f=0;f<h.length;f++)f<r.length&&r[f]!==h[f]?c[f](()=>h[f]):f>=r.length&&(o[f]=Ll(y));for(;f<r.length;f++)s[f]();return d=c.length=s.length=h.length,r=h.slice(0),o=o.slice(0,d)});function y(m){s[f]=m;const[E,P]=dt(h[f]);return c[f]=P,t(E,f)}}}function wn(e,t){return bn(()=>e(t||{}))}const S6=e=>`Stale read from <${e}>.`;function $6(e){const t="fallback"in e&&{fallback:()=>e.fallback};return De(A6(()=>e.each,e.children,t||void 0))}function Sa(e){const t=e.keyed,n=De(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return De(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?bn(()=>o(t?r:()=>{if(!bn(n))throw S6("Show");return e.when})):o}return e.fallback},void 0,void 0)}function x6(e,t,n){let r=n.length,o=t.length,s=r,c=0,d=0,f=t[o-1].nextSibling,h=null;for(;c<o||d<s;){if(t[c]===n[d]){c++,d++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===c){const y=s<r?d?n[d-1].nextSibling:n[s-d]:f;for(;d<s;)e.insertBefore(n[d++],y)}else if(s===d)for(;c<o;)(!h||!h.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[s-1]&&n[d]===t[o-1]){const y=t[--o].nextSibling;e.insertBefore(n[d++],t[c++].nextSibling),e.insertBefore(n[--s],y),t[o]=n[s]}else{if(!h){h=new Map;let m=d;for(;m<s;)h.set(n[m],m++)}const y=h.get(t[c]);if(y!=null)if(d<y&&y<s){let m=c,E=1,P;for(;++m<o&&m<s&&!((P=h.get(t[m]))==null||P!==y+E);)E++;if(E>y-d){const B=t[c];for(;d<y;)e.insertBefore(n[d++],B)}else e.replaceChild(n[d++],t[c++])}else c++;else t[c++].remove()}}}const $p="_$DX_DELEGATE";function He(e,t,n){let r;const o=()=>{const c=document.createElement("template");return c.innerHTML=e,c.content.firstChild},s=()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function Od(e,t=window.document){const n=t[$p]||(t[$p]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,L6))}}function Ct(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function T6(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function P6(e,t,n){if(!t)return n?Ct(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function Sw(e,t,n){return bn(()=>e(t,n))}function xe(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return $a(e,t,r,n);cn(o=>$a(e,t(),o,n),r)}function L6(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function $a(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),c){let d=n[0];d&&d.nodeType===3?d.data=t:d=document.createTextNode(t),n=Go(e,n,r,d)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=Go(e,n,r);else{if(s==="function")return cn(()=>{let d=t();for(;typeof d=="function";)d=d();n=$a(e,d,n,r)}),()=>n;if(Array.isArray(t)){const d=[],f=n&&Array.isArray(n);if(Cl(d,t,n,o))return cn(()=>n=$a(e,d,n,r,!0)),()=>n;if(d.length===0){if(n=Go(e,n,r),c)return n}else f?n.length===0?xp(e,d,r):x6(e,n,d):(n&&Go(e),xp(e,d));n=d}else if(t.nodeType){if(Array.isArray(n)){if(c)return n=Go(e,n,r,t);Go(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Cl(e,t,n,r){let o=!1;for(let s=0,c=t.length;s<c;s++){let d=t[s],f=n&&n[s],h;if(!(d==null||d===!0||d===!1))if((h=typeof d)=="object"&&d.nodeType)e.push(d);else if(Array.isArray(d))o=Cl(e,d,f)||o;else if(h==="function")if(r){for(;typeof d=="function";)d=d();o=Cl(e,Array.isArray(d)?d:[d],Array.isArray(f)?f:[f])||o}else e.push(d),o=!0;else{const y=String(d);f&&f.nodeType===3&&f.data===y?e.push(f):e.push(document.createTextNode(y))}}return o}function xp(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Go(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let c=t.length-1;c>=0;c--){const d=t[c];if(o!==d){const f=d.parentNode===e;!s&&!c?f?e.replaceChild(o,d):e.insertBefore(o,n):f&&d.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}function C6(e){return Object.keys(e).reduce((n,r)=>{const o=e[r];return n[r]=Object.assign({},o),xw(o.value)&&!R6(o.value)&&!Array.isArray(o.value)&&(n[r].value=Object.assign({},o.value)),Array.isArray(o.value)&&(n[r].value=o.value.slice(0)),n},{})}function B6(e){return e?Object.keys(e).reduce((n,r)=>{const o=e[r];return n[r]=xw(o)&&"value"in o?o:{value:o},n[r].attribute||(n[r].attribute=N6(r)),n[r].parse="parse"in n[r]?n[r].parse:typeof n[r].value!="string",n},{}):{}}function I6(e){return Object.keys(e).reduce((n,r)=>(n[r]=e[r].value,n),{})}function O6(e,t){const n=C6(t);return Object.keys(t).forEach(o=>{const s=n[o],c=e.getAttribute(s.attribute),d=e[o];c&&(s.value=s.parse?$w(c):c),d!=null&&(s.value=Array.isArray(d)?d.slice(0):d),s.reflect&&Tp(e,s.attribute,s.value),Object.defineProperty(e,o,{get(){return s.value},set(f){const h=s.value;s.value=f,s.reflect&&Tp(this,s.attribute,s.value);for(let y=0,m=this.__propertyChangedCallbacks.length;y<m;y++)this.__propertyChangedCallbacks[y](o,f,h)},enumerable:!0,configurable:!0})}),n}function $w(e){if(e)try{return JSON.parse(e)}catch{return e}}function Tp(e,t,n){if(n==null||n===!1)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,r==="true"&&(r=""),e.setAttribute(t,r),Promise.resolve().then(()=>delete e.__updating[t])}function N6(e){return e.replace(/\.?([A-Z]+)/g,(t,n)=>"-"+n.toLowerCase()).replace("_","-").replace(/^-/,"")}function xw(e){return e!=null&&(typeof e=="object"||typeof e=="function")}function R6(e){return Object.prototype.toString.call(e)==="[object Function]"}function z6(e){return typeof e=="function"&&e.toString().indexOf("class")===0}let Ru;function U6(e,t){const n=Object.keys(t);return class extends e{static get observedAttributes(){return n.map(o=>t[o].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=O6(this,t);const o=I6(this.props),s=this.Component,c=Ru;try{Ru=this,this.__initialized=!0,z6(s)?new s(o,{element:this}):s(o,{element:this})}finally{Ru=c}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let o=null;for(;o=this.__releaseCallbacks.pop();)o(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(o,s,c){if(this.__initialized&&!this.__updating[o]&&(o=this.lookupProp(o),o in t)){if(c==null&&!this[o])return;this[o]=t[o].parse?$w(c):c}}lookupProp(o){if(t)return n.find(s=>o===s||o===t[s].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(o){this.__releaseCallbacks.push(o)}addPropertyChangedCallback(o){this.__propertyChangedCallbacks.push(o)}}}function M6(e,t={},n={}){const{BaseElement:r=HTMLElement,extension:o}=n;return s=>{let c=customElements.get(e);return c?(c.prototype.Component=s,c):(c=U6(r,B6(t)),c.prototype.Component=s,c.prototype.registeredTag=e,customElements.define(e,c,o),c)}}function H6(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const[o,s]=dt(e[t[r]]);Object.defineProperty(n,t[r],{get:o,set(c){s(()=>c)}})}return n}function j6(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&!(t.assignedSlot&&t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function D6(e){return(t,n)=>{const{element:r}=n;return Ll(o=>{const s=H6(t);r.addPropertyChangedCallback((d,f)=>s[d]=f),r.addReleaseCallback(()=>{r.renderRoot.textContent="",o()});const c=e(s,n);return xe(r.renderRoot,c)},j6(r))}}function q6(e,t,n){return arguments.length===2&&(n=t,t={}),M6(e,t)(D6(n))}const V6=`#ztr-content,
#ztr-content img {
  max-width: 100%;
}

#ztr-root {
  display: flex;
  flex-direction: column;
  font-family: var(--ztr-font);
  font-size: var(--ztr-font-size);
  color: var(--ztr-text-color);
  border: 1px solid transparent;
  word-wrap: break-word;
  /* removes margin collapse */
  margin-top: 4em;
  line-height: 1.2em;
}

#ztr-subtitle {
  font-size: 1.2em;
  color: #666;
}

a {
  color: var(--ztr-link-color);
  text-decoration: none;
}

/* Comment */

.ztr-comment {
  position: relative;
  margin: 0;
  padding: 0;
}

.ztr-comment,
.ztr-reply-button {
  background-color: var(--ztr-background-color, rgba(0, 0, 0, 0.03));
}

.ztr-comment-body {
  padding: 1em;
}

.ztr-comment:first-child {
  border-top-left-radius: 0.3em;
  border-top-right-radius: 0.3em;
}

.ztr-comment:last-child {
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}

.ztr-comment-info-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ztr-comment-info {
  display: flex;
  align-items: center;
}

.ztr-comment-info-picture {
  width: 3.5em;
}

ul.ztr-comment-info-items {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.9em;
}

ul.ztr-comment-info-items li {
  display: inline-block;
  cursor: default;
  padding-right: 0.5em;
}

ul.ztr-comment-info-items li a {
  font-weight: 600;
}

.ztr-comment-info-author a {
  font-size: 1.2em;
  padding-right: 0.2em;
}

.ztr-comment-info-dots {
  cursor: pointer;
}

.ztr-comment-info-separator {
  width: 0.5em;
}

.ztr-comment-info-picture img {
  width: 2em;
  height: 2em;
  border-radius: 50%;
  padding: 0.5em;
  position: relative;
  display: block;
  object-fit: cover;
}

.ztr-comment-text,
#ztr-content {
  margin-bottom: 0.75em;
  padding: 0 0.8em 0 3.5em;
  line-height: 1.5em;
  line-break: loose;
  word-break: break-word;
  overflow: hidden;
  max-width: 750px;
}

.ztr-comment-text p {
  margin: 0 0 0.5em 0;
}

.ztr-comment-text code {
  font-size: 1.1em;
  margin: 0 0.2em;
}

.ztr-comment-text pre,
.ztr-info-pane pre {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  word-wrap: break-word;
}

.ztr-comment-text a:hover {
  text-decoration: underline;
}

.ztr-comment-text img {
  max-width: 100%;
}

.ztr-comment-text .warning {
  margin-top: 0em;
  font-size: 0.8em;
  display: flex;
  align-items: center;
}

.ztr-comment-text .warning svg {
  height: 1.2em;
  fill: #e4984d;
  padding-right: 0.7em;
}

.ztr-comment-replies {
  margin-left: 2em;
}

.highlight p {
  background: #F6AD55;
  color: #2B2B2B;
  display: inline;
  padding: 0.2em;
}

/* Styling the reply to comment form */

.ztr-comment-expand {
  display: flex;
  justify-content: center;
}

.ztr-comment-expand span {
  margin: 1em 0 1em 0.35em;
  cursor: pointer;
}

ul.ztr-comment-actions,
.ztr-comment-expand {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0 0 0 3.5em;
  font-weight: 600;
  user-select: none;
}

ul.ztr-comment-actions li {
  display: inline-flex;
  align-items: center;
  text-align: center;
  padding: 0 2em 0 0;
  cursor: pointer;
}

ul.ztr-comment-actions li span {
  padding: 0.25em 0.25em 0 0.25em;
  color: var(--ztr-icon-color, #3B3B3B);
}

svg {
  fill: var(--ztr-icon-color, #3B3B3B);
  width: 1.1em;
  height: 1.1em;
}

.ztr-comment-action-reply:hover svg {
  fill: #92379c;
}

.ztr-comment-action-reply:hover span {
  color: #92379c;
}

.ztr-comment-action-zap:hover svg {
  fill: #e4984d;
}

.ztr-comment-action-zap:hover span {
  color: #e4984d;
}

.ztr-comment-action-like:hover svg {
  fill: #e35428;
}

.ztr-comment-action-like:hover span {
  color: #e35428;
}

.ztr-reply-form {
  padding: 0 0.5em 0 3.5em;
}

.ztr-reply-form textarea {
  font-family: var(--ztr-font);
  font-size: 1.1em;
  line-height: 1.4;
  color: #2B2B2B;
  background-color: #FDFDFD;
  border: 1px solid #BBB;
  outline: none;
  width: calc(100% - 1.5em);
  padding: 0.7em;
  margin: 0.5em 0;
  height: 4em;
  border-radius: 0.2em;
  min-height: 4em;
  resize: vertical;
}

.ztr-reply-form:disabled {
  opacity: 65%;
  user-select: none;
}

.ztr-reply-controls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.ztr-reply-controls span {
  font-weight: bold;
  font-size: 0.85em;
  margin-right: 1em;
  user-select: none;
  cursor: default;
}

.ztr-reply-error {
  color: rgb(202, 23, 23);
}

.ztr-reply-controls button {
  font-family: var(--ztr-font);
  appearance: none;
  border: none;
  padding: 0.5em 1em;
  border-radius: 0.2em;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

.ztr-reply-login-button {
  color: white;
  background-color: var(--ztr-login-button-color, #2B2B2B);
  margin-left: 1em;
}

.ztr-reply-button {
  color: var(--ztr-text-color);
  display: flex;
  align-items: center;
}

.ztr-info-pane {
  padding: 0 0.5em 1em 3.5em;
}

.ztr-info-pane pre {
  font-size: 0.8em;
}

.ztr-spinner {
  width: 1.2em;
  height: 1.2em;
  padding: 0.9em;
  animation: rotate 4s linear infinite;
}

.ztr-reply-button:disabled {
  opacity: 65%;
  pointer-events: none;
  cursor: pointer;
  user-select: none;
}

.ztr-spinner .path {
  stroke: var(--ztr-text-color, #2B2B2B);
  stroke-linecap: round;
  animation: dash 1.5s ease-in-out infinite;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }

  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* new */

.ztr-comment-new .ztr-reply-form {
  margin: 0.5em 0;
  padding: 0;
}

.ztr-comment-new .ztr-comment-body {
  padding: 0;
}

.ztr-comment-new .ztr-comment-actions {
  font-size: 1.1em;
  padding: 0;
}

/* Dark mode defaults */

@media (prefers-color-scheme: dark) {
  .ztr-spinner .path {
    stroke: var(--ztr-text-color, #DEDEDE);
  }

  .ztr-comment,
  .ztr-reply-button {
    background-color: var(--ztr-background-color, rgba(255, 255, 255, 0.06));
  }

  .ztr-reply-login-button {
    color: #2B2B2B;
    background-color: var(--ztr-login-button-color, #DEDEDE);
  }

  svg {
    fill: var(--ztr-icon-color, #DEDEDE);
  }

  ul.ztr-comment-actions li span {
    color: var(--ztr-icon-color);
  }

  .ztr-comment-action-reply:hover svg {
    fill: #96609c;
  }

  .ztr-comment-action-reply:hover span {
    color: #96609c;
  }
}`;function Pp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Tw(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function F6(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Pp(e.outputLen),Pp(e.blockLen)}function xa(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function W6(e,t){Tw(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pw=e=>e instanceof Uint8Array,Uu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Tn=(e,t)=>e<<32-t|e>>>t,K6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!K6)throw new Error("Non little-endian hardware is not supported");function G6(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Nd(e){if(typeof e=="string"&&(e=G6(e)),!Pw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Z6(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Pw(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let Lw=class{clone(){return this._cloneInto()}};function Y6(e){const t=r=>e().update(Nd(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Cw(e=32){if(zu&&typeof zu.getRandomValues=="function")return zu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function J6(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),d=Number(n&s),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}let X6=class extends Lw{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Uu(this.buffer)}update(t){xa(this);const{view:n,buffer:r,blockLen:o}=this;t=Nd(t);const s=t.length;for(let c=0;c<s;){const d=Math.min(o-this.pos,s-c);if(d===o){const f=Uu(t);for(;o<=s-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){xa(this),W6(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let m=c;m<o;m++)n[m]=0;J6(r,o-8,BigInt(this.length*8),s),this.process(r,0);const d=Uu(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)d.setUint32(4*m,y[m],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}};const Q6=(e,t,n)=>e&t^~e&n,ek=(e,t,n)=>e&t^e&n^t&n,tk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ir=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Or=new Uint32Array(64);let nk=class extends X6{constructor(){super(64,32,8,!1),this.A=Ir[0]|0,this.B=Ir[1]|0,this.C=Ir[2]|0,this.D=Ir[3]|0,this.E=Ir[4]|0,this.F=Ir[5]|0,this.G=Ir[6]|0,this.H=Ir[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:d,H:f}=this;return[t,n,r,o,s,c,d,f]}set(t,n,r,o,s,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let m=0;m<16;m++,n+=4)Or[m]=t.getUint32(n,!1);for(let m=16;m<64;m++){const E=Or[m-15],P=Or[m-2],B=Tn(E,7)^Tn(E,18)^E>>>3,A=Tn(P,17)^Tn(P,19)^P>>>10;Or[m]=A+Or[m-7]+B+Or[m-16]|0}let{A:r,B:o,C:s,D:c,E:d,F:f,G:h,H:y}=this;for(let m=0;m<64;m++){const E=Tn(d,6)^Tn(d,11)^Tn(d,25),P=y+E+Q6(d,f,h)+tk[m]+Or[m]|0,A=(Tn(r,2)^Tn(r,13)^Tn(r,22))+ek(r,o,s)|0;y=h,h=f,f=d,d=c+P|0,c=s,s=o,o=r,r=P+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,d,f,h,y)}roundClean(){Or.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Bl=Y6(()=>new nk);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bw=BigInt(0),wc=BigInt(1),rk=BigInt(2),mc=e=>e instanceof Uint8Array,ok=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function _i(e){if(!mc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ok[e[n]];return t}function Iw(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Rd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Ei(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Wt(e){return Rd(_i(e))}function zd(e){if(!mc(e))throw new Error("Uint8Array expected");return Rd(_i(Uint8Array.from(e).reverse()))}function Xr(e,t){return Ei(e.toString(16).padStart(t*2,"0"))}function Ud(e,t){return Xr(e,t).reverse()}function ik(e){return Ei(Iw(e))}function Pt(e,t,n){let r;if(typeof t=="string")try{r=Ei(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(mc(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Oo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!mc(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function sk(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ak(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ck(e){let t;for(t=0;e>Bw;e>>=wc,t+=1);return t}function uk(e,t){return e>>BigInt(t)&wc}const lk=(e,t,n)=>e|(n?wc:Bw)<<BigInt(t),Md=e=>(rk<<BigInt(e-1))-wc,Mu=e=>new Uint8Array(e),Lp=e=>Uint8Array.from(e);function Ow(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Mu(e),o=Mu(e),s=0;const c=()=>{r.fill(1),o.fill(0),s=0},d=(...m)=>n(o,r,...m),f=(m=Mu())=>{o=d(Lp([0]),m),r=d(),m.length!==0&&(o=d(Lp([1]),m),r=d())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const E=[];for(;m<t;){r=d();const P=r.slice();E.push(P),m+=r.length}return Oo(...E)};return(m,E)=>{c(),f(m);let P;for(;!(P=E(h()));)f();return c(),P}}const dk={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function As(e,t,n={}){const r=(o,s,c)=>{const d=dk[s];if(typeof d!="function")throw new Error(`Invalid validator "${s}", expected function`);const f=e[o];if(!(c&&f===void 0)&&!d(f,e))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const fk=Object.freeze(Object.defineProperty({__proto__:null,bitGet:uk,bitLen:ck,bitMask:Md,bitSet:lk,bytesToHex:_i,bytesToNumberBE:Wt,bytesToNumberLE:zd,concatBytes:Oo,createHmacDrbg:Ow,ensureBytes:Pt,equalBytes:sk,hexToBytes:Ei,hexToNumber:Rd,numberToBytesBE:Xr,numberToBytesLE:Ud,numberToHexUnpadded:Iw,numberToVarBytesBE:ik,utf8ToBytes:ak,validateObject:As},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bt=BigInt(0),it=BigInt(1),ko=BigInt(2),hk=BigInt(3),Il=BigInt(4),Cp=BigInt(5),Bp=BigInt(8);BigInt(9);BigInt(16);function kt(e,t){const n=e%t;return n>=bt?n:t+n}function pk(e,t,n){if(n<=bt||t<bt)throw new Error("Expected power/modulo > 0");if(n===it)return bt;let r=it;for(;t>bt;)t&it&&(r=r*e%n),e=e*e%n,t>>=it;return r}function nn(e,t,n){let r=e;for(;t-- >bt;)r*=r,r%=n;return r}function Ol(e,t){if(e===bt||t<=bt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=kt(e,t),r=t,o=bt,s=it;for(;n!==bt;){const d=r/n,f=r%n,h=o-s*d;r=n,n=f,o=s,s=h}if(r!==it)throw new Error("invert: does not exist");return kt(o,t)}function gk(e){const t=(e-it)/ko;let n,r,o;for(n=e-it,r=0;n%ko===bt;n/=ko,r++);for(o=ko;o<e&&pk(o,t,e)!==e-it;o++);if(r===1){const c=(e+it)/Il;return function(f,h){const y=f.pow(h,c);if(!f.eql(f.sqr(y),h))throw new Error("Cannot find square root");return y}}const s=(n+it)/ko;return function(d,f){if(d.pow(f,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let h=r,y=d.pow(d.mul(d.ONE,o),n),m=d.pow(f,s),E=d.pow(f,n);for(;!d.eql(E,d.ONE);){if(d.eql(E,d.ZERO))return d.ZERO;let P=1;for(let A=d.sqr(E);P<h&&!d.eql(A,d.ONE);P++)A=d.sqr(A);const B=d.pow(y,it<<BigInt(h-P-1));y=d.sqr(B),m=d.mul(m,B),E=d.mul(E,y),h=P}return m}}function wk(e){if(e%Il===hk){const t=(e+it)/Il;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%Bp===Cp){const t=(e-Cp)/Bp;return function(r,o){const s=r.mul(o,ko),c=r.pow(s,t),d=r.mul(o,c),f=r.mul(r.mul(d,ko),c),h=r.mul(d,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return gk(e)}const mk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bk(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mk.reduce((r,o)=>(r[o]="function",r),t);return As(e,n)}function yk(e,t,n){if(n<bt)throw new Error("Expected power > 0");if(n===bt)return e.ONE;if(n===it)return t;let r=e.ONE,o=t;for(;n>bt;)n&it&&(r=e.mul(r,o)),o=e.sqr(o),n>>=it;return r}function vk(e,t){const n=new Array(t.length),r=t.reduce((s,c,d)=>e.is0(c)?s:(n[d]=s,e.mul(s,c)),e.ONE),o=e.inv(r);return t.reduceRight((s,c,d)=>e.is0(c)?s:(n[d]=e.mul(s,n[d]),e.mul(s,c)),o),n}function Nw(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _k(e,t,n=!1,r={}){if(e<=bt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:s}=Nw(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=wk(e),d=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:Md(o),ZERO:bt,ONE:it,create:f=>kt(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return bt<=f&&f<e},is0:f=>f===bt,isOdd:f=>(f&it)===it,neg:f=>kt(-f,e),eql:(f,h)=>f===h,sqr:f=>kt(f*f,e),add:(f,h)=>kt(f+h,e),sub:(f,h)=>kt(f-h,e),mul:(f,h)=>kt(f*h,e),pow:(f,h)=>yk(d,f,h),div:(f,h)=>kt(f*Ol(h,e),e),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Ol(f,e),sqrt:r.sqrt||(f=>c(d,f)),invertBatch:f=>vk(d,f),cmov:(f,h,y)=>y?h:f,toBytes:f=>n?Ud(f,s):Xr(f,s),fromBytes:f=>{if(f.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${f.length}`);return n?zd(f):Wt(f)}});return Object.freeze(d)}function Rw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function zw(e){const t=Rw(e);return t+Math.ceil(t/2)}function Ek(e,t,n=!1){const r=e.length,o=Rw(t),s=zw(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const c=n?Wt(e):zd(e),d=kt(c,t-it)+it;return n?Ud(d,o):Xr(d,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kk=BigInt(0),Hu=BigInt(1);function Ak(e,t){const n=(o,s)=>{const c=s.negate();return o?c:s},r=o=>{const s=Math.ceil(t/o)+1,c=2**(o-1);return{windows:s,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,s){let c=e.ZERO,d=o;for(;s>kk;)s&Hu&&(c=c.add(d)),d=d.double(),s>>=Hu;return c},precomputeWindow(o,s){const{windows:c,windowSize:d}=r(s),f=[];let h=o,y=h;for(let m=0;m<c;m++){y=h,f.push(y);for(let E=1;E<d;E++)y=y.add(h),f.push(y);h=y.double()}return f},wNAF(o,s,c){const{windows:d,windowSize:f}=r(o);let h=e.ZERO,y=e.BASE;const m=BigInt(2**o-1),E=2**o,P=BigInt(o);for(let B=0;B<d;B++){const A=B*f;let O=Number(c&m);c>>=P,O>f&&(O-=E,c+=Hu);const M=A,T=A+Math.abs(O)-1,N=B%2!==0,l=O<0;O===0?y=y.add(n(N,s[M])):h=h.add(n(l,s[T]))}return{p:h,f:y}},wNAFCached(o,s,c,d){const f=o._WINDOW_SIZE||1;let h=s.get(o);return h||(h=this.precomputeWindow(o,f),f!==1&&s.set(o,d(h))),this.wNAF(f,h,c)}}}function Uw(e){return bk(e.Fp),As(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Nw(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sk(e){const t=Uw(e);As(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:$k,hexToBytes:xk}=fk,xo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=xo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:$k(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=xo,n=typeof e=="string"?xk(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=xo._parseInt(n.subarray(2)),{d:c,l:d}=xo._parseInt(s);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const y=h.toString(16);return y.length&1?`0${y}`:y},r=t(n(e.s)),o=t(n(e.r)),s=r.length/2,c=o.length/2,d=n(s),f=n(c);return`30${n(c+s+4)}02${f}${o}02${d}${r}`}},Qn=BigInt(0),on=BigInt(1);BigInt(2);const Ip=BigInt(3);BigInt(4);function Tk(e){const t=Sk(e),{Fp:n}=t,r=t.toBytes||((B,A,O)=>{const M=A.toAffine();return Oo(Uint8Array.from([4]),n.toBytes(M.x),n.toBytes(M.y))}),o=t.fromBytes||(B=>{const A=B.subarray(1),O=n.fromBytes(A.subarray(0,n.BYTES)),M=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:O,y:M}});function s(B){const{a:A,b:O}=t,M=n.sqr(B),T=n.mul(M,B);return n.add(n.add(T,n.mul(B,A)),O)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function c(B){return typeof B=="bigint"&&Qn<B&&B<t.n}function d(B){if(!c(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(B){const{allowedPrivateKeyLengths:A,nByteLength:O,wrapPrivateKey:M,n:T}=t;if(A&&typeof B!="bigint"){if(B instanceof Uint8Array&&(B=_i(B)),typeof B!="string"||!A.includes(B.length))throw new Error("Invalid key");B=B.padStart(O*2,"0")}let N;try{N=typeof B=="bigint"?B:Wt(Pt("private key",B,O))}catch{throw new Error(`private key must be ${O} bytes, hex or bigint, not ${typeof B}`)}return M&&(N=kt(N,T)),d(N),N}const h=new Map;function y(B){if(!(B instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(A,O,M){if(this.px=A,this.py=O,this.pz=M,A==null||!n.isValid(A))throw new Error("x required");if(O==null||!n.isValid(O))throw new Error("y required");if(M==null||!n.isValid(M))throw new Error("z required")}static fromAffine(A){const{x:O,y:M}=A||{};if(!A||!n.isValid(O)||!n.isValid(M))throw new Error("invalid affine point");if(A instanceof m)throw new Error("projective point not allowed");const T=N=>n.eql(N,n.ZERO);return T(O)&&T(M)?m.ZERO:new m(O,M,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const O=n.invertBatch(A.map(M=>M.pz));return A.map((M,T)=>M.toAffine(O[T])).map(m.fromAffine)}static fromHex(A){const O=m.fromAffine(o(Pt("pointHex",A)));return O.assertValidity(),O}static fromPrivateKey(A){return m.BASE.multiply(f(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:O}=this.toAffine();if(!n.isValid(A)||!n.isValid(O))throw new Error("bad point: x or y not FE");const M=n.sqr(O),T=s(A);if(!n.eql(M,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){y(A);const{px:O,py:M,pz:T}=this,{px:N,py:l,pz:w}=A,p=n.eql(n.mul(O,w),n.mul(N,T)),v=n.eql(n.mul(M,w),n.mul(l,T));return p&&v}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:O}=t,M=n.mul(O,Ip),{px:T,py:N,pz:l}=this;let w=n.ZERO,p=n.ZERO,v=n.ZERO,$=n.mul(T,T),R=n.mul(N,N),L=n.mul(l,l),_=n.mul(T,N);return _=n.add(_,_),v=n.mul(T,l),v=n.add(v,v),w=n.mul(A,v),p=n.mul(M,L),p=n.add(w,p),w=n.sub(R,p),p=n.add(R,p),p=n.mul(w,p),w=n.mul(_,w),v=n.mul(M,v),L=n.mul(A,L),_=n.sub($,L),_=n.mul(A,_),_=n.add(_,v),v=n.add($,$),$=n.add(v,$),$=n.add($,L),$=n.mul($,_),p=n.add(p,$),L=n.mul(N,l),L=n.add(L,L),$=n.mul(L,_),w=n.sub(w,$),v=n.mul(L,R),v=n.add(v,v),v=n.add(v,v),new m(w,p,v)}add(A){y(A);const{px:O,py:M,pz:T}=this,{px:N,py:l,pz:w}=A;let p=n.ZERO,v=n.ZERO,$=n.ZERO;const R=t.a,L=n.mul(t.b,Ip);let _=n.mul(O,N),x=n.mul(M,l),z=n.mul(T,w),q=n.add(O,M),I=n.add(N,l);q=n.mul(q,I),I=n.add(_,x),q=n.sub(q,I),I=n.add(O,T);let S=n.add(N,w);return I=n.mul(I,S),S=n.add(_,z),I=n.sub(I,S),S=n.add(M,T),p=n.add(l,w),S=n.mul(S,p),p=n.add(x,z),S=n.sub(S,p),$=n.mul(R,I),p=n.mul(L,z),$=n.add(p,$),p=n.sub(x,$),$=n.add(x,$),v=n.mul(p,$),x=n.add(_,_),x=n.add(x,_),z=n.mul(R,z),I=n.mul(L,I),x=n.add(x,z),z=n.sub(_,z),z=n.mul(R,z),I=n.add(I,z),_=n.mul(x,I),v=n.add(v,_),_=n.mul(S,I),p=n.mul(q,p),p=n.sub(p,_),_=n.mul(q,x),$=n.mul(S,$),$=n.add($,_),new m(p,v,$)}subtract(A){return this.add(A.negate())}is0(){return this.equals(m.ZERO)}wNAF(A){return P.wNAFCached(this,h,A,O=>{const M=n.invertBatch(O.map(T=>T.pz));return O.map((T,N)=>T.toAffine(M[N])).map(m.fromAffine)})}multiplyUnsafe(A){const O=m.ZERO;if(A===Qn)return O;if(d(A),A===on)return this;const{endo:M}=t;if(!M)return P.unsafeLadder(this,A);let{k1neg:T,k1:N,k2neg:l,k2:w}=M.splitScalar(A),p=O,v=O,$=this;for(;N>Qn||w>Qn;)N&on&&(p=p.add($)),w&on&&(v=v.add($)),$=$.double(),N>>=on,w>>=on;return T&&(p=p.negate()),l&&(v=v.negate()),v=new m(n.mul(v.px,M.beta),v.py,v.pz),p.add(v)}multiply(A){d(A);let O=A,M,T;const{endo:N}=t;if(N){const{k1neg:l,k1:w,k2neg:p,k2:v}=N.splitScalar(O);let{p:$,f:R}=this.wNAF(w),{p:L,f:_}=this.wNAF(v);$=P.constTimeNegate(l,$),L=P.constTimeNegate(p,L),L=new m(n.mul(L.px,N.beta),L.py,L.pz),M=$.add(L),T=R.add(_)}else{const{p:l,f:w}=this.wNAF(O);M=l,T=w}return m.normalizeZ([M,T])[0]}multiplyAndAddUnsafe(A,O,M){const T=m.BASE,N=(w,p)=>p===Qn||p===on||!w.equals(T)?w.multiplyUnsafe(p):w.multiply(p),l=N(this,O).add(N(A,M));return l.is0()?void 0:l}toAffine(A){const{px:O,py:M,pz:T}=this,N=this.is0();A==null&&(A=N?n.ONE:n.inv(T));const l=n.mul(O,A),w=n.mul(M,A),p=n.mul(T,A);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:l,y:w}}isTorsionFree(){const{h:A,isTorsionFree:O}=t;if(A===on)return!0;if(O)return O(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:O}=t;return A===on?this:O?O(m,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(m,this,A)}toHex(A=!0){return _i(this.toRawBytes(A))}}m.BASE=new m(t.Gx,t.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const E=t.nBitLength,P=Ak(m,t.endo?Math.ceil(E/2):E);return{CURVE:t,ProjectivePoint:m,normPrivateKeyToScalar:f,weierstrassEquation:s,isWithinCurveOrder:c}}function Pk(e){const t=Uw(e);return As(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Lk(e){const t=Pk(e),{Fp:n,n:r}=t,o=n.BYTES+1,s=2*n.BYTES+1;function c(I){return Qn<I&&I<n.ORDER}function d(I){return kt(I,r)}function f(I){return Ol(I,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:y,weierstrassEquation:m,isWithinCurveOrder:E}=Tk({...t,toBytes(I,S,D){const W=S.toAffine(),K=n.toBytes(W.x),Z=Oo;return D?Z(Uint8Array.from([S.hasEvenY()?2:3]),K):Z(Uint8Array.from([4]),K,n.toBytes(W.y))},fromBytes(I){const S=I.length,D=I[0],W=I.subarray(1);if(S===o&&(D===2||D===3)){const K=Wt(W);if(!c(K))throw new Error("Point is not on curve");const Z=m(K);let G=n.sqrt(Z);const oe=(G&on)===on;return(D&1)===1!==oe&&(G=n.neg(G)),{x:K,y:G}}else if(S===s&&D===4){const K=n.fromBytes(W.subarray(0,n.BYTES)),Z=n.fromBytes(W.subarray(n.BYTES,2*n.BYTES));return{x:K,y:Z}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),P=I=>_i(Xr(I,t.nByteLength));function B(I){const S=r>>on;return I>S}function A(I){return B(I)?d(-I):I}const O=(I,S,D)=>Wt(I.slice(S,D));class M{constructor(S,D,W){this.r=S,this.s=D,this.recovery=W,this.assertValidity()}static fromCompact(S){const D=t.nByteLength;return S=Pt("compactSignature",S,D*2),new M(O(S,0,D),O(S,D,2*D))}static fromDER(S){const{r:D,s:W}=xo.toSig(Pt("DER",S));return new M(D,W)}assertValidity(){if(!E(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!E(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new M(this.r,this.s,S)}recoverPublicKey(S){const{r:D,s:W,recovery:K}=this,Z=v(Pt("msgHash",S));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const G=K===2||K===3?D+t.n:D;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const oe=K&1?"03":"02",he=h.fromHex(oe+P(G)),be=f(G),Se=d(-Z*be),re=d(W*be),ye=h.BASE.multiplyAndAddUnsafe(he,Se,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return Ei(this.toDERHex())}toDERHex(){return xo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ei(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}const T={isValidPrivateKey(I){try{return y(I),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const I=zw(t.n);return Ek(t.randomBytes(I),t.n)},precompute(I=8,S=h.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}};function N(I,S=!0){return h.fromPrivateKey(I).toRawBytes(S)}function l(I){const S=I instanceof Uint8Array,D=typeof I=="string",W=(S||D)&&I.length;return S?W===o||W===s:D?W===2*o||W===2*s:I instanceof h}function w(I,S,D=!0){if(l(I))throw new Error("first arg must be private key");if(!l(S))throw new Error("second arg must be public key");return h.fromHex(S).multiply(y(I)).toRawBytes(D)}const p=t.bits2int||function(I){const S=Wt(I),D=I.length*8-t.nBitLength;return D>0?S>>BigInt(D):S},v=t.bits2int_modN||function(I){return d(p(I))},$=Md(t.nBitLength);function R(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Qn<=I&&I<$))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Xr(I,t.nByteLength)}function L(I,S,D=_){if(["recovered","canonical"].some(Oe=>Oe in D))throw new Error("sign() legacy options not supported");const{hash:W,randomBytes:K}=t;let{lowS:Z,prehash:G,extraEntropy:oe}=D;Z==null&&(Z=!0),I=Pt("msgHash",I),G&&(I=Pt("prehashed msgHash",W(I)));const he=v(I),be=y(S),Se=[R(be),R(he)];if(oe!=null){const Oe=oe===!0?K(n.BYTES):oe;Se.push(Pt("extraEntropy",Oe))}const re=Oo(...Se),ye=he;function Be(Oe){const Me=p(Oe);if(!E(Me))return;const pt=f(Me),We=h.BASE.multiply(Me).toAffine(),se=d(We.x);if(se===Qn)return;const Re=d(pt*d(ye+se*be));if(Re===Qn)return;let Te=(We.x===se?0:2)|Number(We.y&on),Pe=Re;return Z&&B(Re)&&(Pe=A(Re),Te^=1),new M(se,Pe,Te)}return{seed:re,k2sig:Be}}const _={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};function z(I,S,D=_){const{seed:W,k2sig:K}=L(I,S,D),Z=t;return Ow(Z.hash.outputLen,Z.nByteLength,Z.hmac)(W,K)}h.BASE._setWindowSize(8);function q(I,S,D,W=x){var K;const Z=I;if(S=Pt("msgHash",S),D=Pt("publicKey",D),"strict"in W)throw new Error("options.strict was renamed to lowS");const{lowS:G,prehash:oe}=W;let he,be;try{if(typeof Z=="string"||Z instanceof Uint8Array)try{he=M.fromDER(Z)}catch(se){if(!(se instanceof xo.Err))throw se;he=M.fromCompact(Z)}else if(typeof Z=="object"&&typeof Z.r=="bigint"&&typeof Z.s=="bigint"){const{r:se,s:Re}=Z;he=new M(se,Re)}else throw new Error("PARSE");be=h.fromHex(D)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(G&&he.hasHighS())return!1;oe&&(S=t.hash(S));const{r:Se,s:re}=he,ye=v(S),Be=f(re),Oe=d(ye*Be),Me=d(Se*Be),pt=(K=h.BASE.multiplyAndAddUnsafe(be,Oe,Me))==null?void 0:K.toAffine();return pt?d(pt.x)===Se:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:w,sign:z,verify:q,ProjectivePoint:h,Signature:M,utils:T}}class Mw extends Lw{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,F6(t);const r=Nd(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return xa(this),this.iHash.update(t),this}digestInto(t){xa(this),Tw(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:c,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=c,t.outputLen=d,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Hw=(e,t,n)=>new Mw(e,t).update(n).digest();Hw.create=(e,t)=>new Mw(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ck(e){return{hash:e,hmac:(t,...n)=>Hw(e,t,Z6(...n)),randomBytes:Cw}}function Bk(e,t){const n=r=>Lk({...e,...Ck(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ta=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jw=BigInt(1),Pa=BigInt(2),Op=(e,t)=>(e+t/Pa)/t;function Dw(e){const t=bc,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),c=BigInt(23),d=BigInt(44),f=BigInt(88),h=e*e*e%t,y=h*h*e%t,m=nn(y,n,t)*y%t,E=nn(m,n,t)*y%t,P=nn(E,Pa,t)*h%t,B=nn(P,o,t)*P%t,A=nn(B,s,t)*B%t,O=nn(A,d,t)*A%t,M=nn(O,f,t)*O%t,T=nn(M,d,t)*A%t,N=nn(T,n,t)*y%t,l=nn(N,c,t)*B%t,w=nn(l,r,t)*h%t,p=nn(w,Pa,t);if(!Nl.eql(Nl.sqr(p),e))throw new Error("Cannot find square root");return p}const Nl=_k(bc,void 0,void 0,{sqrt:Dw}),Hd=Bk({a:BigInt(0),b:BigInt(7),Fp:Nl,n:Ta,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ta,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-jw*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,c=BigInt("0x100000000000000000000000000000000"),d=Op(s*e,t),f=Op(-r*e,t);let h=kt(e-d*n-f*o,t),y=kt(-d*r-f*s,t);const m=h>c,E=y>c;if(m&&(h=t-h),E&&(y=t-y),h>c||y>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:h,k2neg:E,k2:y}}}},Bl),yc=BigInt(0),qw=e=>typeof e=="bigint"&&yc<e&&e<bc,Ik=e=>typeof e=="bigint"&&yc<e&&e<Ta,Np={};function La(e,...t){let n=Np[e];if(n===void 0){const r=Bl(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Oo(r,r),Np[e]=n}return Bl(Oo(n,...t))}const jd=e=>e.toRawBytes(!0).slice(1),Rl=e=>Xr(e,32),ju=e=>kt(e,bc),ds=e=>kt(e,Ta),Dd=Hd.ProjectivePoint,Ok=(e,t,n)=>Dd.BASE.multiplyAndAddUnsafe(e,t,n);function zl(e){let t=Hd.utils.normPrivateKeyToScalar(e),n=Dd.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:ds(-t),bytes:jd(n)}}function Vw(e){if(!qw(e))throw new Error("bad x: need 0 < x < p");const t=ju(e*e),n=ju(t*e+BigInt(7));let r=Dw(n);r%Pa!==yc&&(r=ju(-r));const o=new Dd(e,r,jw);return o.assertValidity(),o}function Fw(...e){return ds(Wt(La("BIP0340/challenge",...e)))}function Nk(e){return zl(e).bytes}function Rk(e,t,n=Cw(32)){const r=Pt("message",e),{bytes:o,scalar:s}=zl(t),c=Pt("auxRand",n,32),d=Rl(s^Wt(La("BIP0340/aux",c))),f=La("BIP0340/nonce",d,o,r),h=ds(Wt(f));if(h===yc)throw new Error("sign failed: k is zero");const{bytes:y,scalar:m}=zl(h),E=Fw(y,o,r),P=new Uint8Array(64);if(P.set(y,0),P.set(Rl(ds(m+E*s)),32),!Ww(P,r,o))throw new Error("sign: Invalid signature produced");return P}function Ww(e,t,n){const r=Pt("signature",e,64),o=Pt("message",t),s=Pt("publicKey",n,32);try{const c=Vw(Wt(s)),d=Wt(r.subarray(0,32));if(!qw(d))return!1;const f=Wt(r.subarray(32,64));if(!Ik(f))return!1;const h=Fw(Rl(d),jd(c),o),y=Ok(c,f,ds(-h));return!(!y||!y.hasEvenY()||y.toAffine().x!==d)}catch{return!1}}const Mt={getPublicKey:Nk,sign:Rk,verify:Ww,utils:{randomPrivateKey:Hd.utils.randomPrivateKey,lift_x:Vw,pointToBytes:jd,numberToBytesBE:Xr,bytesToNumberBE:Wt,taggedHash:La,mod:kt}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kw=e=>e instanceof Uint8Array,Du=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Pn=(e,t)=>e<<32-t|e>>>t,zk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zk)throw new Error("Non little-endian hardware is not supported");const Uk=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Je(e){if(!Kw(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Uk[e[n]];return t}function Gw(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Mk(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Zw(e){if(typeof e=="string"&&(e=Mk(e)),!Kw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class Hk{clone(){return this._cloneInto()}}function Yw(e){const t=r=>e().update(Zw(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ul(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function jk(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Jw(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Dk(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ul(e.outputLen),Ul(e.blockLen)}function qk(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Vk(e,t){Jw(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const qu={number:Ul,bool:jk,bytes:Jw,hash:Dk,exists:qk,output:Vk};function Fk(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),d=Number(n&s),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}class Wk extends Hk{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Du(this.buffer)}update(t){qu.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Zw(t);const s=t.length;for(let c=0;c<s;){const d=Math.min(o-this.pos,s-c);if(d===o){const f=Du(t);for(;o<=s-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qu.exists(this),qu.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let m=c;m<o;m++)n[m]=0;Fk(r,o-8,BigInt(this.length*8),s),this.process(r,0);const d=Du(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)d.setUint32(4*m,y[m],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}}const Kk=(e,t,n)=>e&t^~e&n,Gk=(e,t,n)=>e&t^e&n^t&n,Zk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rr=new Uint32Array(64);class Xw extends Wk{constructor(){super(64,32,8,!1),this.A=Nr[0]|0,this.B=Nr[1]|0,this.C=Nr[2]|0,this.D=Nr[3]|0,this.E=Nr[4]|0,this.F=Nr[5]|0,this.G=Nr[6]|0,this.H=Nr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:d,H:f}=this;return[t,n,r,o,s,c,d,f]}set(t,n,r,o,s,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let m=0;m<16;m++,n+=4)Rr[m]=t.getUint32(n,!1);for(let m=16;m<64;m++){const E=Rr[m-15],P=Rr[m-2],B=Pn(E,7)^Pn(E,18)^E>>>3,A=Pn(P,17)^Pn(P,19)^P>>>10;Rr[m]=A+Rr[m-7]+B+Rr[m-16]|0}let{A:r,B:o,C:s,D:c,E:d,F:f,G:h,H:y}=this;for(let m=0;m<64;m++){const E=Pn(d,6)^Pn(d,11)^Pn(d,25),P=y+E+Kk(d,f,h)+Zk[m]+Rr[m]|0,A=(Pn(r,2)^Pn(r,13)^Pn(r,22))+Gk(r,o,s)|0;y=h,h=f,f=d,d=c+P|0,c=s,s=o,o=r,r=P+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,d,f,h,y)}roundClean(){Rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Yk extends Xw{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const qd=Yw(()=>new Xw);Yw(()=>new Yk);var _o=Symbol("verified"),Jk=e=>e instanceof Object;function Xk(e){if(!Jk(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var Qk=new TextEncoder;function Wi(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var e5=class{constructor(t){pe(this,"value"),pe(this,"next",null),pe(this,"prev",null),this.value=t}},t5=class{constructor(){pe(this,"first"),pe(this,"last"),this.first=null,this.last=null}enqueue(t){const n=new e5(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},n5=class{generateSecretKey(){return Mt.utils.randomPrivateKey()}getPublicKey(t){return Je(Mt.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Je(Mt.getPublicKey(n)),r.id=Vu(r),r.sig=Je(Mt.sign(Vu(r),n)),r[_o]=!0,r}verifyEvent(t){if(typeof t[_o]=="boolean")return t[_o];const n=Vu(t);if(n!==t.id)return t[_o]=!1,!1;try{const r=Mt.verify(t.sig,n,t.pubkey);return t[_o]=r,r}catch{return t[_o]=!1,!1}}};function r5(e){if(!Xk(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Vu(e){let t=qd(Qk.encode(r5(e)));return Je(t)}var vc=new n5;vc.generateSecretKey;vc.getPublicKey;vc.finalizeEvent;var o5=vc.verifyEvent,i5=22242;function s5(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,c])=>s===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function a5(e,t){for(let n=0;n<e.length;n++)if(s5(e[n],t))return!0;return!1}function c5(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function u5(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function l5(e,t){return{kind:i5,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function d5(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var f5=e=>(e[_o]=!0,!0),Qw;try{Qw=WebSocket}catch{}var em=class{constructor(t,n){pe(this,"url"),pe(this,"_connected",!1),pe(this,"onclose",null),pe(this,"onnotice",r=>console.debug(`NOTICE from ${this.url}: ${r}`)),pe(this,"_onauth",null),pe(this,"baseEoseTimeout",4400),pe(this,"connectionTimeout",4400),pe(this,"openSubs",new Map),pe(this,"connectionTimeoutHandle"),pe(this,"connectionPromise"),pe(this,"openCountRequests",new Map),pe(this,"openEventPublishes",new Map),pe(this,"ws"),pe(this,"incomingMessageQueue",new t5),pe(this,"queueRunning",!1),pe(this,"challenge"),pe(this,"serial",0),pe(this,"verifyEvent"),this.url=Wi(t),this.verifyEvent=n.verifyEvent}static async connect(t,n){const r=new em(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Qw(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var o;n(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(o=this.onclose)==null||o.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await d5();this.queueRunning=!1}handleNext(){var t,n,r;const o=this.incomingMessageQueue.dequeue();if(!o)return!1;const s=u5(o);if(s){const c=this.openSubs.get(s);if(!c)return;const d=c5(o,"id"),f=(t=c.alreadyHaveEvent)==null?void 0:t.call(c,d);if((n=c.receivedEvent)==null||n.call(c,this,d),f)return}try{let c=JSON.parse(o);switch(c[0]){case"EVENT":{const d=this.openSubs.get(c[1]),f=c[2];this.verifyEvent(f)&&a5(d.filters,f)&&d.onevent(f);return}case"COUNT":{const d=c[1],f=c[2],h=this.openCountRequests.get(d);h&&(h.resolve(f.count),this.openCountRequests.delete(d));return}case"EOSE":{const d=this.openSubs.get(c[1]);if(!d)return;d.receivedEose();return}case"OK":{const d=c[1],f=c[2],h=c[3],y=this.openEventPublishes.get(d);f?y.resolve(h):y.reject(new Error(h)),this.openEventPublishes.delete(d);return}case"CLOSED":{const d=c[1],f=this.openSubs.get(d);if(!f)return;f.closed=!0,f.close(c[2]);return}case"NOTICE":this.onnotice(c[1]);return;case"AUTH":{this.challenge=c[1],(r=this._onauth)==null||r.call(this,c[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(l5(this.url,this.challenge)),r=new Promise((o,s)=>{this.openEventPublishes.set(n.id,{resolve:o,reject:s})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),n}async count(t,n){this.serial++;const r=(n==null?void 0:n.id)||"count:"+this.serial,o=new Promise((s,c)=>{this.openCountRequests.set(r,{resolve:s,reject:c})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t)+"]"),o}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,o=new h5(this,r,t,n);return this.openSubs.set(r,o),o}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},h5=class{constructor(t,n,r,o){pe(this,"relay"),pe(this,"id"),pe(this,"closed",!1),pe(this,"eosed",!1),pe(this,"filters"),pe(this,"alreadyHaveEvent"),pe(this,"receivedEvent"),pe(this,"onevent"),pe(this,"oneose"),pe(this,"onclose"),pe(this,"eoseTimeout"),pe(this,"eoseTimeoutHandle"),this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(s=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,s)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}},p5=class{constructor(e){pe(this,"relays",new Map),pe(this,"seenOn",new Map),pe(this,"trackRelays",!1),pe(this,"verifyEvent"),pe(this,"trustedRelayURLs",new Set),this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Wi(e);let n=this.relays.get(e);return n||(n=new em(e,{verifyEvent:this.trustedRelayURLs.has(e)?f5:this.verifyEvent}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Wi).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){this.trackRelays&&(n.receivedEvent=(m,E)=>{let P=this.seenOn.get(E);P||(P=new Set,this.seenOn.set(E,P)),P.add(m)});const r=new Set,o=[],s=[];let c=m=>{var E;s[m]=!0,s.filter(P=>P).length===e.length&&((E=n.oneose)==null||E.call(n),c=()=>{})};const d=[];let f=(m,E)=>{var P;c(m),d[m]=E,d.filter(B=>B).length===e.length&&((P=n.onclose)==null||P.call(n,d),f=()=>{})};const h=m=>{var E;if((E=n.alreadyHaveEvent)!=null&&E.call(n,m))return!0;const P=r.has(m);return r.add(m),P},y=Promise.all(e.map(Wi).map(async(m,E,P)=>{if(P.indexOf(m)!==E){f(E,"duplicate url");return}let B;try{B=await this.ensureRelay(m,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(O){f(E,(O==null?void 0:O.message)||String(O));return}let A=B.subscribe(t,{...n,oneose:()=>c(E),onclose:O=>f(E,O),alreadyHaveEvent:h,eoseTimeout:n.maxWait});o.push(A)}));return{async close(){await y,o.forEach(m=>{m.close()})}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeManyEose(e,[t],{...n,onevent(s){o.push(s)},onclose(s){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,s)=>s.created_at-o.created_at),r[0]||null}publish(e,t){return e.map(Wi).map(async(n,r,o)=>o.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},g5=class extends p5{constructor(){super({verifyEvent:o5})}};const fs=Symbol("store-raw"),Nn=Symbol("store-node"),an=Symbol("store-has"),tm=Symbol("store-self");function nm(e){let t=e[Ft];if(!t&&(Object.defineProperty(e,Ft,{value:t=new Proxy(e,m5)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const c=n[o];r[c].get&&Object.defineProperty(e,c,{enumerable:r[c].enumerable,get:r[c].get.bind(t)})}}return t}function ar(e){let t;return e!=null&&typeof e=="object"&&(e[Ft]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function cr(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[fs])return n;if(!ar(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let c=0,d=e.length;c<d;c++)o=e[c],(r=cr(o,t))!==o&&(e[c]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const c=Object.keys(e),d=Object.getOwnPropertyDescriptors(e);for(let f=0,h=c.length;f<h;f++)s=c[f],!d[s].get&&(o=e[s],(r=cr(o,t))!==o&&(e[s]=r))}return e}function ki(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function No(e,t,n){if(e[t])return e[t];const[r,o]=dt(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function w5(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ft||t===Nn||(delete n.value,delete n.writable,n.get=()=>e[Ft][t]),n}function Vd(e){vi()&&No(ki(e,Nn),tm)()}function rm(e){return Vd(e),Reflect.ownKeys(e)}const m5={get(e,t,n){if(t===fs)return e;if(t===Ft)return n;if(t===ls)return Vd(e),n;const r=ki(e,Nn),o=r[t];let s=o?o():e[t];if(t===Nn||t===an||t==="__proto__")return s;if(!o){const c=Object.getOwnPropertyDescriptor(e,t);vi()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(c&&c.get)&&(s=No(r,t,s)())}return ar(s)?nm(s):s},has(e,t){return t===fs||t===Ft||t===ls||t===Nn||t===an||t==="__proto__"?!0:(vi()&&No(ki(e,an),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:rm,getOwnPropertyDescriptor:w5};function Dt(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[an]&&e[an][t]&&o!==void 0&&e[an][t].$()):(e[t]=n,e[an]&&e[an][t]&&o===void 0&&e[an][t].$());let c=ki(e,Nn),d;if((d=No(c,t,o))&&d.$(()=>n),Array.isArray(e)&&e.length!==s){for(let f=e.length;f<s;f++)(d=c[f])&&d.$();(d=No(c,"length",s))&&d.$(e.length)}(d=c[tm])&&d.$()}function om(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Dt(e,o,t[o])}}function b5(e,t){if(typeof t=="function"&&(t=t(e)),t=cr(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Dt(e,n,o)}Dt(e,"length",r)}else om(e,t)}function Ki(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const c=typeof r,d=Array.isArray(e);if(Array.isArray(r)){for(let f=0;f<r.length;f++)Ki(e,[r[f]].concat(t),n);return}else if(d&&c==="function"){for(let f=0;f<e.length;f++)r(e[f],f)&&Ki(e,[f].concat(t),n);return}else if(d&&c==="object"){const{from:f=0,to:h=e.length-1,by:y=1}=r;for(let m=f;m<=h;m+=y)Ki(e,[m].concat(t),n);return}else if(t.length>1){Ki(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=cr(s),r===void 0||ar(o)&&ar(s)&&!Array.isArray(s)?om(o,s):Dt(e,r,s))}function y5(...[e,t]){const n=cr(e||{}),r=Array.isArray(n),o=nm(n);function s(...c){si(()=>{r&&c.length===1?b5(n,c[0]):Ki(n,c)})}return[o,s]}function v5(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===Ft||t===Nn||(delete n.value,delete n.writable,n.get=()=>e[Ft][t],n.set=r=>e[Ft][t]=r),n}const _5={get(e,t,n){if(t===fs)return e;if(t===Ft)return n;if(t===ls)return Vd(e),n;const r=ki(e,Nn),o=r[t];let s=o?o():e[t];if(t===Nn||t===an||t==="__proto__")return s;if(!o){const c=Object.getOwnPropertyDescriptor(e,t),d=typeof s=="function";if(vi()&&(!d||e.hasOwnProperty(t))&&!(c&&c.get))s=No(r,t,s)();else if(s!=null&&d&&s===Array.prototype[t])return(...f)=>si(()=>Array.prototype[t].apply(n,f))}return ar(s)?im(s):s},has(e,t){return t===fs||t===Ft||t===ls||t===Nn||t===an||t==="__proto__"?!0:(vi()&&No(ki(e,an),t)(),t in e)},set(e,t,n){return si(()=>Dt(e,t,cr(n))),!0},deleteProperty(e,t){return si(()=>Dt(e,t,void 0,!0)),!0},ownKeys:rm,getOwnPropertyDescriptor:v5};function im(e){let t=e[Ft];if(!t){Object.defineProperty(e,Ft,{value:t=new Proxy(e,_5)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const c=n[o];if(r[c].get){const d=r[c].get.bind(t);Object.defineProperty(e,c,{get:d})}if(r[c].set){const d=r[c].set;Object.defineProperty(e,c,{set:h=>si(()=>d.call(t,h))})}}}return t}function Fd(e,t){const n=cr(e||{});return im(n)}const Ml=Symbol("store-root");function ei(e,t,n,r,o){const s=t[n];if(e===s)return;if(n!==Ml&&(!ar(e)||!ar(s)||o&&e[o]!==s[o])){Dt(t,n,e);return}if(Array.isArray(e)){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let f,h,y,m,E,P,B,A;for(y=0,m=Math.min(s.length,e.length);y<m&&(s[y]===e[y]||o&&s[y]&&e[y]&&s[y][o]===e[y][o]);y++)ei(e[y],s,y,r,o);const O=new Array(e.length),M=new Map;for(m=s.length-1,E=e.length-1;m>=y&&E>=y&&(s[m]===e[E]||o&&s[y]&&e[y]&&s[m][o]===e[E][o]);m--,E--)O[E]=s[m];if(y>E||y>m){for(h=y;h<=E;h++)Dt(s,h,e[h]);for(;h<e.length;h++)Dt(s,h,O[h]),ei(e[h],s,h,r,o);s.length>e.length&&Dt(s,"length",e.length);return}for(B=new Array(E+1),h=E;h>=y;h--)P=e[h],A=o&&P?P[o]:P,f=M.get(A),B[h]=f===void 0?-1:f,M.set(A,h);for(f=y;f<=m;f++)P=s[f],A=o&&P?P[o]:P,h=M.get(A),h!==void 0&&h!==-1&&(O[h]=s[f],h=B[h],M.set(A,h));for(h=y;h<e.length;h++)h in O?(Dt(s,h,O[h]),ei(e[h],s,h,r,o)):Dt(s,h,e[h])}else for(let f=0,h=e.length;f<h;f++)ei(e[f],s,f,r,o);s.length>e.length&&Dt(s,"length",e.length);return}const c=Object.keys(e);for(let f=0,h=c.length;f<h;f++)ei(e[c[f]],s,c[f],r,o);const d=Object.keys(s);for(let f=0,h=d.length;f<h;f++)e[d[f]]===void 0&&Dt(s,d[f],void 0)}function E5(e,t={}){const{merge:n,key:r="id"}=t,o=cr(e);return s=>{if(!ar(s)||!ar(o))return o;const c=ei(o,{[Ml]:s},Ml,n,r);return c===void 0?s:c}}const ci=new g5,me=Fd({rootEventIds:[],filter:{},profiles:()=>[]}),Ut=Fd({}),k5=["reply","likes","zaps","publish","watch","replyAnonymously","hideContent"],A5=e=>k5.includes(e);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function pr(...e){const t=(o,s)=>c=>o(s(c)),n=Array.from(e).reverse().reduce((o,s)=>o?t(o,s.encode):s.encode,void 0),r=e.reduce((o,s)=>o?t(o,s.decode):s.decode,void 0);return{encode:n,decode:r}}function gr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Bi(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function wr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function _c(e,t="="){if(Bi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function sm(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Rp(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],s=Array.from(e);for(s.forEach(c=>{if(Bi(c),c<0||c>=t)throw new Error(`Wrong integer: ${c}`)});;){let c=0,d=!0;for(let f=r;f<s.length;f++){const h=s[f],y=t*c+h;if(!Number.isSafeInteger(y)||t*c/t!==c||y-h!==t*c)throw new Error("convertRadix: carry overflow");if(c=y%n,s[f]=Math.floor(y/n),!Number.isSafeInteger(s[f])||s[f]*n+c!==y)throw new Error("convertRadix: carry overflow");if(d)s[f]?d=!1:r=f;else continue}if(o.push(c),d)break}for(let c=0;c<e.length-1&&e[c]===0;c++)o.push(0);return o.reverse()}const am=(e,t)=>t?am(t,e%t):e,Ca=(e,t)=>e+(t-am(e,t));function Hl(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ca(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ca(t,n)}`);let o=0,s=0;const c=2**n-1,d=[];for(const f of e){if(Bi(f),f>=2**t)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)d.push((o>>s-n&c)>>>0);o&=2**s-1}if(o=o<<n-s&c,!r&&s>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&s>0&&d.push(o>>>0),d}function S5(e){return Bi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Rp(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Rp(t,e,2**8))}}}function co(e,t=!1){if(Bi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ca(8,e)>32||Ca(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Hl(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Hl(n,e,8,t))}}}function zp(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const $5=pr(co(4),gr("0123456789ABCDEF"),wr("")),x5=pr(co(5),gr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),_c(5),wr(""));pr(co(5),gr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),_c(5),wr(""));pr(co(5),gr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),wr(""),sm(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const T5=pr(co(6),gr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),_c(6),wr("")),P5=pr(co(6),gr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),_c(6),wr("")),Wd=e=>pr(S5(58),gr(e),wr("")),jl=Wd("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Wd("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Wd("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Up=[0,2,3,5,6,7,9,10,11],L5={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=jl.encode(r).padStart(Up[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=Up.indexOf(r.length),s=jl.decode(r);for(let c=0;c<s.length-o;c++)if(s[c]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(t)}},Dl=pr(gr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),wr("")),Mp=[996825010,642813549,513874426,1027748829,705979059];function Di(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Mp.length;r++)(t>>r&1)===1&&(n^=Mp[r]);return n}function Hp(e,t,n=1){const r=e.length;let o=1;for(let s=0;s<r;s++){const c=e.charCodeAt(s);if(c<33||c>126)throw new Error(`Invalid prefix (${e})`);o=Di(o)^c>>5}o=Di(o);for(let s=0;s<r;s++)o=Di(o)^e.charCodeAt(s)&31;for(let s of t)o=Di(o)^s;for(let s=0;s<6;s++)o=Di(o);return o^=n,Dl.encode(Hl([o%2**30],30,5,!1))}function cm(e){const t=e==="bech32"?1:734539939,n=co(5),r=n.decode,o=n.encode,s=zp(r);function c(y,m,E=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(m)||m.length&&typeof m[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof m}`);const P=y.length+7+m.length;if(E!==!1&&P>E)throw new TypeError(`Length ${P} exceeds limit ${E}`);return y=y.toLowerCase(),`${y}1${Dl.encode(m)}${Hp(y,m,t)}`}function d(y,m=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||m!==!1&&y.length>m)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${m})`);const E=y.toLowerCase();if(y!==E&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=E;const P=y.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');const B=y.slice(0,P),A=y.slice(P+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");const O=Dl.decode(A).slice(0,-6),M=Hp(B,O,t);if(!A.endsWith(M))throw new Error(`Invalid checksum in ${y}: expected "${M}"`);return{prefix:B,words:O}}const f=zp(d);function h(y){const{prefix:m,words:E}=d(y,!1);return{prefix:m,words:E,bytes:r(E)}}return{encode:c,decode:d,decodeToBytes:h,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:s,toWords:o}}const Ai=cm("bech32");cm("bech32m");const C5={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},B5=pr(co(4),gr("0123456789abcdef"),wr(""),sm(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),I5={utf8:C5,hex:B5,base16:$5,base32:x5,base64:T5,base64url:P5,base58:jl,base58xmr:L5};`${Object.keys(I5).join(", ")}`;var qi=new TextDecoder("utf-8");new TextEncoder;var um=5e3;function ra(e){var t,n,r,o,s,c,d,f;let{prefix:h,words:y}=Ai.decode(e,um),m=new Uint8Array(Ai.fromWords(y));switch(h){case"nprofile":{let E=Ws(m);if(!((t=E[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(E[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Je(E[0][0]),relays:E[1]?E[1].map(P=>qi.decode(P)):[]}}}case"nevent":{let E=Ws(m);if(!((n=E[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(E[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(E[2]&&E[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(E[3]&&E[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Je(E[0][0]),relays:E[1]?E[1].map(P=>qi.decode(P)):[],author:(r=E[2])!=null&&r[0]?Je(E[2][0]):void 0,kind:(o=E[3])!=null&&o[0]?parseInt(Je(E[3][0]),16):void 0}}}case"naddr":{let E=Ws(m);if(!((s=E[0])!=null&&s[0]))throw new Error("missing TLV 0 for naddr");if(!((c=E[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(E[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((d=E[3])!=null&&d[0]))throw new Error("missing TLV 3 for naddr");if(E[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:qi.decode(E[0][0]),pubkey:Je(E[2][0]),kind:parseInt(Je(E[3][0]),16),relays:E[1]?E[1].map(P=>qi.decode(P)):[]}}}case"nrelay":{let E=Ws(m);if(!((f=E[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:qi.decode(E[0][0])}}case"nsec":return{type:h,data:m};case"npub":case"note":return{type:h,data:Je(m)};default:throw new Error(`unknown prefix ${h}`)}}function Ws(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function lm(e){return dm("npub",Gw(e))}function jp(e){return dm("note",Gw(e))}function O5(e,t){let n=Ai.toWords(t);return Ai.encode(e,n,um)}function dm(e,t){return O5(e,t)}var Vi=new TextDecoder("utf-8");new TextEncoder;var N5=5e3,R5=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function fm(e){var t,n,r,o,s,c,d,f;let{prefix:h,words:y}=Ai.decode(e,N5),m=new Uint8Array(Ai.fromWords(y));switch(h){case"nprofile":{let E=Ks(m);if(!((t=E[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(E[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Je(E[0][0]),relays:E[1]?E[1].map(P=>Vi.decode(P)):[]}}}case"nevent":{let E=Ks(m);if(!((n=E[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(E[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(E[2]&&E[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(E[3]&&E[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Je(E[0][0]),relays:E[1]?E[1].map(P=>Vi.decode(P)):[],author:(r=E[2])!=null&&r[0]?Je(E[2][0]):void 0,kind:(o=E[3])!=null&&o[0]?parseInt(Je(E[3][0]),16):void 0}}}case"naddr":{let E=Ks(m);if(!((s=E[0])!=null&&s[0]))throw new Error("missing TLV 0 for naddr");if(!((c=E[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(E[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((d=E[3])!=null&&d[0]))throw new Error("missing TLV 3 for naddr");if(E[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Vi.decode(E[0][0]),pubkey:Je(E[2][0]),kind:parseInt(Je(E[3][0]),16),relays:E[1]?E[1].map(P=>Vi.decode(P)):[]}}}case"nrelay":{let E=Ks(m);if(!((f=E[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Vi.decode(E[0][0])}}case"nsec":return{type:h,data:m};case"npub":case"note":return{type:h,data:Je(m)};default:throw new Error(`unknown prefix ${h}`)}}function Ks(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}var z5=new RegExp(`nostr:(${R5.source})`),hm=()=>new RegExp(`\\b${z5.source}\\b`,"g");function*U5(e){const t=e.matchAll(hm());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:fm(o),start:n.index,end:n.index+r.length}}catch{}}function M5(e,t){return e.replaceAll(hm(),(n,r)=>t({uri:n,value:r,decoded:fm(r)}))}var H5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pm={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(H5,function(){function n(d){return d.replace(/\\([(){}[\]#*+\-.!_\\])/g,function(f,h){return String.fromCharCode(1,o.indexOf(h)+s)}).replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(f,h,y){return h==="~~"?"<del>"+y+"</del>":"<b>"+y+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(f,h,y,m,E){return h+"<i>"+m+"</i>"+E}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(f,h,y,m,E,P){var B=P?' title="'+P+'"':"";return h?'<img src="'+c.href(E)+'" alt="'+y+'"'+B+"/>":(m&&(B+=' target="_blank"'),'<a href="'+c.href(E)+'"'+B+">"+y+"</a>")})}function r(d){return d.replace(/\x01([\x0f-\x1c])/g,function(f,h){return o.charAt(h.charCodeAt(0)-s)})}var o="\\[!]#{()}*+-._",s=16,c=function(d){return d.replace(/.+(?:\n.+)*/g,function(f){var h=/^\s{4}([^]*)$/.exec(f);if(h)return"<pre><code>"+h[1].replace(/\n    /g,`
`)+"</code></pre>";for(var y,m=[],E=n(f).split(`
`),P=0,B=E.length;B>P;++P){var A=E[P],O=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(A);if(O)m.push(y=[O[2],"h",O[1].length]);else{var M=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(A);M?m.push(y=[M[3],M[2]?"ol":"ul",M[1].length]):/^\s{0,3}([-])(\s*\1){2,}\s*$/.test(A)?m.push(y=["","hr"]):y&&y[1]!=="hr"&&y[1]!=="h"?y[0]+=`
`+A:m.push(y=[A,"p",""])}}var T="",N=[];for(P=0,B=m.length;B>P;++P){y=m[P];var l=y[0],w=y[1],p=y[2];if(w==="ul"||w==="ol")!N.length||p>N[0][1]?(N.unshift([w,p]),T+="<"+N[0][0]+"><li>"+l):N.length>1&&p<=N[1][1]?(T+="</li></"+N.shift()[0]+">",--P):T+="</li><li>"+l;else{for(;N.length;)T+="</li></"+N.shift()[0]+">";T+=w==="hr"?"<hr/>":"<"+w+p+c.headAttrs(p,l)+">"+l+"</"+w+p+">"}}for(;N.length;)T+="</li></"+N.shift()[0]+">";return r(T)})};return c.href=function(d){return d},c.headAttrs=function(d,f){return""},c})})(pm);var D5=pm.exports;const q5=j5(D5);function V5(e){return async()=>new Promise(t=>{setTimeout(t,e)})}function F5(e,{delay:t=void 0}={}){if(typeof t!="number"&&t!==void 0)throw new TypeError(`Expected \`interval\` to be of type \`number\` but received type \`${typeof t}\``);const n=t===void 0?async()=>{}:V5(t);let r=[];return o=>{r.push(o),r.length===1&&(async()=>(await n(),e(r),r=[]))()}}const W5=(e,t)=>t.some(n=>e instanceof n);let Dp,qp;function K5(){return Dp||(Dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G5(){return qp||(qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gm=new WeakMap,ql=new WeakMap,wm=new WeakMap,Fu=new WeakMap,Kd=new WeakMap;function Z5(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",s),e.removeEventListener("error",c)},s=()=>{n(qr(e.result)),o()},c=()=>{r(e.error),o()};e.addEventListener("success",s),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&gm.set(n,e)}).catch(()=>{}),Kd.set(t,e),t}function Y5(e){if(ql.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",c),e.removeEventListener("abort",c)},s=()=>{n(),o()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",s),e.addEventListener("error",c),e.addEventListener("abort",c)});ql.set(e,t)}let Vl={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ql.get(e);if(t==="objectStoreNames")return e.objectStoreNames||wm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function J5(e){Vl=e(Vl)}function X5(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Wu(this),t,...n);return wm.set(r,t.sort?t.sort():[t]),qr(r)}:G5().includes(e)?function(...t){return e.apply(Wu(this),t),qr(gm.get(this))}:function(...t){return qr(e.apply(Wu(this),t))}}function Q5(e){return typeof e=="function"?X5(e):(e instanceof IDBTransaction&&Y5(e),W5(e,K5())?new Proxy(e,Vl):e)}function qr(e){if(e instanceof IDBRequest)return Z5(e);if(Fu.has(e))return Fu.get(e);const t=Q5(e);return t!==e&&(Fu.set(e,t),Kd.set(t,e)),t}const Wu=e=>Kd.get(e);function eA(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const c=indexedDB.open(e,t),d=qr(c);return r&&c.addEventListener("upgradeneeded",f=>{r(qr(c.result),f.oldVersion,f.newVersion,qr(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{s&&f.addEventListener("close",()=>s()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const tA=["get","getKey","getAll","getAllKeys","count"],nA=["put","add","delete","clear"],Ku=new Map;function Vp(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ku.get(t))return Ku.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=nA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||tA.includes(n)))return;const s=async function(c,...d){const f=this.transaction(c,o?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),o&&f.done]))[0]};return Ku.set(t,s),s}J5(e=>({...e,get:(t,n,r)=>Vp(t,n)||e.get(t,n,r),has:(t,n)=>!!Vp(t,n)||e.has(t,n)}));function rA(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[s,c,d,f]=o,h={id:c,relays:d?[d]:[]},y=r===0,m=r===n.length-1;if(f==="root"){t.root=h;continue}if(f==="reply"){t.reply=h;continue}if(f==="mention"){t.mentions.push(h);continue}if(y){t.root=h;continue}if(m){t.reply=h;continue}t.mentions.push(h)}return t}const Gi={events:"id",aggregates:["eid","k"],profiles:["pk"],relays:["n","a"]},oA=async(e,t)=>{if(t<=1){const s=[...e.objectStoreNames];await Promise.all(s.map(c=>e.deleteObjectStore(c)))}const n=e.createObjectStore("events",{keyPath:Gi.events});n.createIndex("a","a"),n.createIndex("ro","ro"),n.createIndex("r","r"),n.createIndex("d","d"),n.createIndex("k","k"),e.createObjectStore("aggregates",{keyPath:Gi.aggregates}),e.createObjectStore("profiles",{keyPath:Gi.profiles}).createIndex("l","l"),e.createObjectStore("relays",{keyPath:Gi.relays}).createIndex("a","a")},Ba=e=>{var t,n;const r=rA(e),o=e.tags.find(A=>A[0]==="a"),s=o&&o[1],c=o&&o[3]==="mention",d=e.tags.find(A=>A[0]==="r"),f=d&&d[1],h=e.tags.filter(A=>A[0]==="t"),y=[...new Set(h.map(A=>A[1]))],m=e.tags.find(A=>A[0]==="d"),E=m&&m[1],P=e.tags.find(A=>A[0]==="title"),B=P&&P[1];return{id:e.id??"",k:e.kind,c:e.content,ts:e.created_at,pk:e.pubkey,ro:(t=r.root)==null?void 0:t.id,re:(n=r.reply)==null?void 0:n.id,me:r.mentions.map(A=>A.id),p:r.profiles.map(A=>A.pubkey),a:s,am:c,r:f,t:y,d:E,tl:B}},iA=()=>({});let ui=iA(),Fp=!0,Wp;const Ec=async()=>{if(Fp!==!1)try{return Wp||(Wp=await eA("zapthreads",2,{upgrade:oA}))}catch{Fp=!1}},Gs=e=>{const t=De(Mr(e,()=>{const[n,r,o]=e(),s=()=>Si(n,r,o),[c,{mutate:d}]=bw(()=>Xi[n],s,{initialValue:[],storage:mm});return Si(n,r,o).then(d),c}));return()=>t()()},Kp=e=>{const t=De(Mr(e,()=>{const[n,r,o]=e(),s=()=>li(n,r,o),[c,{mutate:d}]=bw(()=>Xi[n],s,{initialValue:void 0,storage:mm});return li(n,r,o).then(d),c}));return()=>t()()},Si=async(e,t,n)=>{const r=await Ec();if(!r){const o=ui[e];if(o){if(n){const s=Array.isArray(t)?t:[t];return Object.values(o).filter(c=>s.includes(c[n.index]))}return Object.values(o)}return[]}if(t&&n){if(Array.isArray(t)){const o=t.map(c=>r.getAllFromIndex(e,n.index,c));return(await Promise.all(o)).flat()}return r.getAllFromIndex(e,n.index,t)}return r.getAll(e)},li=async(e,t,n)=>{const r=await Ec();if(!r){const o=ui[e];if(o){if(n)return Object.values(o).find(c=>c[n.index]===t);const s=(t.lower?t.lower:t).toString();return o[s]}return}return n?r.getFromIndex(e,n.index,t):r.get(e,t)},Gu={},Gp=(e,t)=>{ui[e]??(ui[e]={});for(const n of t){let r=Gi[e];r=Array.isArray(r)?r:[r];const o=r.map(s=>n[s]).join(",");ui[e][o]=n}},un=async(e,t,n={immediate:!1})=>{const r=await Ec();if(n.immediate){r?r.put(e,t):Gp(e,[t]),Xi[e]=+new Date;return}Gu[e]||(Gu[e]=F5(async o=>{if(!r){Gp(e,o),Xi[e]=+new Date;return}const s=r.transaction(e,"readwrite");await Promise.all([...o.map(d=>s.store.put(d)),s.done])&&(Xi[e]=+new Date)},{delay:96})),Gu[e](t)},sA=async()=>{const e=await Ec();if(!e){ui={};return}const t=[...e.objectStoreNames];await Promise.all(t.map(n=>e.clear(n)))},Xi=Fd({});function mm(e){const[t,n]=y5({value:e});return[()=>t.value,r=>{const o=cr(t.value);return typeof r=="function"&&(r=r(o)),n("value",E5(r)),t.value}]}const bm=async(e,t,n)=>{const r=+new Date,o=216e5,s=[...new Set(e)].filter(d=>{const f=n.find(h=>h.pk===d);return!(f!=null&&f.l&&f.l>r-o)}).filter(d=>!!d);if(s.length===0)return;const c=await ci.querySync(t,{kinds:[0],authors:s});for(const d of s){const f=c.find(h=>h.pubkey===d);if(f){const h=JSON.parse(f.content),y=f.pubkey,m={pk:y,ts:f.created_at,i:h.image||h.picture,n:h.displayName||h.display_name||h.name},E=n.find(P=>P.pk===y);!E||!(E!=null&&E.n)||E.ts<m.ts?un("profiles",{...m,l:r}):un("profiles",{...E,l:r})}}},aA=async(e,t)=>{const r=(await Si("relays",e.value,{index:"a"})).filter(o=>t.includes(o.n)).map(o=>o.l);return r.length>0?Math.min(...r)+1:0},cA=async(e,t)=>{const n={};for(const o of t){const s=ci.seenOn.get(o.id);if(s)for(const c of s)o.ts>(n[c.url]||0)&&(n[c.url]=o.ts)}const r=await Si("relays",e.value,{index:"a"});for(const o in n){const s=r.find(c=>c.n===o);s?n[o]>s.l&&(s.l=n[o],un("relays",s)):un("relays",{n:o,a:e.value,l:n[o]})}},uA=new RegExp("(?<=^|\\s)https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)","gi"),lA=/(\S*(?:png|jpg|jpeg|gif|webp))/gi,dA=new RegExp("(?<=^|\\s)@?((naddr|npub|nevent|note)[a-z0-9]{20,})","g"),fA=/\`(.*?)\`/g,hA=/\B\#([a-zA-Z0-9]+\b)(?!;)/g,ym=(e,t,n=[])=>{let r=e.c;const o=t.urlPrefixes,s=t.profiles;r=r.replace(uA,d=>d.match(lA)?`![image](${d})`:`[${d}](${d})`);const c=[...new Set(e.t)];if(c.length>0){const d=new RegExp(`(^|\\s)\\#(${c.join("|")})`,"gi");r=r.replaceAll(d,`$1[#$2](${o.tag}$2)`)}return r=r.replaceAll(dA,"nostr:$1"),r=M5(r,({decoded:d,value:f})=>{switch(d.type){case"nprofile":let h=s().find(A=>A.pk===d.data.pubkey);return`[@${(h==null?void 0:h.n)||Ao(f)}](${o.nprofile}${f})`;case"npub":let m=s().find(A=>A.pk===d.data);return`[@${(m==null?void 0:m.n)||Ao(f)}](${o.npub}${f})`;case"note":return`[@${Ao(f)}](${o.note}${f})`;case"naddr":const P=d.data,B=n.find(A=>A.pk===P.pubkey&&A.d===P.identifier);return B&&B.tl?`[${B.tl}](${o.naddr}${f})`:`[@${Ao(f)}](${o.naddr}${f})`;case"nevent":return`[@${Ao(f)}](${o.nevent}${f})`;default:return f}}),r=r.replaceAll(fA,"<code>$1</code>"),q5(r.trim())},pA=e=>{const t=[],n=U5(e);for(const s of n){if(s.decoded.type==="npub"&&t.push(["p",s.decoded.data]),s.decoded.type==="naddr"){const c=s.decoded.data;t.push(["a",`${c.kind}:${c.pubkey}:${c.identifier}`,"","mention"])}s.decoded.type==="nevent"&&t.push(["e",s.decoded.data.id]),s.decoded.type==="note"&&t.push(["e",s.decoded.data])}const r=e.matchAll(hA),o=new Set([...r].map(s=>s[1].toLowerCase()));for(const s of o)t.push(["t",s]);return t},gA=(e="")=>{const t={naddr:"https://nostr.com/",npub:"https://nostr.com/",nprofile:"https://nostr.com/",nevent:"https://nostr.com/",note:"https://nostr.com/",tag:"https://snort.social/t/"};for(const n of e.split(",")){const[r,o]=n.split(":");o&&(t[r]=`https://${o}`)}return t},Ao=e=>e.substring(0,8)+"..."+e.substring(e.length-4),oa=e=>e.sort((t,n)=>(t.ts||0)>=(n.ts||0)?-1:1),yn=20,ia='data:image/svg+xml;utf-8,<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><circle cx="512" cy="512" r="512" fill="%23333" fill-rule="evenodd" /></svg>',wA=e=>{const t=new Date,n=Math.floor((t.getTime()-e)/1e3);if(n<60)return"now";if(n<3600){const r=Math.floor(n/60);return`${r} minute${r===1?"":"s"} ago`}if(n<=86400){const r=Math.floor(n/3600);return`${r} hour${r===1?"":"s"} ago`}if(n<=604800){const r=Math.floor(n/86400);return`${r} day${r===1?"":"s"} ago`}if(n>604800){const r=new Date(e),o=r.toLocaleDateString("en-us",{day:"numeric",month:"long"}),s=r.getFullYear()===t.getFullYear()?"":" "+r.getFullYear();return"on "+o+s}return""},mA=e=>e<1e4?e.toString():e<1e6?Math.round(e/1e3)+"k":Math.round(e/1e6)+"M",Gd=e=>e.children.reduce((t,n)=>t+Gd(n),e.children.length),bA=/\/+$/,yA=(e,t=!0)=>{const n=new URL(e);return n.hash="",t&&(n.pathname=n.pathname.replace(bA,"")),n.toString()},vm=(e,t)=>{let n=e.map(o=>({...o,children:[]}));const r=new Set(n.filter(o=>{if(t){const s=t.id===(o.re||o.ro);return s&&(o.parent=t),s}return!n.find(s=>s.id===(o.re||o.ro))}));n=n.filter(o=>!r.has(o));for(let o of r)o.children.push(...vm(n,o));return[...r]};var Zo=Symbol("verified"),vA=e=>e instanceof Object;function _A(e){if(!vA(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var EA=new TextEncoder,kA=class{generateSecretKey(){return Mt.utils.randomPrivateKey()}getPublicKey(t){return Je(Mt.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Je(Mt.getPublicKey(n)),r.id=Qi(r),r.sig=Je(Mt.sign(Qi(r),n)),r[Zo]=!0,r}verifyEvent(t){if(typeof t[Zo]=="boolean")return t[Zo];const n=Qi(t);if(n!==t.id)return t[Zo]=!1,!1;try{const r=Mt.verify(t.sig,n,t.pubkey);return t[Zo]=r,r}catch{return t[Zo]=!1,!1}}};function AA(e){if(!_A(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Qi(e){let t=qd(EA.encode(AA(e)));return Je(t)}var kc=new kA,SA=kc.generateSecretKey,_m=kc.getPublicKey,Em=kc.finalizeEvent;kc.verifyEvent;var $A=e=>{yi(()=>{const t=e();t&&setTimeout(()=>t.focus())})},Yo=Symbol("verified"),xA=e=>e instanceof Object;function TA(e){if(!xA(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var PA=new TextEncoder;function LA(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var CA=class{constructor(e){pe(this,"value"),pe(this,"next",null),pe(this,"prev",null),this.value=e}},BA=class{constructor(){pe(this,"first"),pe(this,"last"),this.first=null,this.last=null}enqueue(e){const t=new CA(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},IA=class{generateSecretKey(){return Mt.utils.randomPrivateKey()}getPublicKey(e){return Je(Mt.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Je(Mt.getPublicKey(t)),n.id=Zu(n),n.sig=Je(Mt.sign(Zu(n),t)),n[Yo]=!0,n}verifyEvent(e){if(typeof e[Yo]=="boolean")return e[Yo];const t=Zu(e);if(t!==e.id)return e[Yo]=!1,!1;try{const n=Mt.verify(e.sig,t,e.pubkey);return e[Yo]=n,n}catch{return e[Yo]=!1,!1}}};function OA(e){if(!TA(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Zu(e){let t=qd(PA.encode(OA(e)));return Je(t)}var Ac=new IA;Ac.generateSecretKey;Ac.getPublicKey;Ac.finalizeEvent;var NA=Ac.verifyEvent,RA=22242;function zA(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,c])=>s===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function UA(e,t){for(let n=0;n<e.length;n++)if(zA(e[n],t))return!0;return!1}function MA(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function HA(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function jA(e,t){return{kind:RA,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function DA(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var km;try{km=WebSocket}catch{}var Am=class{constructor(e,t){pe(this,"url"),pe(this,"_connected",!1),pe(this,"onclose",null),pe(this,"onnotice",n=>console.debug(`NOTICE from ${this.url}: ${n}`)),pe(this,"_onauth",null),pe(this,"baseEoseTimeout",4400),pe(this,"connectionTimeout",4400),pe(this,"openSubs",new Map),pe(this,"connectionTimeoutHandle"),pe(this,"connectionPromise"),pe(this,"openCountRequests",new Map),pe(this,"openEventPublishes",new Map),pe(this,"ws"),pe(this,"incomingMessageQueue",new BA),pe(this,"queueRunning",!1),pe(this,"challenge"),pe(this,"serial",0),pe(this,"verifyEvent"),this.url=LA(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){const n=new Am(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new km(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await DA();this.queueRunning=!1}handleNext(){var e,t,n;const r=this.incomingMessageQueue.dequeue();if(!r)return!1;const o=HA(r);if(o){const s=this.openSubs.get(o);if(!s)return;const c=MA(r,"id"),d=(e=s.alreadyHaveEvent)==null?void 0:e.call(s,c);if((t=s.receivedEvent)==null||t.call(s,this,c),d)return}try{let s=JSON.parse(r);switch(s[0]){case"EVENT":{const c=this.openSubs.get(s[1]),d=s[2];this.verifyEvent(d)&&UA(c.filters,d)&&c.onevent(d);return}case"COUNT":{const c=s[1],d=s[2],f=this.openCountRequests.get(c);f&&(f.resolve(d.count),this.openCountRequests.delete(c));return}case"EOSE":{const c=this.openSubs.get(s[1]);if(!c)return;c.receivedEose();return}case"OK":{const c=s[1],d=s[2],f=s[3],h=this.openEventPublishes.get(c);d?h.resolve(f):h.reject(new Error(f)),this.openEventPublishes.delete(c);return}case"CLOSED":{const c=s[1],d=this.openSubs.get(c);if(!d)return;d.closed=!0,d.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(n=this._onauth)==null||n.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(jA(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,s)=>{this.openCountRequests.set(n,{resolve:o,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e)+"]"),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new qA(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},qA=class{constructor(e,t,n,r){pe(this,"relay"),pe(this,"id"),pe(this,"closed",!1),pe(this,"eosed",!1),pe(this,"filters"),pe(this,"alreadyHaveEvent"),pe(this,"receivedEvent"),pe(this,"onevent"),pe(this,"oneose"),pe(this,"onclose"),pe(this,"eoseTimeout"),pe(this,"eoseTimeoutHandle"),this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},Sm=class extends Am{constructor(e){super(e,{verifyEvent:NA})}static async connect(e){const t=new Sm(e);return await t.connect(),t}};new TextDecoder("utf-8");new TextEncoder;function VA(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}const FA=He("<div class=ztr-comment-info-picture><img>"),WA=He("<div class=ztr-reply-form><textarea></textarea><div class=ztr-reply-controls>"),KA=He("<span>Publishing is disabled"),GA=He("<span class=ztr-reply-error>Error: "),ZA=He('<svg class=ztr-spinner viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none stroke-width=5>'),YA=He("<button class=ztr-reply-button>Reply as "),JA=He("<button class=ztr-reply-button>Reply anonymously"),XA=He("<button class=ztr-reply-login-button>Log in"),QA=He("<li class=ztr-comment-action-like><span> likes"),eS=He("<li class=ztr-comment-action-zap><span> sats"),tS=He("<div class=ztr-comment-new><div class=ztr-comment-body><ul class=ztr-comment-actions>"),$m=e=>{const[t,n]=dt(""),[r,o]=dt(!1),[s,c]=dt(),[d,f]=dt(""),h=()=>me.anchor,y=me.profiles,m=()=>me.relays,E=async()=>{if(!window.nostr){B("Error: No NIP-07 extension!");return}const T=await window.nostr.getPublicKey();Ut.internal={pk:T,signEvent:async N=>window.nostr.signEvent(N)},f(""),Ut.active=Ut.internal};yi(async()=>{if(Ut.active){const T=Ut.active.pk;let N=y().find(l=>l.pk===T);N||(N={pk:T,l:0,ts:0},await un("profiles",N)),c(N),bm([T],m(),y())}else c()});const P=async(T,N)=>{var l;o(!1),n(""),f(N??""),await un("events",Ba(T),{immediate:!0}),(l=e.onDone)==null||l.call(globalThis)},B=T=>{o(!1),f(`Error: ${T}`)},A=async T=>{let N;if(T)N=Ut.active;else{if(!Ut.anonymous){const R=SA();Ut.anonymous={pk:_m(R),signEvent:async L=>({sig:Em(L,R).sig})}}N=Ut.anonymous}if(!(N!=null&&N.signEvent)){B("Error: User has no signer!");return}const l=t().trim();if(!l)return;const w={kind:1,created_at:Math.round(Date.now()/1e3),content:l,pubkey:N.pk,tags:pA(l)};if(me.anchorAuthor!==w.pubkey&&w.tags.push(["p",me.anchorAuthor]),me.externalAuthor)try{const R=ra(me.externalAuthor).data;w.tags.push(["p",R])}catch{}if(e.replyTo){const R=await li("events",IDBKeyRange.only(e.replyTo));R&&(w.tags.push(["e",R.ro,"","root"]),R.pk!==w.pubkey&&w.tags.push(["p",R.pk])),w.tags.push(["e",e.replyTo,"","reply"])}else{const R=me.version||me.rootEventIds[0];if(R)w.tags.push(["e",R,"","root"]);else if(h().type==="http"){const L=VA(h().value),_={pubkey:N.pk,created_at:Math.round(Date.now()/1e3),kind:8812,tags:[["r",L]],content:`Comments on ${L} `},x={id:Qi(_),..._,...await N.signEvent(_)};un("events",Ba(x)),me.disableFeatures.includes("publish")?console.log("Publishing root event disabled",x):ci.publish(m(),x),me.filter={"#e":[x.id]},w.tags.push(["e",x.id,"","root"])}}h().type==="naddr"&&w.tags.push(["a",h().value,"","root"]);const p=Qi(w),v=await N.signEvent(w),$={id:p,...w,...v};if(o(!0),console.log(JSON.stringify($,null,2)),me.disableFeatures.includes("publish"))setTimeout(()=>P($),1e3);else{const R=[];for(const L of m())try{await(await Sm.connect(L)).publish($)}catch(_){console.error(_),R.push(L)}if(R.length===m().length)B("Error: Your comment was not published to any relay");else{const L=`Published to ${R.length}/${m().length} relays (see console for more info)`,_=R.length>0?L:void 0;P($,_)}R.length=0}},O=e.replyTo!==void 0;let M;return $A(()=>O&&M),(()=>{const T=WA(),N=T.firstChild,l=N.nextSibling;N.addEventListener("change",p=>n(p.target.value));const w=M;return typeof w=="function"?Sw(w,N):M=N,N.autofocus=O,xe(l,(()=>{const p=De(()=>!!me.disableFeatures.includes("publish"));return()=>p()&&KA()})(),null),xe(l,(()=>{const p=De(()=>!!d());return()=>p()&&(()=>{const v=GA();return v.firstChild,xe(v,d,null),v})()})(),null),xe(l,wn(Sa,{get when(){return!r()},get fallback(){return ZA()},get children(){const p=FA(),v=p.firstChild;return cn(()=>{var $;return Ct(v,"src",(($=s())==null?void 0:$.i)||ia)}),p}}),null),xe(l,(()=>{const p=De(()=>!!s());return()=>p()&&(()=>{const v=YA();return v.firstChild,v.$$click=()=>A(s()),xe(v,()=>s().n||Ao(lm(s().pk)),null),cn(()=>v.disabled=r()),v})()})(),null),xe(l,(()=>{const p=De(()=>!s()&&!me.disableFeatures.includes("replyAnonymously"));return()=>p()&&(()=>{const v=JA();return v.$$click=()=>A(),cn(()=>v.disabled=r()),v})()})(),null),xe(l,(()=>{const p=De(()=>!s());return()=>p()&&(()=>{const v=XA();return v.$$click=()=>E(),v})()})(),null),cn(p=>{const v=r(),$=me.replyPlaceholder||"Add your comment...";return v!==p._v$&&(N.disabled=p._v$=v),$!==p._v$2&&Ct(N,"placeholder",p._v$2=$),p},{_v$:void 0,_v$2:void 0}),cn(()=>N.value=t()),T})()},nS=()=>{const e=()=>me.anchor,t=Kp(()=>["aggregates",IDBKeyRange.only([e().value,9735])]),n=Kp(()=>["aggregates",IDBKeyRange.only([e().value,7])]),r=()=>{var s;return((s=t())==null?void 0:s.sum)??0},o=()=>{var s;return((s=n())==null?void 0:s.ids.length)??0};return(()=>{const s=tS(),c=s.firstChild,d=c.firstChild;return xe(d,wn(Sa,{get when(){return!me.disableFeatures.includes("likes")},get children(){const f=QA(),h=f.firstChild,y=h.firstChild;return xe(f,TS,h),xe(h,o,y),f}}),null),xe(d,wn(Sa,{get when(){return!me.disableFeatures.includes("zaps")},get children(){const f=eS(),h=f.firstChild,y=h.firstChild;return xe(f,xS,h),xe(h,()=>mA(r()),y),f}}),null),xe(c,wn($m,{}),null),s})()};Od(["click"]);function rS(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function Zp(e,...t){return typeof e=="function"?e(...t):e}function oS(e){const t={...e},n={...e},r={},o=c=>{let d=r[c];if(!d){if(!vi())return t[c];r[c]=d=dt(t[c],{internal:!0}),delete t[c]}return d[0]()};for(const c in e)Object.defineProperty(n,c,{get:()=>o(c),enumerable:!0});const s=(c,d)=>{const f=r[c];if(f)return f[1](d);c in t&&(t[c]=Zp(d,[t[c]]))};return[n,(c,d)=>{if(rS(c)){const f=bn(()=>Object.entries(Zp(c,n)));si(()=>{for(const[h,y]of f)s(h,()=>y)})}else s(c,d);return n}]}var xm={width:null,height:null};function Yu(e){if(!e)return{...xm};const{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function iS(e){const t=typeof e=="function",[n,r]=oS(t?xm:Yu(e)),o=new ResizeObserver(([s])=>r(Yu(s.target)));return ai(()=>o.disconnect()),t?yi(()=>{const s=e();s&&(r(Yu(s)),o.observe(s),ai(()=>o.unobserve(s)))}):(o.observe(e),ai(()=>o.unobserve(e))),n}const sS=He("<div class=ztr-thread>"),aS=He("<li class=ztr-comment-action-reply><span>"),cS=He("<div class=ztr-comment><div class=ztr-comment-body><div class=ztr-comment-info-wrapper><div class=ztr-comment-info><div class=ztr-comment-info-picture><img></div><ul class=ztr-comment-info-items><li class=ztr-comment-info-author><a target=_blank></a><span style=white-space:nowrap;><strong> <!>ed</strong> </span></li><li><a class=ztr-comment-info-dots></a></li></ul></div><ul class=ztr-comment-info-items></ul></div><div class=ztr-comment-text></div><div class=ztr-comment-text></div><ul class=ztr-comment-actions>"),uS=He("<li>"),lS=He("<li> repl"),dS=He("<li><span>"),fS=He("<div class=ztr-info-pane><a target=_blank><small>Event data"),hS=He("<p class=warning><span>This is a <!> that referenced this article in <a>another thread"),pS=He("<p class=warning><span>Article contents may have changed since this <!> was made"),gS=He("<p class=warning><span>Article contents changed since this <!> was made"),wS=He("<div class=ztr-comment-expand><a></a><span>Show full comment"),mS=He("<div class=ztr-comment-replies>"),bS=He('<svg viewBox="0 -6 60 60"xmlns=http://www.w3.org/2000/svg><path d="M 12.6030 50.4905 C 13.3758 50.4905 13.9307 50.1140 14.8621 49.2421 L 20.6483 43.8720 C 19.5188 42.9803 18.6073 41.5733 18.6073 38.3433 L 18.6073 25.2052 C 18.6073 19.1217 22.3129 15.5152 28.3766 15.5152 L 42.2479 15.5152 L 42.2281 14.7622 C 41.9306 10.6999 39.2557 8.0643 34.7177 8.0643 L 7.5301 8.0643 C 2.9922 8.0643 0 10.7791 0 15.4954 L 0 34.9548 C 0 39.6710 2.9922 42.7028 7.5301 42.7028 L 10.8195 42.7028 L 10.8195 48.4693 C 10.8195 49.6979 11.4735 50.4905 12.6030 50.4905 Z M 44.6058 53.2450 C 45.7353 53.2450 46.3895 52.4325 46.3895 51.2237 L 46.3895 45.4374 L 48.4702 45.4374 C 53.0078 45.4374 56 42.4056 56 37.7092 L 56 25.6610 C 56 20.9250 53.0078 18.2300 48.4702 18.2300 L 28.8522 18.2300 C 24.1161 18.2300 21.3221 20.9250 21.3221 25.6610 L 21.3221 37.7092 C 21.3221 42.4056 24.1161 45.4374 28.8522 45.4374 L 35.1735 45.4374 L 42.3470 51.9767 C 43.2784 52.8487 43.8331 53.2450 44.6058 53.2450 Z">'),yS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="-120 -80 528 588"><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z">'),vS=He('<svg viewBox="0 -16 180 180"xmlns=http://www.w3.org/2000/svg><path d="M60.732 29.7C41.107 29.7 22 39.7 22 67.41c0 27.29 45.274 67.29 74 94.89 28.744-27.6 74-67.6 74-94.89 0-27.71-19.092-37.71-38.695-37.71C116 29.7 104.325 41.575 96 54.066 87.638 41.516 76 29.7 60.732 29.7z">'),_S=He('<svg viewBox="0 0 576 512"><path d="M168 80c-13.3 0-24 10.7-24 24V408c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112C0 98.7 10.7 88 24 88s24 10.7 24 24V408c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72H440c39.8 0 72 32.2 72 72V408c0 39.8-32.2 72-72 72H72zM176 136c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24V136zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM200 272H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z">'),ES=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -200 560 640"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z">'),kS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z">'),AS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z">'),SS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z">'),Tm=e=>{const t=()=>me.anchor,n=me.profiles;return(()=>{const r=sS();return xe(r,wn($6,{get each(){return oa(e.nestedEvents())},children:o=>{const[s,c]=dt(!1),[d,f]=dt(!1),[h,y]=dt(!1),[m,E]=dt(!1),P=500,[B,A]=dt(),O=iS(B),[M,T]=dt(ia),N=()=>o().pk,l=()=>lm(N()),w=()=>n().find(S=>S.pk===N());yi(async()=>{var S;T(((S=w())==null?void 0:S.i)||ia)});let p;const v=()=>wA(o().ts*1e3),[$,R]=dt();yi(()=>{R(v()),p=setInterval(()=>{R(v())},60*1e3)});const L=()=>o().a===t().value&&o().am,_=()=>o().k===9802?"highlight":L()?"mention":"comment",x=De(()=>Gd(o())),z=()=>!o().parent&&!o().ro,q=()=>!o().parent&&o().ro&&!me.rootEventIds.includes(o().ro),I=()=>!o().parent&&o().ro&&me.rootEventIds.includes(o().ro)&&me.version&&me.version!==o().ro;return ai(()=>clearInterval(p)),(()=>{const S=cS(),D=S.firstChild,W=D.firstChild,K=W.firstChild,Z=K.firstChild,G=Z.firstChild,oe=Z.nextSibling,he=oe.firstChild,be=he.firstChild,Se=be.nextSibling,re=Se.firstChild,ye=re.firstChild,Be=ye.nextSibling;Be.nextSibling,re.nextSibling;const Oe=he.nextSibling,Me=Oe.firstChild,pt=K.nextSibling,We=W.nextSibling,se=We.nextSibling,Re=se.nextSibling;return G.addEventListener("error",()=>T(ia)),xe(be,()=>{var Te;return((Te=w())==null?void 0:Te.n)||Ao(l())}),xe(re,_,Be),xe(Se,$,null),xe(oe,(()=>{const Te=De(()=>x()>0&&O.width>600);return()=>Te()&&[uS(),(()=>{const Pe=lS(),je=Pe.firstChild;return xe(Pe,x,je),xe(Pe,()=>x()>1?"ies":"y",null),xe(Pe,()=>h()?" (hidden)":"",null),Pe})()]})(),Oe),Me.$$click=()=>E(!m()),xe(Me,Pm),xe(pt,(()=>{const Te=De(()=>x()>0);return()=>Te()&&(()=>{const Pe=dS(),je=Pe.firstChild;return je.$$click=()=>y(!h()),xe(je,(()=>{const yt=De(()=>!!h());return()=>yt()?LS():CS()})()),Pe})()})()),xe(D,(()=>{const Te=De(()=>!!m());return()=>Te()&&(()=>{const Pe=fS(),je=Pe.firstChild;return cn(()=>Ct(je,"href",me.urlPrefixes.note+jp(o().id))),Pe})()})(),We),xe(We,(()=>{const Te=De(()=>!!q());return()=>Te()&&(()=>{const Pe=hS(),je=Pe.firstChild,yt=je.firstChild,Nt=yt.nextSibling,St=Nt.nextSibling,Yt=St.nextSibling;return xe(Pe,Ju,je),xe(je,_,Nt),cn(()=>Ct(Yt,"href",me.urlPrefixes.note+jp(o().ro))),Pe})()})(),null),xe(We,(()=>{const Te=De(()=>!!z());return()=>Te()&&(()=>{const Pe=pS(),je=Pe.firstChild,yt=je.firstChild,Nt=yt.nextSibling;return Nt.nextSibling,xe(Pe,Ju,je),xe(je,_,Nt),Pe})()})(),null),xe(We,(()=>{const Te=De(()=>!!I());return()=>Te()&&(()=>{const Pe=gS(),je=Pe.firstChild,yt=je.firstChild,Nt=yt.nextSibling;return Nt.nextSibling,xe(Pe,Ju,je),xe(je,_,Nt),Pe})()})(),null),Sw(A,se),xe(D,(()=>{const Te=De(()=>!!(O.height&&O.height>=P&&!d()));return()=>Te()&&(()=>{const Pe=wS(),je=Pe.firstChild,yt=je.nextSibling;return`${yn}px`!=null?je.style.setProperty("height",`${yn}px`):je.style.removeProperty("height"),xe(je,PS),yt.$$click=()=>f(!0),Pe})()})(),Re),xe(Re,wn(Sa,{get when(){return!me.disableFeatures.includes("reply")},get children(){const Te=aS(),Pe=Te.firstChild;return Te.$$click=()=>c(!s())&&E(!1),xe(Te,$S,Pe),xe(Pe,()=>s()?"Cancel":"Reply"),Te}})),xe(D,(()=>{const Te=De(()=>!!s());return()=>Te()&&wn($m,{get replyTo(){return o().id},onDone:()=>c(!1)})})(),null),xe(S,(()=>{const Te=De(()=>!h());return()=>Te()&&(()=>{const Pe=mS();return xe(Pe,wn(Tm,{nestedEvents:()=>o().children,get articles(){return e.articles}})),Pe})()})(),null),cn(Te=>{const Pe=M(),je=me.urlPrefixes.npub+l(),yt=o().k==9802,Nt=d()?{}:{"max-height":`${P}px`},St=ym(o(),me,e.articles());return Pe!==Te._v$&&Ct(G,"src",Te._v$=Pe),je!==Te._v$2&&Ct(be,"href",Te._v$2=je),yt!==Te._v$3&&se.classList.toggle("highlight",Te._v$3=yt),Te._v$4=P6(se,Nt,Te._v$4),St!==Te._v$5&&(se.innerHTML=Te._v$5=St),Te},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),S})()}})),r})()},$S=()=>(()=>{const e=bS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),xS=()=>(()=>{const e=yS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),TS=()=>(()=>{const e=vS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),PS=()=>(()=>{const e=_S();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),Pm=()=>ES(),LS=()=>kS(),CS=()=>AS(),Ju=()=>(()=>{const e=SS();return Ct(e,"height",yn),e})();Od(["click"]);var Lm={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(_){if(!Number.isSafeInteger(_))throw new Error(`Wrong integer: ${_}`)}e.assertNumber=t;function n(..._){const x=(I,S)=>D=>I(S(D)),z=Array.from(_).reverse().reduce((I,S)=>I?x(I,S.encode):S.encode,void 0),q=_.reduce((I,S)=>I?x(I,S.decode):S.decode,void 0);return{encode:z,decode:q}}function r(_){return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return x.map(z=>{if(t(z),z<0||z>=_.length)throw new Error(`Digit index outside alphabet: ${z} (alphabet: ${_.length})`);return _[z]})},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("alphabet.decode input should be array of strings");return x.map(z=>{if(typeof z!="string")throw new Error(`alphabet.decode: not string element=${z}`);const q=_.indexOf(z);if(q===-1)throw new Error(`Unknown letter: "${z}". Allowed: ${_}`);return q})}}}function o(_=""){if(typeof _!="string")throw new Error("join separator should be string");return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("join.encode input should be array of strings");for(let z of x)if(typeof z!="string")throw new Error(`join.encode: non-string input=${z}`);return x.join(_)},decode:x=>{if(typeof x!="string")throw new Error("join.decode input should be string");return x.split(_)}}}function s(_,x="="){if(t(_),typeof x!="string")throw new Error("padding chr should be string");return{encode(z){if(!Array.isArray(z)||z.length&&typeof z[0]!="string")throw new Error("padding.encode input should be array of strings");for(let q of z)if(typeof q!="string")throw new Error(`padding.encode: non-string input=${q}`);for(;z.length*_%8;)z.push(x);return z},decode(z){if(!Array.isArray(z)||z.length&&typeof z[0]!="string")throw new Error("padding.encode input should be array of strings");for(let I of z)if(typeof I!="string")throw new Error(`padding.decode: non-string input=${I}`);let q=z.length;if(q*_%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;q>0&&z[q-1]===x;q--)if(!((q-1)*_%8))throw new Error("Invalid padding: string has too much padding");return z.slice(0,q)}}}function c(_){if(typeof _!="function")throw new Error("normalize fn should be function");return{encode:x=>x,decode:x=>_(x)}}function d(_,x,z){if(x<2)throw new Error(`convertRadix: wrong from=${x}, base cannot be less than 2`);if(z<2)throw new Error(`convertRadix: wrong to=${z}, base cannot be less than 2`);if(!Array.isArray(_))throw new Error("convertRadix: data should be array");if(!_.length)return[];let q=0;const I=[],S=Array.from(_);for(S.forEach(D=>{if(t(D),D<0||D>=x)throw new Error(`Wrong integer: ${D}`)});;){let D=0,W=!0;for(let K=q;K<S.length;K++){const Z=S[K],G=x*D+Z;if(!Number.isSafeInteger(G)||x*D/x!==D||G-Z!==x*D)throw new Error("convertRadix: carry overflow");if(D=G%z,S[K]=Math.floor(G/z),!Number.isSafeInteger(S[K])||S[K]*z+D!==G)throw new Error("convertRadix: carry overflow");if(W)S[K]?W=!1:q=K;else continue}if(I.push(D),W)break}for(let D=0;D<_.length-1&&_[D]===0;D++)I.push(0);return I.reverse()}const f=(_,x)=>x?f(x,_%x):_,h=(_,x)=>_+(x-f(_,x));function y(_,x,z,q){if(!Array.isArray(_))throw new Error("convertRadix2: data should be array");if(x<=0||x>32)throw new Error(`convertRadix2: wrong from=${x}`);if(z<=0||z>32)throw new Error(`convertRadix2: wrong to=${z}`);if(h(x,z)>32)throw new Error(`convertRadix2: carry overflow from=${x} to=${z} carryBits=${h(x,z)}`);let I=0,S=0;const D=2**z-1,W=[];for(const K of _){if(t(K),K>=2**x)throw new Error(`convertRadix2: invalid data word=${K} from=${x}`);if(I=I<<x|K,S+x>32)throw new Error(`convertRadix2: carry overflow pos=${S} from=${x}`);for(S+=x;S>=z;S-=z)W.push((I>>S-z&D)>>>0);I&=2**S-1}if(I=I<<z-S&D,!q&&S>=x)throw new Error("Excess padding");if(!q&&I)throw new Error(`Non-zero padding: ${I}`);return q&&S>0&&W.push(I>>>0),W}function m(_){return t(_),{encode:x=>{if(!(x instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return d(Array.from(x),2**8,_)},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(d(x,_,2**8))}}}function E(_,x=!1){if(t(_),_<=0||_>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,_)>32||h(_,8)>32)throw new Error("radix2: carry overflow");return{encode:z=>{if(!(z instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return y(Array.from(z),8,_,!x)},decode:z=>{if(!Array.isArray(z)||z.length&&typeof z[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(y(z,_,8,x))}}}function P(_){if(typeof _!="function")throw new Error("unsafeWrapper fn should be function");return function(...x){try{return _.apply(null,x)}catch{}}}function B(_,x){if(t(_),typeof x!="function")throw new Error("checksum fn should be function");return{encode(z){if(!(z instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const q=x(z).slice(0,_),I=new Uint8Array(z.length+_);return I.set(z),I.set(q,z.length),I},decode(z){if(!(z instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const q=z.slice(0,-_),I=x(q).slice(0,_),S=z.slice(-_);for(let D=0;D<_;D++)if(I[D]!==S[D])throw new Error("Invalid checksum");return q}}}e.utils={alphabet:r,chain:n,checksum:B,radix:m,radix2:E,join:o,padding:s},e.base16=n(E(4),r("0123456789ABCDEF"),o("")),e.base32=n(E(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),e.base32hex=n(E(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),e.base32crockford=n(E(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),c(_=>_.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(E(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),e.base64url=n(E(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));const A=_=>n(m(58),r(_),o(""));e.base58=A("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=A("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=A("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const O=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(_){let x="";for(let z=0;z<_.length;z+=8){const q=_.subarray(z,z+8);x+=e.base58.encode(q).padStart(O[q.length],"1")}return x},decode(_){let x=[];for(let z=0;z<_.length;z+=11){const q=_.slice(z,z+11),I=O.indexOf(q.length),S=e.base58.decode(q);for(let D=0;D<S.length-I;D++)if(S[D]!==0)throw new Error("base58xmr: wrong padding");x=x.concat(Array.from(S.slice(S.length-I)))}return Uint8Array.from(x)}};const M=_=>n(B(4,x=>_(_(x))),e.base58);e.base58check=M;const T=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),N=[996825010,642813549,513874426,1027748829,705979059];function l(_){const x=_>>25;let z=(_&33554431)<<5;for(let q=0;q<N.length;q++)(x>>q&1)===1&&(z^=N[q]);return z}function w(_,x,z=1){const q=_.length;let I=1;for(let S=0;S<q;S++){const D=_.charCodeAt(S);if(D<33||D>126)throw new Error(`Invalid prefix (${_})`);I=l(I)^D>>5}I=l(I);for(let S=0;S<q;S++)I=l(I)^_.charCodeAt(S)&31;for(let S of x)I=l(I)^S;for(let S=0;S<6;S++)I=l(I);return I^=z,T.encode(y([I%2**30],30,5,!1))}function p(_){const x=_==="bech32"?1:734539939,z=E(5),q=z.decode,I=z.encode,S=P(q);function D(G,oe,he=90){if(typeof G!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof G}`);if(!Array.isArray(oe)||oe.length&&typeof oe[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof oe}`);const be=G.length+7+oe.length;if(he!==!1&&be>he)throw new TypeError(`Length ${be} exceeds limit ${he}`);return G=G.toLowerCase(),`${G}1${T.encode(oe)}${w(G,oe,x)}`}function W(G,oe=90){if(typeof G!="string")throw new Error(`bech32.decode input should be string, not ${typeof G}`);if(G.length<8||oe!==!1&&G.length>oe)throw new TypeError(`Wrong string length: ${G.length} (${G}). Expected (8..${oe})`);const he=G.toLowerCase();if(G!==he&&G!==G.toUpperCase())throw new Error("String must be lowercase or uppercase");G=he;const be=G.lastIndexOf("1");if(be===0||be===-1)throw new Error('Letter "1" must be present between prefix and data only');const Se=G.slice(0,be),re=G.slice(be+1);if(re.length<6)throw new Error("Data must be at least 6 characters long");const ye=T.decode(re).slice(0,-6),Be=w(Se,ye,x);if(!re.endsWith(Be))throw new Error(`Invalid checksum in ${G}: expected "${Be}"`);return{prefix:Se,words:ye}}const K=P(W);function Z(G){const{prefix:oe,words:he}=W(G,!1);return{prefix:oe,words:he,bytes:q(he)}}return{encode:D,decode:W,decodeToBytes:Z,decodeUnsafe:K,fromWords:q,fromWordsUnsafe:S,toWords:I}}e.bech32=p("bech32"),e.bech32m=p("bech32m"),e.utf8={encode:_=>new TextDecoder().decode(_),decode:_=>new TextEncoder().encode(_)},e.hex=n(E(4),r("0123456789abcdef"),o(""),c(_=>{if(typeof _!="string"||_.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof _} with length ${_.length}`);return _.toLowerCase()}));const v={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},$=`Invalid encoding type. Available types: ${Object.keys(v).join(", ")}`,R=(_,x)=>{if(typeof _!="string"||!v.hasOwnProperty(_))throw new TypeError($);if(!(x instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return v[_].encode(x)};e.bytesToString=R,e.str=e.bytesToString;const L=(_,x)=>{if(!v.hasOwnProperty(_))throw new TypeError($);if(typeof x!="string")throw new TypeError("stringToBytes() expects string");return v[_].decode(x)};e.stringToBytes=L,e.bytes=e.stringToBytes})(Lm);const{bech32:Ln,hex:pn,utf8:BS}=Lm,Yp={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},Jp={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Xp={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Qp={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Zs=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],IS={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},OS=BigInt("2100000000000000000"),eg=BigInt(1e11),Fl={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},Cm={};for(let e=0,t=Object.keys(Fl);e<t.length;e++){const n=t[e],r=Fl[t[e]].toString();Cm[r]=n}const NS={1:e=>pn.encode(Ln.fromWordsUnsafe(e)),16:e=>pn.encode(Ln.fromWordsUnsafe(e)),13:e=>BS.encode(Ln.fromWordsUnsafe(e)),19:e=>pn.encode(Ln.fromWordsUnsafe(e)),23:e=>pn.encode(Ln.fromWordsUnsafe(e)),27:e=>pn.encode(Ln.fromWordsUnsafe(e)),6:Ia,24:Ia,3:zS,5:US};function RS(e){return t=>({tagCode:parseInt(e),words:Ln.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function Ia(e){return e.reverse().reduce((t,n,r)=>t+n*Math.pow(32,r),0)}function zS(e){const t=[];let n,r,o,s,c,d=Ln.fromWordsUnsafe(e);for(;d.length>0;)n=pn.encode(d.slice(0,33)),r=pn.encode(d.slice(33,41)),o=parseInt(pn.encode(d.slice(41,45)),16),s=parseInt(pn.encode(d.slice(45,49)),16),c=parseInt(pn.encode(d.slice(49,51)),16),d=d.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:s,cltv_expiry_delta:c});return t}function US(e){const t=e.slice().reverse().map(o=>[!!(o&1),!!(o&2),!!(o&4),!!(o&8),!!(o&16)]).reduce((o,s)=>o.concat(s),[]);for(;t.length<Zs.length*2;)t.push(!1);const n={};Zs.forEach((o,s)=>{let c;t[s*2]?c="required":t[s*2+1]?c="supported":c="unsupported",n[o]=c});const r=t.slice(Zs.length*2);return n.extra_bits={start_bit:Zs.length*2,bits:r,has_required:r.reduce((o,s,c)=>c%2!==0?o||!1:o||s,!1)},n}function Bm(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const o=BigInt(r),s=n?o*eg/IS[n]:o*eg;if(n==="p"&&o%BigInt(10)!==BigInt(0)||s>OS)throw new Error("Amount is outside of valid range");return t?s.toString():s}function MS(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const n=[],r=Ln.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const o=r.prefix;let s=r.words,c=e.slice(o.length+1),d=s.slice(-104);s=s.slice(0,-104);let f=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(f&&!f[2]&&(f=o.match(/^ln(\S+)$/)),!f)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const h=f[1];let y;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");y=t}else switch(h){case Yp.bech32:y=Yp;break;case Jp.bech32:y=Jp;break;case Xp.bech32:y=Xp;break;case Qp.bech32:y=Qp;break}if(!y||y.bech32!==h)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:h,value:y});const m=f[2];let E;if(m){const l=f[3];E=Bm(m+l,!0),n.push({name:"amount",letters:f[2]+f[3],value:E})}else E=null;n.push({name:"separator",letters:"1"});const P=Ia(s.slice(0,7));s=s.slice(7),n.push({name:"timestamp",letters:c.slice(0,7),value:P}),c=c.slice(7);let B,A,O,M;for(;s.length>0;){const l=s[0].toString();B=Cm[l]||"unknown_tag",A=NS[l]||RS(l),s=s.slice(1),O=Ia(s.slice(0,2)),s=s.slice(2),M=s.slice(0,O),s=s.slice(O),n.push({name:B,tag:c[0],letters:c.slice(0,3+O),value:A(M)}),c=c.slice(3+O)}n.push({name:"signature",letters:c.slice(0,104),value:pn.encode(Ln.fromWordsUnsafe(d))}),c=c.slice(104),n.push({name:"checksum",letters:c});let T={paymentRequest:e,sections:n,get expiry(){let l=n.find(w=>w.name==="expiry");if(l)return N("timestamp")+l.value},get route_hints(){return n.filter(l=>l.name==="route_hint").map(l=>l.value)}};for(let l in Fl)l!=="route_hint"&&Object.defineProperty(T,l,{get(){return N(l)}});return T;function N(l){let w=n.find(p=>p.name===l);return w?w.value:void 0}}var HS={decode:MS,hrpToMillisat:Bm};const jS=He("<div id=ztr-root><style></style><div style=float:right;opacity:0.2;>"),DS=He("<div id=ztr-content>"),qS=He("<h1>Error!"),VS=He("<div class=ztr-comment-text><pre></pre><p>Only properly formed NIP-19 naddr, note and nevent encoded entities and URLs are supported."),FS=He("<h2 id=ztr-title>"),WS=He("<p>Powered by <a href=https://github.com/fr4nzap/zapthreads>zapthreads"),KS=He("<button>Clear cache"),GS=He("<p>Anchor version: "),ZS=e=>{Ur(()=>{me.anchor=(()=>{const N=e.anchor.trim();try{if(N.startsWith("http")){const w=!e.legacyUrl;return{type:"http",value:yA(N,w)}}const l=ra(N);switch(l.type){case"nevent":return{type:"note",value:l.data.id};case"note":return{type:"note",value:l.data};case"naddr":const w=l.data;return{type:"naddr",value:`${w.kind}:${w.pubkey}:${w.identifier}`}}}catch(l){return console.error(l),{type:"error",value:`Malformed anchor: ${N}`}}})();const T="wss://relay.damus.io,wss://nos.lol";me.relays=(e.relays||T).split(",").map(N=>new URL(N).toString()),(e.author||"").startsWith("npub")&&(me.externalAuthor=e.author),me.disableFeatures=e.disable.split(",").map(N=>N.trim()).filter(A5),me.urlPrefixes=gA(e.urls),me.replyPlaceholder=e.replyPlaceholder});const t=()=>me.anchor,n=()=>me.relays,r=()=>me.disableFeatures,o=()=>e.version;me.profiles=Gs(()=>["profiles"]);const s=()=>r().includes("watch");Ur(Mr([t],()=>{me.version=o()})),Ur(Mr([t,n],async()=>{if(t().type==="error")return;let T,N;switch(t().type){case"http":N=await Si("events",t().value,{index:"r"}),me.rootEventIds=oa(N).map(_=>_.id),T={"#r":e.legacyUrl?[t().value]:[t().value,`${t().value}/`],kinds:[1,8812]};break;case"note":const v=await li("events",IDBKeyRange.only(t().value));if(v){N=[v],me.rootEventIds=[v.id],me.anchorAuthor=v.pk;return}else{N=[],T={ids:[t().value]};break}case"naddr":const[$,R,L]=t().value.split(":");N=(await Si("events",L,{index:"d"})).filter(_=>_.pk===R),N.length>0&&(me.rootEventIds=oa(N).map(_=>_.id),me.anchorAuthor=N[0].pk),T={authors:[R],kinds:[parseInt($)],"#d":[L]};break;default:throw"error"}const w=(await ci.querySync(n(),{...T})).map(Ba);for(const p of w)t().type=="http"?(p.k==1&&p.c.includes("")||p.k==8812)&&un("events",p):un("events",p);switch(t().type){case"http":case"naddr":const p=[...N,...w],v=oa([...p]).map($=>$.id);(v.length>0&&v[0])!==me.rootEventIds[0]&&(me.rootEventIds=v);break;case"note":me.rootEventIds=w.map($=>$.id);break}w.length>0&&(me.anchorAuthor=w[0].pk)}));const c=()=>me.rootEventIds;Ur(Mr([c,o],()=>{switch(t().type){case"http":case"note":(me.filter["#e"]??[]).toString()!==c().toString()&&(me.filter={"#e":c()});return;case"naddr":const T=me.filter["#a"]&&me.filter["#a"][0];t().value!==T&&(me.filter={"#a":[t().value]}),me.version=o()||c()[0];return}},{defer:!0}));const d=De(()=>me.filter,{defer:!0});let f;yi(Mr([d],async()=>{const T=d(),N=n(),l=t(),w=P(),p=me.profiles();if(Object.entries(T).length===0)return;f==null||f.close(),f=null,ai(()=>{console.log("[zapthreads] unsubscribing and cleaning up",l.value),f==null||f.close(),f=null});const v=[1,9802,7,9735];console.log("[zapthreads] subscribing to",l.value);const $=await aA(l,N),R=new Set,L={};f=ci.subscribeMany(N,[{...T,kinds:v,since:$}],{onevent(_){if(_.kind===1||_.kind===9802)_.content.trim()&&un("events",Ba(_));else if(_.kind===7)R.add(_.id);else if(_.kind===9735){const x=_.tags.find(z=>z[0]==="bolt11");x&&x[1]&&(L[_.id]=x[1])}},oneose(){(async()=>{const _=await li("aggregates",IDBKeyRange.only([l.value,7]))??{eid:l.value,ids:[],k:7};_.ids=[...new Set([..._.ids,...R])],un("aggregates",_);const x=await li("aggregates",IDBKeyRange.only([l.value,9735]))??{eid:l.value,ids:[],k:9735,sum:0};x.sum=Object.entries(L).reduce((z,q)=>{if(x.ids.includes(q[0]))return z;const S=HS.decode(q[1]).sections.find(W=>W.name==="amount"),D=Number(S.value)/1e3;return z+D},x.sum??0),x.ids=[...new Set([...x.ids,...Object.keys(L)])],un("aggregates",x)})(),setTimeout(async()=>{await bm([...w.map(_=>_.pk)],N,p),cA(l,w),s()&&(f==null||f.close(),ci.close(N))},96)}})},{defer:!0}));const h=()=>e.user;Ur(Mr(h,T=>{if(T){let N,l;T.startsWith("nsec")?(l=ra(T).data,N=_m(l)):N=ra(T).data,Ut.external={pk:N,signEvent:async w=>{if(l)return{sig:Em(w,l).sig};if(!window.nostr)throw alert("Please log in with a NIP-07 extension such as Alby or nos2x"),Ut.active=void 0,"No extension available";const p=await window.nostr.getPublicKey(),v=N;if(v!==p){const $=`ERROR: Event not signed. Supplied pubkey does not match extension pubkey. ${v} !== ${p}`;throw Ut.active=void 0,alert($),$}else return window.nostr.signEvent(w)}},Ut.active=Ut.external}})),Ur(Mr(h,T=>{T||(Ut.active=void 0)},{defer:!0}));const y=Gs(()=>["events",30023,{index:"k"}]),m=De(()=>{if(me.disableFeatures.includes("hideContent")&&t().type==="naddr"){const[T,N,l]=t().value.split(":"),w=y().find(p=>p.d===l&&p.pk===N);if(w){const p=`# ${w.tl}
 ${w.c}`;return ym({...w,c:p},me,[])}}}),E=De(()=>{switch(t().type){case"http":case"note":return Gs(()=>["events",me.rootEventIds,{index:"ro"}]);case"naddr":return Gs(()=>["events",t().value,{index:"a"}]);default:return()=>[]}}),P=()=>E()(),B=De(()=>me.rootEventIds&&me.rootEventIds.length?vm(P()).filter(N=>!(N.k===9802&&N.children.length===0)):[]),A=()=>B().reduce((T,N)=>T+Gd(N),B().length),[O,M]=dt(!1);return(()=>{const T=jS(),N=T.firstChild,l=N.nextSibling;return xe(N,V6),xe(T,(()=>{const w=De(()=>!!m());return()=>w()&&(()=>{const p=DS();return cn(()=>p.innerHTML=m()),p})()})(),l),xe(T,(()=>{const w=De(()=>t().type==="error");return()=>w()&&[qS(),(()=>{const p=VS(),v=p.firstChild;return xe(v,()=>t().value),p})()]})(),l),xe(T,(()=>{const w=De(()=>t().type!=="error");return()=>w()&&[De((()=>{const p=De(()=>!me.disableFeatures.includes("reply"));return()=>p()&&wn(nS,{})})()),(()=>{const p=FS();return xe(p,(()=>{const v=De(()=>A()>0);return()=>v()&&`${A()} comment${A()==1?"":"s"}`})()),p})(),wn(Tm,{nestedEvents:B,articles:y})]})(),l),l.$$click=()=>M(!O()),xe(l,Pm),xe(T,(()=>{const w=De(()=>!!O());return()=>w()&&[WS(),De((()=>{const p=De(()=>!!me.version);return()=>p()&&(()=>{const v=GS();return v.firstChild,xe(v,()=>me.version,null),v})()})()),(()=>{const p=KS();return T6(p,"click",sA),p})()]})(),null),T})()};q6("zap-threads",{anchor:"",version:"",relays:"",user:"",author:"",disable:"",urls:"","reply-placeholder":"","legacy-url":""},e=>wn(ZS,{get anchor(){return e.anchor??""},get version(){return e.version??""},get relays(){return e.relays??""},get user(){return e.user??""},get author(){return e.author??""},get disable(){return e.disable??""},get urls(){return e.urls??""},get replyPlaceholder(){return e["reply-placeholder"]??""},get legacyUrl(){return e["legacy-url"]??""}}));Od(["click"]);function YS(e){let t,n;return t=new pw({}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p:At,i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function JS(e){let t,n,r=Gr(e[1].created_at,!0)+"",o,s,c,d=e[1].title+"",f,h,y,m,E,P,B=e[1].image&&tg(e),A=e[3]&&ng(e);return{c(){t=ke("div"),n=ke("div"),o=Xe(r),s=Ge(),c=ke("h1"),f=Xe(d),h=Ge(),B&&B.c(),y=Ge(),m=ke("div"),E=Ge(),A&&A.c(),P=Ro(),Ee(n,"class","date"),Ee(m,"class","content"),Ee(t,"class","note-wrapper")},m(O,M){Ne(O,t,M),we(t,n),we(n,o),we(t,s),we(t,c),we(c,f),we(t,h),B&&B.m(t,null),we(t,y),we(t,m),m.innerHTML=e[6],Ne(O,E,M),A&&A.m(O,M),Ne(O,P,M)},p(O,M){M&2&&r!==(r=Gr(O[1].created_at,!0)+"")&&It(o,r),M&2&&d!==(d=O[1].title+"")&&It(f,d),O[1].image?B?B.p(O,M):(B=tg(O),B.c(),B.m(t,y)):B&&(B.d(1),B=null),M&64&&(m.innerHTML=O[6]),O[3]?A?A.p(O,M):(A=ng(O),A.c(),A.m(P.parentNode,P)):A&&(A.d(1),A=null)},i:At,o:At,d(O){O&&(Ie(t),Ie(E),Ie(P)),B&&B.d(),A&&A.d(O)}}}function tg(e){let t,n;return{c(){t=ke("img"),Ee(t,"class","note-banner"),Vr(t.src,n=e[1].image)||Ee(t,"src",n)},m(r,o){Ne(r,t,o)},p(r,o){o&2&&!Vr(t.src,n=r[1].image)&&Ee(t,"src",n)},d(r){r&&Ie(t)}}}function ng(e){let t;return{c(){t=ke("zap-threads"),Ds(t,"anchor",e[2]),Ds(t,"relays",e[0])},m(n,r){Ne(n,t,r)},p(n,r){r&4&&Ds(t,"anchor",n[2]),r&1&&Ds(t,"relays",n[0])},d(n){n&&Ie(t)}}}function XS(e){let t,n,r,o,s=e[2].slice(0,9)+"..."+e[2].slice(-5),c,d,f,h,y,m,E,P,B,A,O,M,T,N,l,w,p;const v=[JS,YS],$=[];function R(L,_){return _&2&&(T=null),T==null&&(T=Object.keys(L[1]).length>0),T?0:1}return N=R(e,-1),l=$[N]=v[N](e),{c(){t=ke("div"),n=ke("div"),r=Xe("Note: "),o=ke("a"),c=Xe(s),f=Ge(),h=ke("a"),y=ke("div"),m=ke("img"),P=Ge(),B=ke("span"),A=Xe(e[4]),O=Xe(" homepage"),M=Ge(),l.c(),w=Ro(),Ee(o,"href",d="https://njump.me/"+e[2]),Ee(n,"class","external-link"),Vr(m.src,E=e[5])||Ee(m,"src",E),Ee(y,"class","picture-container"),Ee(h,"href","#"),Ee(t,"class","header note")},m(L,_){Ne(L,t,_),we(t,n),we(n,r),we(n,o),we(o,c),we(t,f),we(t,h),we(h,y),we(y,m),we(h,P),we(h,B),we(B,A),we(B,O),Ne(L,M,_),$[N].m(L,_),Ne(L,w,_),p=!0},p(L,[_]){(!p||_&4)&&s!==(s=L[2].slice(0,9)+"..."+L[2].slice(-5))&&It(c,s),(!p||_&4&&d!==(d="https://njump.me/"+L[2]))&&Ee(o,"href",d),(!p||_&32&&!Vr(m.src,E=L[5]))&&Ee(m,"src",E),(!p||_&16)&&It(A,L[4]);let x=N;N=R(L,_),N===x?$[N].p(L,_):(Qr(),Ze($[x],1,1,()=>{$[x]=null}),eo(),l=$[N],l?l.p(L,_):(l=$[N]=v[N](L),l.c()),Ve(l,1),l.m(w.parentNode,w))},i(L){p||(Ve(l),p=!0)},o(L){Ze(l),p=!1},d(L){L&&(Ie(t),Ie(M),Ie(w)),$[N].d(L)}}}function QS(e,t,n){let r,o,s={},c="",d="",f=!1,h="",y="",{id:m}=t,{profile:E}=t;return Ha(async()=>{const{relays:P,comments:B}=qa();n(0,o=P);const A=JSON.parse(E.content);n(4,h=A.name||null),n(5,y=A.picture||null),n(2,d=Gv(m)),n(3,f=B);let O=da.subscribeMany(o,[{authors:[E.pubkey],ids:[m]}],{onevent:async M=>{console.log("Received event:",M),n(1,s=Xs(M)),fa.set(s.title),n(9,c=await H0(s))},oneose(){console.log("No subscribers left. Closing subscription."),O.close()}})}),e.$$set=P=>{"id"in P&&n(7,m=P.id),"profile"in P&&n(8,E=P.profile)},e.$$.update=()=>{e.$$.dirty&512&&n(6,r=c)},fa.subscribe(P=>{document.title=P}),[o,s,d,f,h,y,r,m,E,c]}class e$ extends no{constructor(t){super(),to(this,t,QS,XS,Hn,{id:7,profile:8})}}function t$(e){let t,n,r,o,s,c;return{c(){t=ke("div"),n=ke("input"),r=Ge(),o=ke("label"),n.checked=e[0],Ee(n,"type","checkbox"),Ee(n,"id","theme-toggle"),Ee(n,"class","svelte-bxrhh"),Ee(o,"for","theme-toggle"),Ee(o,"class","svelte-bxrhh")},m(d,f){Ne(d,t,f),we(t,n),we(t,r),we(t,o),s||(c=kv(n,"click",e[1]),s=!0)},p(d,[f]){f&1&&(n.checked=d[0])},i:At,o:At,d(d){d&&Ie(t),s=!1,c()}}}function n$(e,t,n){let r=!0;function o(){n(0,r=!r),localStorage.setItem("theme",r?"dark":"light"),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}return typeof window<"u"&&(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),r=!0):(document.documentElement.classList.remove("dark"),r=!1)),[r,o]}class r$ extends no{constructor(t){super(),to(this,t,n$,t$,Hn,{})}}function rg(e){let t;return{c(){t=ke("div"),t.innerHTML=`<h1>Oracolo</h1> <h2>Missing config!</h2>
    You need to set (at least) the <strong>author meta tag</strong> by updating this html file! Open it with an editor, look at the first lines and personalize them.`,Ee(t,"class","unfinished-setup")},m(n,r){Ne(n,t,r)},d(n){n&&Ie(t)}}}function og(e){let t=e[0],n,r,o=ig(e);return{c(){o.c(),n=Ro()},m(s,c){o.m(s,c),Ne(s,n,c),r=!0},p(s,c){c&1&&Hn(t,t=s[0])?(Qr(),Ze(o,1,1,At),eo(),o=ig(s),o.c(),Ve(o,1),o.m(n.parentNode,n)):o.p(s,c)},i(s){r||(Ve(o),r=!0)},o(s){Ze(o),r=!1},d(s){s&&Ie(n),o.d(s)}}}function o$(e){let t,n;return t=new e$({props:{id:e[0],profile:e[1]}}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p(r,o){const s={};o&1&&(s.id=r[0]),o&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function i$(e){let t,n;return t=new gw({props:{tag:e[0],profile:e[1]}}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p(r,o){const s={};o&1&&(s.tag=r[0]),o&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function s$(e){let t,n;return t=new gw({props:{tag:"",profile:e[1]}}),{c(){ur(t.$$.fragment)},m(r,o){jn(t,r,o),n=!0},p(r,o){const s={};o&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(Ve(t.$$.fragment,r),n=!0)},o(r){Ze(t.$$.fragment,r),n=!1},d(r){Dn(t,r)}}}function ig(e){let t,n,r,o,s;const c=[s$,i$,o$],d=[];function f(h,y){return y&1&&(t=null),h[0]===""?0:(t==null&&(t=!!h[0].startsWith("tags/")),t?1:2)}return n=f(e,-1),r=d[n]=c[n](e),{c(){r.c(),o=Ro()},m(h,y){d[n].m(h,y),Ne(h,o,y),s=!0},p(h,y){let m=n;n=f(h,y),n===m?d[n].p(h,y):(Qr(),Ze(d[m],1,1,()=>{d[m]=null}),eo(),r=d[n],r?r.p(h,y):(r=d[n]=c[n](h),r.c()),Ve(r,1),r.m(o.parentNode,o))},i(h){s||(Ve(r),s=!0)},o(h){Ze(r),s=!1},d(h){h&&Ie(o),d[n].d(h)}}}function sg(e){let t,n=e[3].join(", ")+"",r;return{c(){t=Xe("This page connects to some servers (Nostr relays) to retrieve data: "),r=Xe(n)},m(o,s){Ne(o,t,s),Ne(o,r,s)},p(o,s){s&8&&n!==(n=o[3].join(", ")+"")&&It(r,n)},d(o){o&&(Ie(t),Ie(r))}}}function a$(e){let t,n=e[1]&&Object.keys(e[1]).length>0,r,o,s,c,d,f,h,y,m,E,P,B,A=e[2]&&rg(),O=n&&og(e),M=e[3]&&sg(e);return P=new r$({}),{c(){A&&A.c(),t=Ge(),O&&O.c(),r=Ge(),o=ke("div"),s=Xe("This blog is powered by "),c=ke("a"),c.textContent="Oracolo",d=Xe(" and Nostr, "),f=ke("a"),f.textContent="read more",h=ke("br"),y=ke("br"),m=Ge(),M&&M.c(),E=Ge(),ur(P.$$.fragment),Ee(c,"href","https://github.com/dtonon/oracolo"),Ee(f,"href","https://njump.me"),Ee(o,"class","footer")},m(T,N){A&&A.m(T,N),Ne(T,t,N),O&&O.m(T,N),Ne(T,r,N),Ne(T,o,N),we(o,s),we(o,c),we(o,d),we(o,f),we(o,h),we(o,y),we(o,m),M&&M.m(o,null),Ne(T,E,N),jn(P,T,N),B=!0},p(T,[N]){T[2]?A||(A=rg(),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),N&2&&(n=T[1]&&Object.keys(T[1]).length>0),n?O?(O.p(T,N),N&2&&Ve(O,1)):(O=og(T),O.c(),Ve(O,1),O.m(r.parentNode,r)):O&&(Qr(),Ze(O,1,1,()=>{O=null}),eo()),T[3]?M?M.p(T,N):(M=sg(T),M.c(),M.m(o,null)):M&&(M.d(1),M=null)},i(T){B||(Ve(O),Ve(P.$$.fragment,T),B=!0)},o(T){Ze(O),Ze(P.$$.fragment,T),B=!1},d(T){T&&(Ie(t),Ie(r),Ie(o),Ie(E)),A&&A.d(T),O&&O.d(T),M&&M.d(),Dn(P,T)}}}function c$(e,t,n){let r="",o,s=!1,c,d=!1;const f=()=>{const h=window.location.hash.substr(1);h!==r&&n(0,r=h)};return Ha(async()=>{const{npub:h,relays:y,comments:m}=qa();if(n(3,c=y),d=m,d)try{await _v(()=>Promise.resolve().then(()=>f$),void 0,import.meta.url),console.log("window.nostr.js has been successfully loaded")}catch(E){console.error("Failed to load window.nostr.js:",E)}if(f(),window.addEventListener("hashchange",f),n(1,o=await z0(h)),o){const E=JSON.parse(o.content);E.name,E.picture}else n(2,s=!0)}),Tv(()=>{window.removeEventListener("hashchange",f)}),[r,o,s,c]}class u$ extends no{constructor(t){super(),to(this,t,c$,a$,Hn,{})}}new u$({target:document.getElementById("app")});var ag={},l$=Object.defineProperty,d$=(e,t,n)=>t in e?l$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t,n)=>(d$(e,typeof t!="symbol"?t+"":t,n),n);(function(){var e,t,n,r,o;const s='*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed{position:fixed}.absolute{position:absolute}.bottom-1{bottom:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.top-0{top:0}.m-auto{margin:auto}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.w-10{width:2.5rem}.w-40{width:10rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-56{max-width:14rem}@keyframes moveIn{0%{transform:translateY(-10px)}to{transform:translateY(0)}}.animate-fadein{animation:fadeIn 1s ease-in-out,moveIn 1s ease-in-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-show{animation:fadeIn .2s ease-in-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.overflow-hidden{overflow:hidden}.overflow-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.border-0{border-width:0px}.border-2{border-width:2px}.border-solid{border-style:solid}.border-transparent{border-color:transparent}.bg-cyan-700{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.bg-cyan-800{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.bg-cyan-900{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.bg-cyan-950{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.bg-green-800{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.bg-green-950{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.bg-orange-700{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.bg-orange-800{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.bg-orange-900{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.bg-orange-950{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.bg-purple-700{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.bg-purple-800{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.bg-purple-950{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.bg-red-950{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.bg-stone-700{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.bg-stone-800{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.bg-stone-900{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.bg-stone-950{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-cyan-900{--tw-gradient-from: #164e63 var(--tw-gradient-from-position);--tw-gradient-to: rgb(22 78 99 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-900{--tw-gradient-from: #14532d var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 83 45 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-neutral-900{--tw-gradient-from: #171717 var(--tw-gradient-from-position);--tw-gradient-to: rgb(23 23 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-900{--tw-gradient-from: #7c2d12 var(--tw-gradient-from-position);--tw-gradient-to: rgb(124 45 18 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-900{--tw-gradient-from: #581c87 var(--tw-gradient-from-position);--tw-gradient-to: rgb(88 28 135 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-900{--tw-gradient-from: #7f1d1d var(--tw-gradient-from-position);--tw-gradient-to: rgb(127 29 29 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-stone-900{--tw-gradient-from: #1c1917 var(--tw-gradient-from-position);--tw-gradient-to: rgb(28 25 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-cyan-700{--tw-gradient-to: #0e7490 var(--tw-gradient-to-position)}.to-green-700{--tw-gradient-to: #15803d var(--tw-gradient-to-position)}.to-neutral-700{--tw-gradient-to: #404040 var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-purple-700{--tw-gradient-to: #7e22ce var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-stone-700{--tw-gradient-to: #44403c var(--tw-gradient-to-position)}.p-2{padding:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.leading-3{line-height:.75rem}.leading-4{line-height:1rem}.leading-5{line-height:1.25rem}.text-cyan-600{--tw-text-opacity: 1;color:rgb(8 145 178 / var(--tw-text-opacity))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity))}.text-neutral-600{--tw-text-opacity: 1;color:rgb(82 82 82 / var(--tw-text-opacity))}.text-neutral-800{--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}.text-stone-600{--tw-text-opacity: 1;color:rgb(87 83 78 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.no-underline{text-decoration-line:none}.decoration-2{text-decoration-thickness:2px}.underline-offset-4{text-underline-offset:4px}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-\\[0_0px_10px_0px_rgba\\(0\\,0\\,0\\,0\\.3\\)\\]{--tw-shadow: 0 0px 10px 0px rgba(0,0,0,.3);--tw-shadow-colored: 0 0px 10px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0px_30px_0px_rgba\\(0\\,0\\,0\\,0\\.6\\)\\]{--tw-shadow: 0 0px 30px 0px rgba(0,0,0,.6);--tw-shadow-colored: 0 0px 30px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline-dashed{outline-style:dashed}.outline-1{outline-width:1px}.outline-offset-4{outline-offset:4px}.outline-cyan-500{outline-color:#06b6d4}.outline-green-500{outline-color:#22c55e}.outline-neutral-500{outline-color:#737373}.outline-orange-500{outline-color:#f97316}.outline-purple-500{outline-color:#a855f7}.outline-red-500{outline-color:#ef4444}.outline-stone-500{outline-color:#78716c}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.hover\\:bg-cyan-700:hover{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.hover\\:bg-cyan-800:hover{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.hover\\:bg-cyan-900:hover{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.hover\\:bg-cyan-950:hover{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.hover\\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.hover\\:bg-green-900:hover{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.hover\\:bg-green-950:hover{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.hover\\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.hover\\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.hover\\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.hover\\:bg-neutral-950:hover{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.hover\\:bg-orange-700:hover{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.hover\\:bg-orange-800:hover{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-900:hover{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-950:hover{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.hover\\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.hover\\:bg-purple-800:hover{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.hover\\:bg-purple-900:hover{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.hover\\:bg-purple-950:hover{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.hover\\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.hover\\:bg-red-900:hover{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.hover\\:bg-red-950:hover{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.hover\\:bg-stone-700:hover{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.hover\\:bg-stone-800:hover{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.hover\\:bg-stone-900:hover{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.hover\\:bg-stone-950:hover{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.disabled\\:cursor-default:disabled{cursor:default}.disabled\\:bg-neutral-400:disabled{--tw-bg-opacity: 1;background-color:rgb(163 163 163 / var(--tw-bg-opacity))}.disabled\\:text-neutral-200:disabled{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity))}.group:hover .group-hover\\:underline{text-decoration-line:underline}@media (min-width: 640px){.sm\\:w-96{width:24rem}}';function c(){}function d(i){return i()}function f(){return Object.create(null)}function h(i){i.forEach(d)}function y(i){return typeof i=="function"}function m(i,a){return i!=i?a==a:i!==a||i&&typeof i=="object"||typeof i=="function"}let E;function P(i,a){return i===a?!0:(E||(E=document.createElement("a")),E.href=a,i===E.href)}function B(i){return Object.keys(i).length===0}function A(i,...a){if(i==null){for(const g of a)g(void 0);return c}const u=i.subscribe(...a);return u.unsubscribe?()=>u.unsubscribe():u}function O(i,a,u){i.$$.on_destroy.push(A(a,u))}const M=typeof window<"u"?window:typeof globalThis<"u"?globalThis:N0;function T(i,a){i.appendChild(a)}function N(i,a,u){i.insertBefore(a,u||null)}function l(i){i.parentNode&&i.parentNode.removeChild(i)}function w(i,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].d(a)}function p(i){return document.createElement(i)}function v(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function $(i){return document.createTextNode(i)}function R(){return $(" ")}function L(){return $("")}function _(i,a,u,g){return i.addEventListener(a,u,g),()=>i.removeEventListener(a,u,g)}function x(i,a,u){u==null?i.removeAttribute(a):i.getAttribute(a)!==u&&i.setAttribute(a,u)}function z(i){return Array.from(i.childNodes)}function q(i,a){a=""+a,i.data!==a&&(i.data=a)}function I(i,a){i.value=a??""}function S(i,a,u){for(let g=0;g<i.options.length;g+=1){const b=i.options[g];if(b.__value===a){b.selected=!0;return}}(!u||a!==void 0)&&(i.selectedIndex=-1)}function D(i){const a=i.querySelector(":checked");return a&&a.__value}function W(i,a,u){i.classList.toggle(a,!!u)}let K;function Z(i){K=i}function G(){if(!K)throw new Error("Function called outside component initialization");return K}function oe(i){G().$$.on_mount.push(i)}const he=[],be=[];let Se=[];const re=[],ye=Promise.resolve();let Be=!1;function Oe(){Be||(Be=!0,ye.then(se))}function Me(i){Se.push(i)}const pt=new Set;let We=0;function se(){if(We!==0)return;const i=K;do{try{for(;We<he.length;){const a=he[We];We++,Z(a),Re(a.$$)}}catch(a){throw he.length=0,We=0,a}for(Z(null),he.length=0,We=0;be.length;)be.pop()();for(let a=0;a<Se.length;a+=1){const u=Se[a];pt.has(u)||(pt.add(u),u())}Se.length=0}while(he.length);for(;re.length;)re.pop()();Be=!1,pt.clear(),Z(i)}function Re(i){if(i.fragment!==null){i.update(),h(i.before_update);const a=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,a),i.after_update.forEach(Me)}}function Te(i){const a=[],u=[];Se.forEach(g=>i.indexOf(g)===-1?a.push(g):u.push(g)),u.forEach(g=>g()),Se=a}const Pe=new Set;let je;function yt(){je={r:0,c:[],p:je}}function Nt(){je.r||h(je.c),je=je.p}function St(i,a){i&&i.i&&(Pe.delete(i),i.i(a))}function Yt(i,a,u,g){if(i&&i.o){if(Pe.has(i))return;Pe.add(i),je.c.push(()=>{Pe.delete(i),g&&(u&&i.d(1),g())}),i.o(a)}else g&&g()}function Zd(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Yd(i){i&&i.c()}function Sc(i,a,u){const{fragment:g,after_update:b}=i.$$;g&&g.m(a,u),Me(()=>{const k=i.$$.on_mount.map(d).filter(y);i.$$.on_destroy?i.$$.on_destroy.push(...k):h(k),i.$$.on_mount=[]}),b.forEach(Me)}function $c(i,a){const u=i.$$;u.fragment!==null&&(Te(u.after_update),h(u.on_destroy),u.fragment&&u.fragment.d(a),u.on_destroy=u.fragment=null,u.ctx=[])}function Im(i,a){i.$$.dirty[0]===-1&&(he.push(i),Oe(),i.$$.dirty.fill(0)),i.$$.dirty[a/31|0]|=1<<a%31}function Jd(i,a,u,g,b,k,C=null,H=[-1]){const U=K;Z(i);const j=i.$$={fragment:null,ctx:[],props:k,update:c,not_equal:b,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(U?U.$$.context:[])),callbacks:f(),dirty:H,skip_bound:!1,root:a.target||U.$$.root};C&&C(j.root);let F=!1;if(j.ctx=u?u(i,a.props||{},(V,X,...J)=>{const ee=J.length?J[0]:X;return j.ctx&&b(j.ctx[V],j.ctx[V]=ee)&&(!j.skip_bound&&j.bound[V]&&j.bound[V](ee),F&&Im(i,V)),X}):[],j.update(),F=!0,h(j.before_update),j.fragment=g?g(j.ctx):!1,a.target){if(a.hydrate){const V=z(a.target);j.fragment&&j.fragment.l(V),V.forEach(l)}else j.fragment&&j.fragment.c();a.intro&&St(i.$$.fragment),Sc(i,a.target,a.anchor),se()}Z(U)}class Xd{constructor(){ae(this,"$$"),ae(this,"$$set")}$destroy(){$c(this,1),this.$destroy=c}$on(a,u){if(!y(u))return c;const g=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);return g.push(u),()=>{const b=g.indexOf(u);b!==-1&&g.splice(b,1)}}$set(a){this.$$set&&!B(a)&&(this.$$.skip_bound=!0,this.$$set(a),this.$$.skip_bound=!1)}}const Om="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Om);function Nm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xc={exports:{}};function Qd(i,a=100,u={}){if(typeof i!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof i}\`.`);if(a<0)throw new RangeError("`wait` must not be negative.");const{immediate:g}=typeof u=="boolean"?{immediate:u}:u;let b,k,C,H,U;function j(){const V=Date.now()-H;if(V<a&&V>=0)C=setTimeout(j,a-V);else if(C=void 0,!g){const X=b,J=k;b=void 0,k=void 0,U=i.apply(X,J)}}const F=function(...V){if(b&&this!==b)throw new Error("Debounced method called with different contexts.");b=this,k=V,H=Date.now();const X=g&&!C;if(C||(C=setTimeout(j,a)),X){const J=b,ee=k;b=void 0,k=void 0,U=i.apply(J,ee)}return U};return F.clear=()=>{C&&(clearTimeout(C),C=void 0)},F.flush=()=>{if(!C)return;const V=b,X=k;b=void 0,k=void 0,U=i.apply(V,X),clearTimeout(C),C=void 0},F}xc.exports.debounce=Qd,xc.exports=Qd;var Rm=xc.exports;const ef=Nm(Rm),Tc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tf=i=>i instanceof Uint8Array,Pc=i=>new DataView(i.buffer,i.byteOffset,i.byteLength),_n=(i,a)=>i<<32-a|i>>>a;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const zm=Array.from({length:256},(i,a)=>a.toString(16).padStart(2,"0"));function Rt(i){if(!tf(i))throw new Error("Uint8Array expected");let a="";for(let u=0;u<i.length;u++)a+=zm[i[u]];return a}function Lc(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);const a=i.length;if(a%2)throw new Error("padded hex string expected, got unpadded hex of length "+a);const u=new Uint8Array(a/2);for(let g=0;g<u.length;g++){const b=g*2,k=i.slice(b,b+2),C=Number.parseInt(k,16);if(Number.isNaN(C)||C<0)throw new Error("Invalid byte sequence");u[g]=C}return u}function Um(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function nf(i){if(typeof i=="string"&&(i=Um(i)),!tf(i))throw new Error(`expected Uint8Array, got ${typeof i}`);return i}let Mm=class{clone(){return this._cloneInto()}};function rf(i){const a=g=>i().update(nf(g)).digest(),u=i();return a.outputLen=u.outputLen,a.blockLen=u.blockLen,a.create=()=>i(),a}function Hm(i=32){if(Tc&&typeof Tc.getRandomValues=="function")return Tc.getRandomValues(new Uint8Array(i));throw new Error("crypto.getRandomValues must be defined")}function of(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}function sf(i,...a){if(!(i instanceof Uint8Array))throw new Error("Expected Uint8Array");if(a.length>0&&!a.includes(i.length))throw new Error(`Expected Uint8Array of length ${a}, not of length=${i.length}`)}function jm(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");of(i.outputLen),of(i.blockLen)}function Ss(i,a=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(a&&i.finished)throw new Error("Hash#digest() has already been called")}function Dm(i,a){sf(i);const u=a.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}const Cc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const af=i=>i instanceof Uint8Array,Bc=i=>new DataView(i.buffer,i.byteOffset,i.byteLength),En=(i,a)=>i<<32-a|i>>>a;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function qm(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function Ic(i){if(typeof i=="string"&&(i=qm(i)),!af(i))throw new Error(`expected Uint8Array, got ${typeof i}`);return i}function Vm(...i){const a=new Uint8Array(i.reduce((g,b)=>g+b.length,0));let u=0;return i.forEach(g=>{if(!af(g))throw new Error("Uint8Array expected");a.set(g,u),u+=g.length}),a}class cf{clone(){return this._cloneInto()}}function Fm(i){const a=g=>i().update(Ic(g)).digest(),u=i();return a.outputLen=u.outputLen,a.blockLen=u.blockLen,a.create=()=>i(),a}function uf(i=32){if(Cc&&typeof Cc.getRandomValues=="function")return Cc.getRandomValues(new Uint8Array(i));throw new Error("crypto.getRandomValues must be defined")}function Wm(i,a,u,g){if(typeof i.setBigUint64=="function")return i.setBigUint64(a,u,g);const b=BigInt(32),k=BigInt(4294967295),C=Number(u>>b&k),H=Number(u&k),U=g?4:0,j=g?0:4;i.setUint32(a+U,C,g),i.setUint32(a+j,H,g)}let Km=class extends cf{constructor(i,a,u,g){super(),this.blockLen=i,this.outputLen=a,this.padOffset=u,this.isLE=g,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(i),this.view=Bc(this.buffer)}update(i){Ss(this);const{view:a,buffer:u,blockLen:g}=this;i=Ic(i);const b=i.length;for(let k=0;k<b;){const C=Math.min(g-this.pos,b-k);if(C===g){const H=Bc(i);for(;g<=b-k;k+=g)this.process(H,k);continue}u.set(i.subarray(k,k+C),this.pos),this.pos+=C,k+=C,this.pos===g&&(this.process(a,0),this.pos=0)}return this.length+=i.length,this.roundClean(),this}digestInto(i){Ss(this),Dm(i,this),this.finished=!0;const{buffer:a,view:u,blockLen:g,isLE:b}=this;let{pos:k}=this;a[k++]=128,this.buffer.subarray(k).fill(0),this.padOffset>g-k&&(this.process(u,0),k=0);for(let F=k;F<g;F++)a[F]=0;Wm(u,g-8,BigInt(this.length*8),b),this.process(u,0);const C=Bc(i),H=this.outputLen;if(H%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const U=H/4,j=this.get();if(U>j.length)throw new Error("_sha2: outputLen bigger than state");for(let F=0;F<U;F++)C.setUint32(4*F,j[F],b)}digest(){const{buffer:i,outputLen:a}=this;this.digestInto(i);const u=i.slice(0,a);return this.destroy(),u}_cloneInto(i){i||(i=new this.constructor),i.set(...this.get());const{blockLen:a,buffer:u,length:g,finished:b,destroyed:k,pos:C}=this;return i.length=g,i.pos=C,i.finished=b,i.destroyed=k,g%a&&i.buffer.set(u),i}};const Gm=(i,a,u)=>i&a^~i&u,Zm=(i,a,u)=>i&a^i&u^a&u,Ym=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),br=new Uint32Array(64);let Jm=class extends Km{constructor(){super(64,32,8,!1),this.A=mr[0]|0,this.B=mr[1]|0,this.C=mr[2]|0,this.D=mr[3]|0,this.E=mr[4]|0,this.F=mr[5]|0,this.G=mr[6]|0,this.H=mr[7]|0}get(){const{A:i,B:a,C:u,D:g,E:b,F:k,G:C,H}=this;return[i,a,u,g,b,k,C,H]}set(i,a,u,g,b,k,C,H){this.A=i|0,this.B=a|0,this.C=u|0,this.D=g|0,this.E=b|0,this.F=k|0,this.G=C|0,this.H=H|0}process(i,a){for(let F=0;F<16;F++,a+=4)br[F]=i.getUint32(a,!1);for(let F=16;F<64;F++){const V=br[F-15],X=br[F-2],J=En(V,7)^En(V,18)^V>>>3,ee=En(X,17)^En(X,19)^X>>>10;br[F]=ee+br[F-7]+J+br[F-16]|0}let{A:u,B:g,C:b,D:k,E:C,F:H,G:U,H:j}=this;for(let F=0;F<64;F++){const V=En(C,6)^En(C,11)^En(C,25),X=j+V+Gm(C,H,U)+Ym[F]+br[F]|0,J=(En(u,2)^En(u,13)^En(u,22))+Zm(u,g,b)|0;j=U,U=H,H=C,C=k+X|0,k=b,b=g,g=u,u=X+J|0}u=u+this.A|0,g=g+this.B|0,b=b+this.C|0,k=k+this.D|0,C=C+this.E|0,H=H+this.F|0,U=U+this.G|0,j=j+this.H|0,this.set(u,g,b,k,C,H,U,j)}roundClean(){br.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Oc=Fm(()=>new Jm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lf=BigInt(0),$s=BigInt(1),Xm=BigInt(2),xs=i=>i instanceof Uint8Array,Qm=Array.from({length:256},(i,a)=>a.toString(16).padStart(2,"0"));function Uo(i){if(!xs(i))throw new Error("Uint8Array expected");let a="";for(let u=0;u<i.length;u++)a+=Qm[i[u]];return a}function df(i){const a=i.toString(16);return a.length&1?`0${a}`:a}function Nc(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return BigInt(i===""?"0":`0x${i}`)}function Mo(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);const a=i.length;if(a%2)throw new Error("padded hex string expected, got unpadded hex of length "+a);const u=new Uint8Array(a/2);for(let g=0;g<u.length;g++){const b=g*2,k=i.slice(b,b+2),C=Number.parseInt(k,16);if(Number.isNaN(C)||C<0)throw new Error("Invalid byte sequence");u[g]=C}return u}function Ht(i){return Nc(Uo(i))}function Rc(i){if(!xs(i))throw new Error("Uint8Array expected");return Nc(Uo(Uint8Array.from(i).reverse()))}function yr(i,a){return Mo(i.toString(16).padStart(a*2,"0"))}function zc(i,a){return yr(i,a).reverse()}function eb(i){return Mo(df(i))}function $t(i,a,u){let g;if(typeof a=="string")try{g=Mo(a)}catch(k){throw new Error(`${i} must be valid hex string, got "${a}". Cause: ${k}`)}else if(xs(a))g=Uint8Array.from(a);else throw new Error(`${i} must be hex string or Uint8Array`);const b=g.length;if(typeof u=="number"&&b!==u)throw new Error(`${i} expected ${u} bytes, got ${b}`);return g}function uo(...i){const a=new Uint8Array(i.reduce((g,b)=>g+b.length,0));let u=0;return i.forEach(g=>{if(!xs(g))throw new Error("Uint8Array expected");a.set(g,u),u+=g.length}),a}function tb(i,a){if(i.length!==a.length)return!1;for(let u=0;u<i.length;u++)if(i[u]!==a[u])return!1;return!0}function nb(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function rb(i){let a;for(a=0;i>lf;i>>=$s,a+=1);return a}function ob(i,a){return i>>BigInt(a)&$s}const ib=(i,a,u)=>i|(u?$s:lf)<<BigInt(a),Uc=i=>(Xm<<BigInt(i-1))-$s,Mc=i=>new Uint8Array(i),ff=i=>Uint8Array.from(i);function hf(i,a,u){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof a!="number"||a<2)throw new Error("qByteLen must be a number");if(typeof u!="function")throw new Error("hmacFn must be a function");let g=Mc(i),b=Mc(i),k=0;const C=()=>{g.fill(1),b.fill(0),k=0},H=(...F)=>u(b,g,...F),U=(F=Mc())=>{b=H(ff([0]),F),g=H(),F.length!==0&&(b=H(ff([1]),F),g=H())},j=()=>{if(k++>=1e3)throw new Error("drbg: tried 1000 values");let F=0;const V=[];for(;F<a;){g=H();const X=g.slice();V.push(X),F+=g.length}return uo(...V)};return(F,V)=>{C(),U(F);let X;for(;!(X=V(j()));)U();return C(),X}}const sb={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||i instanceof Uint8Array,isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,a)=>a.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};function Ii(i,a,u={}){const g=(b,k,C)=>{const H=sb[k];if(typeof H!="function")throw new Error(`Invalid validator "${k}", expected function`);const U=i[b];if(!(C&&U===void 0)&&!H(U,i))throw new Error(`Invalid param ${String(b)}=${U} (${typeof U}), expected ${k}`)};for(const[b,k]of Object.entries(a))g(b,k,!1);for(const[b,k]of Object.entries(u))g(b,k,!0);return i}const ab=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ob,bitLen:rb,bitMask:Uc,bitSet:ib,bytesToHex:Uo,bytesToNumberBE:Ht,bytesToNumberLE:Rc,concatBytes:uo,createHmacDrbg:hf,ensureBytes:$t,equalBytes:tb,hexToBytes:Mo,hexToNumber:Nc,numberToBytesBE:yr,numberToBytesLE:zc,numberToHexUnpadded:df,numberToVarBytesBE:eb,utf8ToBytes:nb,validateObject:Ii},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gt=BigInt(0),nt=BigInt(1),lo=BigInt(2),cb=BigInt(3),Hc=BigInt(4),pf=BigInt(5),gf=BigInt(8);BigInt(9),BigInt(16);function vt(i,a){const u=i%a;return u>=gt?u:a+u}function ub(i,a,u){if(u<=gt||a<gt)throw new Error("Expected power/modulo > 0");if(u===nt)return gt;let g=nt;for(;a>gt;)a&nt&&(g=g*i%u),i=i*i%u,a>>=nt;return g}function Jt(i,a,u){let g=i;for(;a-- >gt;)g*=g,g%=u;return g}function jc(i,a){if(i===gt||a<=gt)throw new Error(`invert: expected positive integers, got n=${i} mod=${a}`);let u=vt(i,a),g=a,b=gt,k=nt;for(;u!==gt;){const C=g/u,H=g%u,U=b-k*C;g=u,u=H,b=k,k=U}if(g!==nt)throw new Error("invert: does not exist");return vt(b,a)}function lb(i){const a=(i-nt)/lo;let u,g,b;for(u=i-nt,g=0;u%lo===gt;u/=lo,g++);for(b=lo;b<i&&ub(b,a,i)!==i-nt;b++);if(g===1){const C=(i+nt)/Hc;return function(H,U){const j=H.pow(U,C);if(!H.eql(H.sqr(j),U))throw new Error("Cannot find square root");return j}}const k=(u+nt)/lo;return function(C,H){if(C.pow(H,a)===C.neg(C.ONE))throw new Error("Cannot find square root");let U=g,j=C.pow(C.mul(C.ONE,b),u),F=C.pow(H,k),V=C.pow(H,u);for(;!C.eql(V,C.ONE);){if(C.eql(V,C.ZERO))return C.ZERO;let X=1;for(let ee=C.sqr(V);X<U&&!C.eql(ee,C.ONE);X++)ee=C.sqr(ee);const J=C.pow(j,nt<<BigInt(U-X-1));j=C.sqr(J),F=C.mul(F,J),V=C.mul(V,j),U=X}return F}}function db(i){if(i%Hc===cb){const a=(i+nt)/Hc;return function(u,g){const b=u.pow(g,a);if(!u.eql(u.sqr(b),g))throw new Error("Cannot find square root");return b}}if(i%gf===pf){const a=(i-pf)/gf;return function(u,g){const b=u.mul(g,lo),k=u.pow(b,a),C=u.mul(g,k),H=u.mul(u.mul(C,lo),k),U=u.mul(C,u.sub(H,u.ONE));if(!u.eql(u.sqr(U),g))throw new Error("Cannot find square root");return U}}return lb(i)}const fb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hb(i){const a={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},u=fb.reduce((g,b)=>(g[b]="function",g),a);return Ii(i,u)}function pb(i,a,u){if(u<gt)throw new Error("Expected power > 0");if(u===gt)return i.ONE;if(u===nt)return a;let g=i.ONE,b=a;for(;u>gt;)u&nt&&(g=i.mul(g,b)),b=i.sqr(b),u>>=nt;return g}function gb(i,a){const u=new Array(a.length),g=a.reduce((k,C,H)=>i.is0(C)?k:(u[H]=k,i.mul(k,C)),i.ONE),b=i.inv(g);return a.reduceRight((k,C,H)=>i.is0(C)?k:(u[H]=i.mul(k,u[H]),i.mul(k,C)),b),u}function wf(i,a){const u=a!==void 0?a:i.toString(2).length,g=Math.ceil(u/8);return{nBitLength:u,nByteLength:g}}function wb(i,a,u=!1,g={}){if(i<=gt)throw new Error(`Expected Field ORDER > 0, got ${i}`);const{nBitLength:b,nByteLength:k}=wf(i,a);if(k>2048)throw new Error("Field lengths over 2048 bytes are not supported");const C=db(i),H=Object.freeze({ORDER:i,BITS:b,BYTES:k,MASK:Uc(b),ZERO:gt,ONE:nt,create:U=>vt(U,i),isValid:U=>{if(typeof U!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof U}`);return gt<=U&&U<i},is0:U=>U===gt,isOdd:U=>(U&nt)===nt,neg:U=>vt(-U,i),eql:(U,j)=>U===j,sqr:U=>vt(U*U,i),add:(U,j)=>vt(U+j,i),sub:(U,j)=>vt(U-j,i),mul:(U,j)=>vt(U*j,i),pow:(U,j)=>pb(H,U,j),div:(U,j)=>vt(U*jc(j,i),i),sqrN:U=>U*U,addN:(U,j)=>U+j,subN:(U,j)=>U-j,mulN:(U,j)=>U*j,inv:U=>jc(U,i),sqrt:g.sqrt||(U=>C(H,U)),invertBatch:U=>gb(H,U),cmov:(U,j,F)=>F?j:U,toBytes:U=>u?zc(U,k):yr(U,k),fromBytes:U=>{if(U.length!==k)throw new Error(`Fp.fromBytes: expected ${k}, got ${U.length}`);return u?Rc(U):Ht(U)}});return Object.freeze(H)}function mf(i){if(typeof i!="bigint")throw new Error("field order must be bigint");const a=i.toString(2).length;return Math.ceil(a/8)}function bf(i){const a=mf(i);return a+Math.ceil(a/2)}function mb(i,a,u=!1){const g=i.length,b=mf(a),k=bf(a);if(g<16||g<k||g>1024)throw new Error(`expected ${k}-1024 bytes of input, got ${g}`);const C=u?Ht(i):Rc(i),H=vt(C,a-nt)+nt;return u?zc(H,b):yr(H,b)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bb=BigInt(0),Dc=BigInt(1);function yb(i,a){const u=(b,k)=>{const C=k.negate();return b?C:k},g=b=>{const k=Math.ceil(a/b)+1,C=2**(b-1);return{windows:k,windowSize:C}};return{constTimeNegate:u,unsafeLadder(b,k){let C=i.ZERO,H=b;for(;k>bb;)k&Dc&&(C=C.add(H)),H=H.double(),k>>=Dc;return C},precomputeWindow(b,k){const{windows:C,windowSize:H}=g(k),U=[];let j=b,F=j;for(let V=0;V<C;V++){F=j,U.push(F);for(let X=1;X<H;X++)F=F.add(j),U.push(F);j=F.double()}return U},wNAF(b,k,C){const{windows:H,windowSize:U}=g(b);let j=i.ZERO,F=i.BASE;const V=BigInt(2**b-1),X=2**b,J=BigInt(b);for(let ee=0;ee<H;ee++){const Y=ee*U;let te=Number(C&V);C>>=J,te>U&&(te-=X,C+=Dc);const ne=Y,Q=Y+Math.abs(te)-1,ue=ee%2!==0,_e=te<0;te===0?F=F.add(u(ue,k[ne])):j=j.add(u(_e,k[Q]))}return{p:j,f:F}},wNAFCached(b,k,C,H){const U=b._WINDOW_SIZE||1;let j=k.get(b);return j||(j=this.precomputeWindow(b,U),U!==1&&k.set(b,H(j))),this.wNAF(U,j,C)}}}function yf(i){return hb(i.Fp),Ii(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wf(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vb(i){const a=yf(i);Ii(a,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:u,Fp:g,a:b}=a;if(u){if(!g.eql(b,g.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof u!="object"||typeof u.beta!="bigint"||typeof u.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...a})}const{bytesToNumberBE:_b,hexToBytes:Eb}=ab,fo={Err:class extends Error{constructor(i=""){super(i)}},_parseInt(i){const{Err:a}=fo;if(i.length<2||i[0]!==2)throw new a("Invalid signature integer tag");const u=i[1],g=i.subarray(2,u+2);if(!u||g.length!==u)throw new a("Invalid signature integer: wrong length");if(g[0]&128)throw new a("Invalid signature integer: negative");if(g[0]===0&&!(g[1]&128))throw new a("Invalid signature integer: unnecessary leading zero");return{d:_b(g),l:i.subarray(u+2)}},toSig(i){const{Err:a}=fo,u=typeof i=="string"?Eb(i):i;if(!(u instanceof Uint8Array))throw new Error("ui8a expected");let g=u.length;if(g<2||u[0]!=48)throw new a("Invalid signature tag");if(u[1]!==g-2)throw new a("Invalid signature: incorrect length");const{d:b,l:k}=fo._parseInt(u.subarray(2)),{d:C,l:H}=fo._parseInt(k);if(H.length)throw new a("Invalid signature: left bytes after parsing");return{r:b,s:C}},hexFromSig(i){const a=j=>Number.parseInt(j[0],16)&8?"00"+j:j,u=j=>{const F=j.toString(16);return F.length&1?`0${F}`:F},g=a(u(i.s)),b=a(u(i.r)),k=g.length/2,C=b.length/2,H=u(k),U=u(C);return`30${u(C+k+4)}02${U}${b}02${H}${g}`}},Vn=BigInt(0),Xt=BigInt(1);BigInt(2);const vf=BigInt(3);BigInt(4);function kb(i){const a=vb(i),{Fp:u}=a,g=a.toBytes||((ee,Y,te)=>{const ne=Y.toAffine();return uo(Uint8Array.from([4]),u.toBytes(ne.x),u.toBytes(ne.y))}),b=a.fromBytes||(ee=>{const Y=ee.subarray(1),te=u.fromBytes(Y.subarray(0,u.BYTES)),ne=u.fromBytes(Y.subarray(u.BYTES,2*u.BYTES));return{x:te,y:ne}});function k(ee){const{a:Y,b:te}=a,ne=u.sqr(ee),Q=u.mul(ne,ee);return u.add(u.add(Q,u.mul(ee,Y)),te)}if(!u.eql(u.sqr(a.Gy),k(a.Gx)))throw new Error("bad generator point: equation left != right");function C(ee){return typeof ee=="bigint"&&Vn<ee&&ee<a.n}function H(ee){if(!C(ee))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function U(ee){const{allowedPrivateKeyLengths:Y,nByteLength:te,wrapPrivateKey:ne,n:Q}=a;if(Y&&typeof ee!="bigint"){if(ee instanceof Uint8Array&&(ee=Uo(ee)),typeof ee!="string"||!Y.includes(ee.length))throw new Error("Invalid key");ee=ee.padStart(te*2,"0")}let ue;try{ue=typeof ee=="bigint"?ee:Ht($t("private key",ee,te))}catch{throw new Error(`private key must be ${te} bytes, hex or bigint, not ${typeof ee}`)}return ne&&(ue=vt(ue,Q)),H(ue),ue}const j=new Map;function F(ee){if(!(ee instanceof V))throw new Error("ProjectivePoint expected")}class V{constructor(Y,te,ne){if(this.px=Y,this.py=te,this.pz=ne,Y==null||!u.isValid(Y))throw new Error("x required");if(te==null||!u.isValid(te))throw new Error("y required");if(ne==null||!u.isValid(ne))throw new Error("z required")}static fromAffine(Y){const{x:te,y:ne}=Y||{};if(!Y||!u.isValid(te)||!u.isValid(ne))throw new Error("invalid affine point");if(Y instanceof V)throw new Error("projective point not allowed");const Q=ue=>u.eql(ue,u.ZERO);return Q(te)&&Q(ne)?V.ZERO:new V(te,ne,u.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Y){const te=u.invertBatch(Y.map(ne=>ne.pz));return Y.map((ne,Q)=>ne.toAffine(te[Q])).map(V.fromAffine)}static fromHex(Y){const te=V.fromAffine(b($t("pointHex",Y)));return te.assertValidity(),te}static fromPrivateKey(Y){return V.BASE.multiply(U(Y))}_setWindowSize(Y){this._WINDOW_SIZE=Y,j.delete(this)}assertValidity(){if(this.is0()){if(a.allowInfinityPoint&&!u.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:Y,y:te}=this.toAffine();if(!u.isValid(Y)||!u.isValid(te))throw new Error("bad point: x or y not FE");const ne=u.sqr(te),Q=k(Y);if(!u.eql(ne,Q))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:Y}=this.toAffine();if(u.isOdd)return!u.isOdd(Y);throw new Error("Field doesn't support isOdd")}equals(Y){F(Y);const{px:te,py:ne,pz:Q}=this,{px:ue,py:_e,pz:Ae}=Y,le=u.eql(u.mul(te,Ae),u.mul(ue,Q)),ce=u.eql(u.mul(ne,Ae),u.mul(_e,Q));return le&&ce}negate(){return new V(this.px,u.neg(this.py),this.pz)}double(){const{a:Y,b:te}=a,ne=u.mul(te,vf),{px:Q,py:ue,pz:_e}=this;let Ae=u.ZERO,le=u.ZERO,ce=u.ZERO,ie=u.mul(Q,Q),fe=u.mul(ue,ue),$e=u.mul(_e,_e),Le=u.mul(Q,ue);return Le=u.add(Le,Le),ce=u.mul(Q,_e),ce=u.add(ce,ce),Ae=u.mul(Y,ce),le=u.mul(ne,$e),le=u.add(Ae,le),Ae=u.sub(fe,le),le=u.add(fe,le),le=u.mul(Ae,le),Ae=u.mul(Le,Ae),ce=u.mul(ne,ce),$e=u.mul(Y,$e),Le=u.sub(ie,$e),Le=u.mul(Y,Le),Le=u.add(Le,ce),ce=u.add(ie,ie),ie=u.add(ce,ie),ie=u.add(ie,$e),ie=u.mul(ie,Le),le=u.add(le,ie),$e=u.mul(ue,_e),$e=u.add($e,$e),ie=u.mul($e,Le),Ae=u.sub(Ae,ie),ce=u.mul($e,fe),ce=u.add(ce,ce),ce=u.add(ce,ce),new V(Ae,le,ce)}add(Y){F(Y);const{px:te,py:ne,pz:Q}=this,{px:ue,py:_e,pz:Ae}=Y;let le=u.ZERO,ce=u.ZERO,ie=u.ZERO;const fe=a.a,$e=u.mul(a.b,vf);let Le=u.mul(te,ue),at=u.mul(ne,_e),ct=u.mul(Q,Ae),ut=u.add(te,ne),de=u.add(ue,_e);ut=u.mul(ut,de),de=u.add(Le,at),ut=u.sub(ut,de),de=u.add(te,Q);let ve=u.add(ue,Ae);return de=u.mul(de,ve),ve=u.add(Le,ct),de=u.sub(de,ve),ve=u.add(ne,Q),le=u.add(_e,Ae),ve=u.mul(ve,le),le=u.add(at,ct),ve=u.sub(ve,le),ie=u.mul(fe,de),le=u.mul($e,ct),ie=u.add(le,ie),le=u.sub(at,ie),ie=u.add(at,ie),ce=u.mul(le,ie),at=u.add(Le,Le),at=u.add(at,Le),ct=u.mul(fe,ct),de=u.mul($e,de),at=u.add(at,ct),ct=u.sub(Le,ct),ct=u.mul(fe,ct),de=u.add(de,ct),Le=u.mul(at,de),ce=u.add(ce,Le),Le=u.mul(ve,de),le=u.mul(ut,le),le=u.sub(le,Le),Le=u.mul(ut,at),ie=u.mul(ve,ie),ie=u.add(ie,Le),new V(le,ce,ie)}subtract(Y){return this.add(Y.negate())}is0(){return this.equals(V.ZERO)}wNAF(Y){return J.wNAFCached(this,j,Y,te=>{const ne=u.invertBatch(te.map(Q=>Q.pz));return te.map((Q,ue)=>Q.toAffine(ne[ue])).map(V.fromAffine)})}multiplyUnsafe(Y){const te=V.ZERO;if(Y===Vn)return te;if(H(Y),Y===Xt)return this;const{endo:ne}=a;if(!ne)return J.unsafeLadder(this,Y);let{k1neg:Q,k1:ue,k2neg:_e,k2:Ae}=ne.splitScalar(Y),le=te,ce=te,ie=this;for(;ue>Vn||Ae>Vn;)ue&Xt&&(le=le.add(ie)),Ae&Xt&&(ce=ce.add(ie)),ie=ie.double(),ue>>=Xt,Ae>>=Xt;return Q&&(le=le.negate()),_e&&(ce=ce.negate()),ce=new V(u.mul(ce.px,ne.beta),ce.py,ce.pz),le.add(ce)}multiply(Y){H(Y);let te=Y,ne,Q;const{endo:ue}=a;if(ue){const{k1neg:_e,k1:Ae,k2neg:le,k2:ce}=ue.splitScalar(te);let{p:ie,f:fe}=this.wNAF(Ae),{p:$e,f:Le}=this.wNAF(ce);ie=J.constTimeNegate(_e,ie),$e=J.constTimeNegate(le,$e),$e=new V(u.mul($e.px,ue.beta),$e.py,$e.pz),ne=ie.add($e),Q=fe.add(Le)}else{const{p:_e,f:Ae}=this.wNAF(te);ne=_e,Q=Ae}return V.normalizeZ([ne,Q])[0]}multiplyAndAddUnsafe(Y,te,ne){const Q=V.BASE,ue=(Ae,le)=>le===Vn||le===Xt||!Ae.equals(Q)?Ae.multiplyUnsafe(le):Ae.multiply(le),_e=ue(this,te).add(ue(Y,ne));return _e.is0()?void 0:_e}toAffine(Y){const{px:te,py:ne,pz:Q}=this,ue=this.is0();Y==null&&(Y=ue?u.ONE:u.inv(Q));const _e=u.mul(te,Y),Ae=u.mul(ne,Y),le=u.mul(Q,Y);if(ue)return{x:u.ZERO,y:u.ZERO};if(!u.eql(le,u.ONE))throw new Error("invZ was invalid");return{x:_e,y:Ae}}isTorsionFree(){const{h:Y,isTorsionFree:te}=a;if(Y===Xt)return!0;if(te)return te(V,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:Y,clearCofactor:te}=a;return Y===Xt?this:te?te(V,this):this.multiplyUnsafe(a.h)}toRawBytes(Y=!0){return this.assertValidity(),g(V,this,Y)}toHex(Y=!0){return Uo(this.toRawBytes(Y))}}V.BASE=new V(a.Gx,a.Gy,u.ONE),V.ZERO=new V(u.ZERO,u.ONE,u.ZERO);const X=a.nBitLength,J=yb(V,a.endo?Math.ceil(X/2):X);return{CURVE:a,ProjectivePoint:V,normPrivateKeyToScalar:U,weierstrassEquation:k,isWithinCurveOrder:C}}function Ab(i){const a=yf(i);return Ii(a,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...a})}function Sb(i){const a=Ab(i),{Fp:u,n:g}=a,b=u.BYTES+1,k=2*u.BYTES+1;function C(de){return Vn<de&&de<u.ORDER}function H(de){return vt(de,g)}function U(de){return jc(de,g)}const{ProjectivePoint:j,normPrivateKeyToScalar:F,weierstrassEquation:V,isWithinCurveOrder:X}=kb({...a,toBytes(de,ve,ze){const Ke=ve.toAffine(),Ye=u.toBytes(Ke.x),qe=uo;return ze?qe(Uint8Array.from([ve.hasEvenY()?2:3]),Ye):qe(Uint8Array.from([4]),Ye,u.toBytes(Ke.y))},fromBytes(de){const ve=de.length,ze=de[0],Ke=de.subarray(1);if(ve===b&&(ze===2||ze===3)){const Ye=Ht(Ke);if(!C(Ye))throw new Error("Point is not on curve");const qe=V(Ye);let xt=u.sqrt(qe);const _t=(xt&Xt)===Xt;return(ze&1)===1!==_t&&(xt=u.neg(xt)),{x:Ye,y:xt}}else if(ve===k&&ze===4){const Ye=u.fromBytes(Ke.subarray(0,u.BYTES)),qe=u.fromBytes(Ke.subarray(u.BYTES,2*u.BYTES));return{x:Ye,y:qe}}else throw new Error(`Point of length ${ve} was invalid. Expected ${b} compressed bytes or ${k} uncompressed bytes`)}}),J=de=>Uo(yr(de,a.nByteLength));function ee(de){const ve=g>>Xt;return de>ve}function Y(de){return ee(de)?H(-de):de}const te=(de,ve,ze)=>Ht(de.slice(ve,ze));class ne{constructor(ve,ze,Ke){this.r=ve,this.s=ze,this.recovery=Ke,this.assertValidity()}static fromCompact(ve){const ze=a.nByteLength;return ve=$t("compactSignature",ve,ze*2),new ne(te(ve,0,ze),te(ve,ze,2*ze))}static fromDER(ve){const{r:ze,s:Ke}=fo.toSig($t("DER",ve));return new ne(ze,Ke)}assertValidity(){if(!X(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!X(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ve){return new ne(this.r,this.s,ve)}recoverPublicKey(ve){const{r:ze,s:Ke,recovery:Ye}=this,qe=ce($t("msgHash",ve));if(Ye==null||![0,1,2,3].includes(Ye))throw new Error("recovery id invalid");const xt=Ye===2||Ye===3?ze+a.n:ze;if(xt>=u.ORDER)throw new Error("recovery id 2 or 3 invalid");const _t=Ye&1?"03":"02",jt=j.fromHex(_t+J(xt)),lt=U(xt),en=H(-qe*lt),fn=H(Ke*lt),Sn=j.BASE.multiplyAndAddUnsafe(jt,en,fn);if(!Sn)throw new Error("point at infinify");return Sn.assertValidity(),Sn}hasHighS(){return ee(this.s)}normalizeS(){return this.hasHighS()?new ne(this.r,H(-this.s),this.recovery):this}toDERRawBytes(){return Mo(this.toDERHex())}toDERHex(){return fo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Mo(this.toCompactHex())}toCompactHex(){return J(this.r)+J(this.s)}}const Q={isValidPrivateKey(de){try{return F(de),!0}catch{return!1}},normPrivateKeyToScalar:F,randomPrivateKey:()=>{const de=bf(a.n);return mb(a.randomBytes(de),a.n)},precompute(de=8,ve=j.BASE){return ve._setWindowSize(de),ve.multiply(BigInt(3)),ve}};function ue(de,ve=!0){return j.fromPrivateKey(de).toRawBytes(ve)}function _e(de){const ve=de instanceof Uint8Array,ze=typeof de=="string",Ke=(ve||ze)&&de.length;return ve?Ke===b||Ke===k:ze?Ke===2*b||Ke===2*k:de instanceof j}function Ae(de,ve,ze=!0){if(_e(de))throw new Error("first arg must be private key");if(!_e(ve))throw new Error("second arg must be public key");return j.fromHex(ve).multiply(F(de)).toRawBytes(ze)}const le=a.bits2int||function(de){const ve=Ht(de),ze=de.length*8-a.nBitLength;return ze>0?ve>>BigInt(ze):ve},ce=a.bits2int_modN||function(de){return H(le(de))},ie=Uc(a.nBitLength);function fe(de){if(typeof de!="bigint")throw new Error("bigint expected");if(!(Vn<=de&&de<ie))throw new Error(`bigint expected < 2^${a.nBitLength}`);return yr(de,a.nByteLength)}function $e(de,ve,ze=Le){if(["recovered","canonical"].some(Gt=>Gt in ze))throw new Error("sign() legacy options not supported");const{hash:Ke,randomBytes:Ye}=a;let{lowS:qe,prehash:xt,extraEntropy:_t}=ze;qe==null&&(qe=!0),de=$t("msgHash",de),xt&&(de=$t("prehashed msgHash",Ke(de)));const jt=ce(de),lt=F(ve),en=[fe(lt),fe(jt)];if(_t!=null){const Gt=_t===!0?Ye(u.BYTES):_t;en.push($t("extraEntropy",Gt))}const fn=uo(...en),Sn=jt;function $r(Gt){const xr=le(Gt);if(!X(xr))return;const wo=U(xr),Zt=j.BASE.multiply(xr).toAffine(),Zn=H(Zt.x);if(Zn===Vn)return;const mo=H(wo*H(Sn+Zn*lt));if(mo===Vn)return;let bo=(Zt.x===Zn?0:2)|Number(Zt.y&Xt),Tr=mo;return qe&&ee(mo)&&(Tr=Y(mo),bo^=1),new ne(Zn,Tr,bo)}return{seed:fn,k2sig:$r}}const Le={lowS:a.lowS,prehash:!1},at={lowS:a.lowS,prehash:!1};function ct(de,ve,ze=Le){const{seed:Ke,k2sig:Ye}=$e(de,ve,ze),qe=a;return hf(qe.hash.outputLen,qe.nByteLength,qe.hmac)(Ke,Ye)}j.BASE._setWindowSize(8);function ut(de,ve,ze,Ke=at){var Ye;const qe=de;if(ve=$t("msgHash",ve),ze=$t("publicKey",ze),"strict"in Ke)throw new Error("options.strict was renamed to lowS");const{lowS:xt,prehash:_t}=Ke;let jt,lt;try{if(typeof qe=="string"||qe instanceof Uint8Array)try{jt=ne.fromDER(qe)}catch(Zt){if(!(Zt instanceof fo.Err))throw Zt;jt=ne.fromCompact(qe)}else if(typeof qe=="object"&&typeof qe.r=="bigint"&&typeof qe.s=="bigint"){const{r:Zt,s:Zn}=qe;jt=new ne(Zt,Zn)}else throw new Error("PARSE");lt=j.fromHex(ze)}catch(Zt){if(Zt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(xt&&jt.hasHighS())return!1;_t&&(ve=a.hash(ve));const{r:en,s:fn}=jt,Sn=ce(ve),$r=U(fn),Gt=H(Sn*$r),xr=H(en*$r),wo=(Ye=j.BASE.multiplyAndAddUnsafe(lt,Gt,xr))==null?void 0:Ye.toAffine();return wo?H(wo.x)===en:!1}return{CURVE:a,getPublicKey:ue,getSharedSecret:Ae,sign:ct,verify:ut,ProjectivePoint:j,Signature:ne,utils:Q}}class _f extends cf{constructor(a,u){super(),this.finished=!1,this.destroyed=!1,jm(a);const g=Ic(u);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const b=this.blockLen,k=new Uint8Array(b);k.set(g.length>b?a.create().update(g).digest():g);for(let C=0;C<k.length;C++)k[C]^=54;this.iHash.update(k),this.oHash=a.create();for(let C=0;C<k.length;C++)k[C]^=106;this.oHash.update(k),k.fill(0)}update(a){return Ss(this),this.iHash.update(a),this}digestInto(a){Ss(this),sf(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:u,iHash:g,finished:b,destroyed:k,blockLen:C,outputLen:H}=this;return a=a,a.finished=b,a.destroyed=k,a.blockLen=C,a.outputLen=H,a.oHash=u._cloneInto(a.oHash),a.iHash=g._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ef=(i,a,u)=>new _f(i,a).update(u).digest();Ef.create=(i,a)=>new _f(i,a);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $b(i){return{hash:i,hmac:(a,...u)=>Ef(i,a,Vm(...u)),randomBytes:uf}}function xb(i,a){const u=g=>Sb({...i,...$b(g)});return Object.freeze({...u(a),create:u})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ts=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ps=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kf=BigInt(1),Ls=BigInt(2),Af=(i,a)=>(i+a/Ls)/a;function Sf(i){const a=Ts,u=BigInt(3),g=BigInt(6),b=BigInt(11),k=BigInt(22),C=BigInt(23),H=BigInt(44),U=BigInt(88),j=i*i*i%a,F=j*j*i%a,V=Jt(F,u,a)*F%a,X=Jt(V,u,a)*F%a,J=Jt(X,Ls,a)*j%a,ee=Jt(J,b,a)*J%a,Y=Jt(ee,k,a)*ee%a,te=Jt(Y,H,a)*Y%a,ne=Jt(te,U,a)*te%a,Q=Jt(ne,H,a)*Y%a,ue=Jt(Q,u,a)*F%a,_e=Jt(ue,C,a)*ee%a,Ae=Jt(_e,g,a)*j%a,le=Jt(Ae,Ls,a);if(!qc.eql(qc.sqr(le),i))throw new Error("Cannot find square root");return le}const qc=wb(Ts,void 0,void 0,{sqrt:Sf}),Oi=xb({a:BigInt(0),b:BigInt(7),Fp:qc,n:Ps,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{const a=Ps,u=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),g=-kf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),b=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),k=u,C=BigInt("0x100000000000000000000000000000000"),H=Af(k*i,a),U=Af(-g*i,a);let j=vt(i-H*u-U*b,a),F=vt(-H*g-U*k,a);const V=j>C,X=F>C;if(V&&(j=a-j),X&&(F=a-F),j>C||F>C)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:V,k1:j,k2neg:X,k2:F}}}},Oc),Cs=BigInt(0),$f=i=>typeof i=="bigint"&&Cs<i&&i<Ts,Tb=i=>typeof i=="bigint"&&Cs<i&&i<Ps,xf={};function Bs(i,...a){let u=xf[i];if(u===void 0){const g=Oc(Uint8Array.from(i,b=>b.charCodeAt(0)));u=uo(g,g),xf[i]=u}return Oc(uo(u,...a))}const Vc=i=>i.toRawBytes(!0).slice(1),Fc=i=>yr(i,32),Wc=i=>vt(i,Ts),Ni=i=>vt(i,Ps),Kc=Oi.ProjectivePoint,Pb=(i,a,u)=>Kc.BASE.multiplyAndAddUnsafe(i,a,u);function Gc(i){let a=Oi.utils.normPrivateKeyToScalar(i),u=Kc.fromPrivateKey(a);return{scalar:u.hasEvenY()?a:Ni(-a),bytes:Vc(u)}}function Tf(i){if(!$f(i))throw new Error("bad x: need 0 < x < p");const a=Wc(i*i),u=Wc(a*i+BigInt(7));let g=Sf(u);g%Ls!==Cs&&(g=Wc(-g));const b=new Kc(i,g,kf);return b.assertValidity(),b}function Pf(...i){return Ni(Ht(Bs("BIP0340/challenge",...i)))}function Lb(i){return Gc(i).bytes}function Cb(i,a,u=uf(32)){const g=$t("message",i),{bytes:b,scalar:k}=Gc(a),C=$t("auxRand",u,32),H=Fc(k^Ht(Bs("BIP0340/aux",C))),U=Bs("BIP0340/nonce",H,b,g),j=Ni(Ht(U));if(j===Cs)throw new Error("sign failed: k is zero");const{bytes:F,scalar:V}=Gc(j),X=Pf(F,b,g),J=new Uint8Array(64);if(J.set(F,0),J.set(Fc(Ni(V+X*k)),32),!Lf(J,g,b))throw new Error("sign: Invalid signature produced");return J}function Lf(i,a,u){const g=$t("signature",i,64),b=$t("message",a),k=$t("publicKey",u,32);try{const C=Tf(Ht(k)),H=Ht(g.subarray(0,32));if(!$f(H))return!1;const U=Ht(g.subarray(32,64));if(!Tb(U))return!1;const j=Pf(Fc(H),Vc(C),b),F=Pb(C,U,Ni(-j));return!(!F||!F.hasEvenY()||F.toAffine().x!==H)}catch{return!1}}const zt={getPublicKey:Lb,sign:Cb,verify:Lf,utils:{randomPrivateKey:Oi.utils.randomPrivateKey,lift_x:Tf,pointToBytes:Vc,numberToBytesBE:yr,bytesToNumberBE:Ht,taggedHash:Bs,mod:vt}};function Zc(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}function Bb(i){if(typeof i!="boolean")throw new Error(`Expected boolean, not ${i}`)}function Cf(i,...a){if(!(i instanceof Uint8Array))throw new Error("Expected Uint8Array");if(a.length>0&&!a.includes(i.length))throw new Error(`Expected Uint8Array of length ${a}, not of length=${i.length}`)}function Ib(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Zc(i.outputLen),Zc(i.blockLen)}function Ob(i,a=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(a&&i.finished)throw new Error("Hash#digest() has already been called")}function Nb(i,a){Cf(i);const u=a.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}const Yc={number:Zc,bool:Bb,bytes:Cf,hash:Ib,exists:Ob,output:Nb};function Rb(i,a,u,g){if(typeof i.setBigUint64=="function")return i.setBigUint64(a,u,g);const b=BigInt(32),k=BigInt(4294967295),C=Number(u>>b&k),H=Number(u&k),U=g?4:0,j=g?0:4;i.setUint32(a+U,C,g),i.setUint32(a+j,H,g)}class zb extends Mm{constructor(a,u,g,b){super(),this.blockLen=a,this.outputLen=u,this.padOffset=g,this.isLE=b,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(a),this.view=Pc(this.buffer)}update(a){Yc.exists(this);const{view:u,buffer:g,blockLen:b}=this;a=nf(a);const k=a.length;for(let C=0;C<k;){const H=Math.min(b-this.pos,k-C);if(H===b){const U=Pc(a);for(;b<=k-C;C+=b)this.process(U,C);continue}g.set(a.subarray(C,C+H),this.pos),this.pos+=H,C+=H,this.pos===b&&(this.process(u,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){Yc.exists(this),Yc.output(a,this),this.finished=!0;const{buffer:u,view:g,blockLen:b,isLE:k}=this;let{pos:C}=this;u[C++]=128,this.buffer.subarray(C).fill(0),this.padOffset>b-C&&(this.process(g,0),C=0);for(let V=C;V<b;V++)u[V]=0;Rb(g,b-8,BigInt(this.length*8),k),this.process(g,0);const H=Pc(a),U=this.outputLen;if(U%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const j=U/4,F=this.get();if(j>F.length)throw new Error("_sha2: outputLen bigger than state");for(let V=0;V<j;V++)H.setUint32(4*V,F[V],k)}digest(){const{buffer:a,outputLen:u}=this;this.digestInto(a);const g=a.slice(0,u);return this.destroy(),g}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());const{blockLen:u,buffer:g,length:b,finished:k,destroyed:C,pos:H}=this;return a.length=b,a.pos=H,a.finished=k,a.destroyed=C,b%u&&a.buffer.set(g),a}}const Ub=(i,a,u)=>i&a^~i&u,Mb=(i,a,u)=>i&a^i&u^a&u,Hb=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_r=new Uint32Array(64);class Bf extends zb{constructor(){super(64,32,8,!1),this.A=vr[0]|0,this.B=vr[1]|0,this.C=vr[2]|0,this.D=vr[3]|0,this.E=vr[4]|0,this.F=vr[5]|0,this.G=vr[6]|0,this.H=vr[7]|0}get(){const{A:a,B:u,C:g,D:b,E:k,F:C,G:H,H:U}=this;return[a,u,g,b,k,C,H,U]}set(a,u,g,b,k,C,H,U){this.A=a|0,this.B=u|0,this.C=g|0,this.D=b|0,this.E=k|0,this.F=C|0,this.G=H|0,this.H=U|0}process(a,u){for(let V=0;V<16;V++,u+=4)_r[V]=a.getUint32(u,!1);for(let V=16;V<64;V++){const X=_r[V-15],J=_r[V-2],ee=_n(X,7)^_n(X,18)^X>>>3,Y=_n(J,17)^_n(J,19)^J>>>10;_r[V]=Y+_r[V-7]+ee+_r[V-16]|0}let{A:g,B:b,C:k,D:C,E:H,F:U,G:j,H:F}=this;for(let V=0;V<64;V++){const X=_n(H,6)^_n(H,11)^_n(H,25),J=F+X+Ub(H,U,j)+Hb[V]+_r[V]|0,ee=(_n(g,2)^_n(g,13)^_n(g,22))+Mb(g,b,k)|0;F=j,j=U,U=H,H=C+J|0,C=k,k=b,b=g,g=J+ee|0}g=g+this.A|0,b=b+this.B|0,k=k+this.C|0,C=C+this.D|0,H=H+this.E|0,U=U+this.F|0,j=j+this.G|0,F=F+this.H|0,this.set(g,b,k,C,H,U,j,F)}roundClean(){_r.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class jb extends Bf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Jc=rf(()=>new Bf);rf(()=>new jb);var Ho=Symbol("verified"),Db=i=>i instanceof Object;function qb(i){if(!Db(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let a=0;a<i.tags.length;a++){let u=i.tags[a];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}new TextDecoder("utf-8");var Vb=new TextEncoder,Fb=class{generateSecretKey(){return zt.utils.randomPrivateKey()}getPublicKey(i){return Rt(zt.getPublicKey(i))}finalizeEvent(i,a){const u=i;return u.pubkey=Rt(zt.getPublicKey(a)),u.id=Xc(u),u.sig=Rt(zt.sign(Xc(u),a)),u[Ho]=!0,u}verifyEvent(i){if(typeof i[Ho]=="boolean")return i[Ho];const a=Xc(i);if(a!==i.id)return i[Ho]=!1,!1;try{const u=zt.verify(i.sig,a,i.pubkey);return i[Ho]=u,u}catch{return i[Ho]=!1,!1}}};function Wb(i){if(!qb(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function Xc(i){let a=Jc(Vb.encode(Wb(i)));return Rt(a)}var Is=new Fb,Kb=Is.generateSecretKey,If=Is.getPublicKey;Is.finalizeEvent,Is.verifyEvent;var ho=Symbol("verified"),Gb=i=>i instanceof Object;function Zb(i){if(!Gb(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let a=0;a<i.tags.length;a++){let u=i.tags[a];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}new TextDecoder("utf-8");var Yb=new TextEncoder;function Ri(i){i.indexOf("://")===-1&&(i="wss://"+i);let a=new URL(i);return a.pathname=a.pathname.replace(/\/+/g,"/"),a.pathname.endsWith("/")&&(a.pathname=a.pathname.slice(0,-1)),(a.port==="80"&&a.protocol==="ws:"||a.port==="443"&&a.protocol==="wss:")&&(a.port=""),a.searchParams.sort(),a.hash="",a.toString()}var Jb=class{constructor(i){ae(this,"value"),ae(this,"next",null),ae(this,"prev",null),this.value=i}},Xb=class{constructor(){ae(this,"first"),ae(this,"last"),this.first=null,this.last=null}enqueue(i){const a=new Jb(i);return this.last?this.last===this.first?(this.last=a,this.last.prev=this.first,this.first.next=a):(a.prev=this.last,this.last.next=a,this.last=a):(this.first=a,this.last=a),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const a=this.first;return this.first=null,this.last=null,a.value}const i=this.first;return this.first=i.next,i.value}},Qb=class{generateSecretKey(){return zt.utils.randomPrivateKey()}getPublicKey(i){return Rt(zt.getPublicKey(i))}finalizeEvent(i,a){const u=i;return u.pubkey=Rt(zt.getPublicKey(a)),u.id=Qc(u),u.sig=Rt(zt.sign(Qc(u),a)),u[ho]=!0,u}verifyEvent(i){if(typeof i[ho]=="boolean")return i[ho];const a=Qc(i);if(a!==i.id)return i[ho]=!1,!1;try{const u=zt.verify(i.sig,a,i.pubkey);return i[ho]=u,u}catch{return i[ho]=!1,!1}}};function ey(i){if(!Zb(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function Qc(i){let a=Jc(Yb.encode(ey(i)));return Rt(a)}var Os=new Qb;Os.generateSecretKey,Os.getPublicKey,Os.finalizeEvent;var ty=Os.verifyEvent,ny=22242;function ry(i,a){if(i.ids&&i.ids.indexOf(a.id)===-1&&!i.ids.some(u=>a.id.startsWith(u))||i.kinds&&i.kinds.indexOf(a.kind)===-1||i.authors&&i.authors.indexOf(a.pubkey)===-1&&!i.authors.some(u=>a.pubkey.startsWith(u)))return!1;for(let u in i)if(u[0]==="#"){let g=u.slice(1),b=i[`#${g}`];if(b&&!a.tags.find(([k,C])=>k===u.slice(1)&&b.indexOf(C)!==-1))return!1}return!(i.since&&a.created_at<i.since||i.until&&a.created_at>i.until)}function oy(i,a){for(let u=0;u<i.length;u++)if(ry(i[u],a))return!0;return!1}function iy(i,a){let u=a.length+3,g=i.indexOf(`"${a}":`)+u,b=i.slice(g).indexOf('"')+g+1;return i.slice(b,b+64)}function sy(i){let a=i.slice(0,22).indexOf('"EVENT"');if(a===-1)return null;let u=i.slice(a+7+1).indexOf('"');if(u===-1)return null;let g=a+7+1+u,b=i.slice(g+1,80).indexOf('"');if(b===-1)return null;let k=g+1+b;return i.slice(g+1,k)}function ay(i,a){return{kind:ny,created_at:Math.floor(Date.now()/1e3),tags:[["relay",i],["challenge",a]],content:""}}async function cy(){return new Promise(i=>{const a=new MessageChannel,u=()=>{a.port1.removeEventListener("message",u),i()};a.port1.addEventListener("message",u),a.port2.postMessage(0),a.port1.start()})}var uy=i=>(i[ho]=!0,!0),Of;try{Of=WebSocket}catch{}var Nf=class{constructor(i,a){ae(this,"url"),ae(this,"_connected",!1),ae(this,"onclose",null),ae(this,"onnotice",u=>console.debug(`NOTICE from ${this.url}: ${u}`)),ae(this,"_onauth",null),ae(this,"baseEoseTimeout",4400),ae(this,"connectionTimeout",4400),ae(this,"openSubs",new Map),ae(this,"connectionTimeoutHandle"),ae(this,"connectionPromise"),ae(this,"openCountRequests",new Map),ae(this,"openEventPublishes",new Map),ae(this,"ws"),ae(this,"incomingMessageQueue",new Xb),ae(this,"queueRunning",!1),ae(this,"challenge"),ae(this,"serial",0),ae(this,"verifyEvent"),this.url=Ri(i),this.verifyEvent=a.verifyEvent}static async connect(i,a){const u=new Nf(i,a);return await u.connect(),u}closeAllSubscriptions(i){for(let[a,u]of this.openSubs)u.close(i);this.openSubs.clear();for(let[a,u]of this.openEventPublishes)u.reject(new Error(i));this.openEventPublishes.clear();for(let[a,u]of this.openCountRequests)u.reject(new Error(i));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((i,a)=>{this.connectionTimeoutHandle=setTimeout(()=>{var u;a("connection timed out"),this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Of(this.url)}catch(u){a(u);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,i()},this.ws.onerror=u=>{var g;a(u.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var u;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await cy();this.queueRunning=!1}handleNext(){var i,a,u;const g=this.incomingMessageQueue.dequeue();if(!g)return!1;const b=sy(g);if(b){const k=this.openSubs.get(b);if(!k)return;const C=iy(g,"id"),H=(i=k.alreadyHaveEvent)==null?void 0:i.call(k,C);if((a=k.receivedEvent)==null||a.call(k,this,C),H)return}try{let k=JSON.parse(g);switch(k[0]){case"EVENT":{const C=this.openSubs.get(k[1]),H=k[2];this.verifyEvent(H)&&oy(C.filters,H)&&C.onevent(H);return}case"COUNT":{const C=k[1],H=k[2],U=this.openCountRequests.get(C);U&&(U.resolve(H.count),this.openCountRequests.delete(C));return}case"EOSE":{const C=this.openSubs.get(k[1]);if(!C)return;C.receivedEose();return}case"OK":{const C=k[1],H=k[2],U=k[3],j=this.openEventPublishes.get(C);H?j.resolve(U):j.reject(new Error(U)),this.openEventPublishes.delete(C);return}case"CLOSED":{const C=k[1],H=this.openSubs.get(C);if(!H)return;H.closed=!0,H.close(k[2]);return}case"NOTICE":this.onnotice(k[1]);return;case"AUTH":{this.challenge=k[1],(u=this._onauth)==null||u.call(this,k[1]);return}}}catch{return}}async send(i){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var a;(a=this.ws)==null||a.send(i)})}async auth(i){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const a=await i(ay(this.url,this.challenge)),u=new Promise((g,b)=>{this.openEventPublishes.set(a.id,{resolve:g,reject:b})});return this.send('["AUTH",'+JSON.stringify(a)+"]"),u}async publish(i){const a=new Promise((u,g)=>{this.openEventPublishes.set(i.id,{resolve:u,reject:g})});return this.send('["EVENT",'+JSON.stringify(i)+"]"),a}async count(i,a){this.serial++;const u=(a==null?void 0:a.id)||"count:"+this.serial,g=new Promise((b,k)=>{this.openCountRequests.set(u,{resolve:b,reject:k})});return this.send('["COUNT","'+u+'",'+JSON.stringify(i)+"]"),g}subscribe(i,a){const u=this.prepareSubscription(i,a);return u.fire(),u}prepareSubscription(i,a){this.serial++;const u=a.id||"sub:"+this.serial,g=new ly(this,u,i,a);return this.openSubs.set(u,g),g}close(){var i;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(i=this.ws)==null||i.close()}_onmessage(i){this.incomingMessageQueue.enqueue(i.data),this.queueRunning||this.runQueue()}},ly=class{constructor(i,a,u,g){ae(this,"relay"),ae(this,"id"),ae(this,"closed",!1),ae(this,"eosed",!1),ae(this,"filters"),ae(this,"alreadyHaveEvent"),ae(this,"receivedEvent"),ae(this,"onevent"),ae(this,"oneose"),ae(this,"onclose"),ae(this,"eoseTimeout"),ae(this,"eoseTimeoutHandle"),this.relay=i,this.filters=u,this.id=a,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||i.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(b=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,b)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var i;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(i=this.oneose)==null||i.call(this))}close(i="closed by caller"){var a;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(a=this.onclose)==null||a.call(this,i)}},dy=class{constructor(i){ae(this,"relays",new Map),ae(this,"seenOn",new Map),ae(this,"trackRelays",!1),ae(this,"verifyEvent"),ae(this,"trustedRelayURLs",new Set),this.verifyEvent=i.verifyEvent}async ensureRelay(i,a){i=Ri(i);let u=this.relays.get(i);return u||(u=new Nf(i,{verifyEvent:this.trustedRelayURLs.has(i)?uy:this.verifyEvent}),a!=null&&a.connectionTimeout&&(u.connectionTimeout=a.connectionTimeout),this.relays.set(i,u)),await u.connect(),u}close(i){i.map(Ri).forEach(a=>{var u;(u=this.relays.get(a))==null||u.close()})}subscribeMany(i,a,u){return this.subscribeManyMap(Object.fromEntries(i.map(g=>[g,a])),u)}subscribeManyMap(i,a){this.trackRelays&&(a.receivedEvent=(V,X)=>{let J=this.seenOn.get(X);J||(J=new Set,this.seenOn.set(X,J)),J.add(V)});const u=new Set,g=[],b=Object.keys(i).length,k=[];let C=V=>{var X;k[V]=!0,k.filter(J=>J).length===b&&((X=a.oneose)==null||X.call(a),C=()=>{})};const H=[];let U=(V,X)=>{var J;C(V),H[V]=X,H.filter(ee=>ee).length===b&&((J=a.onclose)==null||J.call(a,H),U=()=>{})};const j=V=>{var X;if((X=a.alreadyHaveEvent)!=null&&X.call(a,V))return!0;const J=u.has(V);return u.add(V),J},F=Promise.all(Object.entries(i).map(async(V,X,J)=>{if(J.indexOf(V)!==X){U(X,"duplicate url");return}let[ee,Y]=V;ee=Ri(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:a.maxWait?Math.max(a.maxWait*.8,a.maxWait-1e3):void 0})}catch(Q){U(X,(Q==null?void 0:Q.message)||String(Q));return}let ne=te.subscribe(Y,{...a,oneose:()=>C(X),onclose:Q=>U(X,Q),alreadyHaveEvent:j,eoseTimeout:a.maxWait});g.push(ne)}));return{async close(){await F,g.forEach(V=>{V.close()})}}}subscribeManyEose(i,a,u){const g=this.subscribeMany(i,a,{...u,oneose(){g.close()}});return g}async querySync(i,a,u){return new Promise(async g=>{const b=[];this.subscribeManyEose(i,[a],{...u,onevent(k){b.push(k)},onclose(k){g(b)}})})}async get(i,a,u){a.limit=1;const g=await this.querySync(i,a,u);return g.sort((b,k)=>k.created_at-b.created_at),g[0]||null}publish(i,a){return i.map(Ri).map(async(u,g,b)=>b.indexOf(u)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(u)).publish(a))}},fy=class extends dy{constructor(){super({verifyEvent:ty})}};function Rf(i){return i instanceof Uint8Array||i!=null&&typeof i=="object"&&i.constructor.name==="Uint8Array"}function po(i,...a){if(!Rf(i))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(i.length))throw new Error(`Uint8Array expected of length ${a}, not of length=${i.length}`)}function Ns(i,a=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(a&&i.finished)throw new Error("Hash#digest() has already been called")}function zf(i,a){po(i);const u=a.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Kt=i=>new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)),hy=i=>new DataView(i.buffer,i.byteOffset,i.byteLength);if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function py(i){if(typeof i!="string")throw new Error(`string expected, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function zi(i){if(typeof i=="string")i=py(i);else if(Rf(i))i=i.slice();else throw new Error(`Uint8Array expected, got ${typeof i}`);return i}const gy=(i,a)=>(Object.assign(a,i),a),Fn=16,eu=new Uint8Array(16),kn=Kt(eu),wy=225,my=(i,a,u,g)=>{const b=g&1;return{s3:u<<31|g>>>1,s2:a<<31|u>>>1,s1:i<<31|a>>>1,s0:i>>>1^wy<<24&-(b&1)}},Qt=i=>(i>>>0&255)<<24|(i>>>8&255)<<16|(i>>>16&255)<<8|i>>>24&255|0;function by(i){i.reverse();const a=i[15]&1;let u=0;for(let g=0;g<i.length;g++){const b=i[g];i[g]=b>>>1|u,u=(b&1)<<7}return i[0]^=-a&225,i}const yy=i=>i>64*1024?8:i>1024?4:2;class Uf{constructor(a,u){this.blockLen=Fn,this.outputLen=Fn,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,a=zi(a),po(a,16);const g=hy(a);let b=g.getUint32(0,!1),k=g.getUint32(4,!1),C=g.getUint32(8,!1),H=g.getUint32(12,!1);const U=[];for(let J=0;J<128;J++)U.push({s0:Qt(b),s1:Qt(k),s2:Qt(C),s3:Qt(H)}),{s0:b,s1:k,s2:C,s3:H}=my(b,k,C,H);const j=yy(u||1024);if(![1,2,4,8].includes(j))throw new Error(`ghash: wrong window size=${j}, should be 2, 4 or 8`);this.W=j;const F=128/j,V=this.windowSize=2**j,X=[];for(let J=0;J<F;J++)for(let ee=0;ee<V;ee++){let Y=0,te=0,ne=0,Q=0;for(let ue=0;ue<j;ue++){if(!(ee>>>j-ue-1&1))continue;const{s0:_e,s1:Ae,s2:le,s3:ce}=U[j*J+ue];Y^=_e,te^=Ae,ne^=le,Q^=ce}X.push({s0:Y,s1:te,s2:ne,s3:Q})}this.t=X}_updateBlock(a,u,g,b){a^=this.s0,u^=this.s1,g^=this.s2,b^=this.s3;const{W:k,t:C,windowSize:H}=this;let U=0,j=0,F=0,V=0;const X=(1<<k)-1;let J=0;for(const ee of[a,u,g,b])for(let Y=0;Y<4;Y++){const te=ee>>>8*Y&255;for(let ne=8/k-1;ne>=0;ne--){const Q=te>>>k*ne&X,{s0:ue,s1:_e,s2:Ae,s3:le}=C[J*H+Q];U^=ue,j^=_e,F^=Ae,V^=le,J+=1}}this.s0=U,this.s1=j,this.s2=F,this.s3=V}update(a){a=zi(a),Ns(this);const u=Kt(a),g=Math.floor(a.length/Fn),b=a.length%Fn;for(let k=0;k<g;k++)this._updateBlock(u[k*4+0],u[k*4+1],u[k*4+2],u[k*4+3]);return b&&(eu.set(a.subarray(g*Fn)),this._updateBlock(kn[0],kn[1],kn[2],kn[3]),kn.fill(0)),this}destroy(){const{t:a}=this;for(const u of a)u.s0=0,u.s1=0,u.s2=0,u.s3=0}digestInto(a){Ns(this),zf(a,this),this.finished=!0;const{s0:u,s1:g,s2:b,s3:k}=this,C=Kt(a);return C[0]=u,C[1]=g,C[2]=b,C[3]=k,a}digest(){const a=new Uint8Array(Fn);return this.digestInto(a),this.destroy(),a}}class vy extends Uf{constructor(a,u){a=zi(a);const g=by(a.slice());super(g,u),g.fill(0)}update(a){a=zi(a),Ns(this);const u=Kt(a),g=a.length%Fn,b=Math.floor(a.length/Fn);for(let k=0;k<b;k++)this._updateBlock(Qt(u[k*4+3]),Qt(u[k*4+2]),Qt(u[k*4+1]),Qt(u[k*4+0]));return g&&(eu.set(a.subarray(b*Fn)),this._updateBlock(Qt(kn[3]),Qt(kn[2]),Qt(kn[1]),Qt(kn[0])),kn.fill(0)),this}digestInto(a){Ns(this),zf(a,this),this.finished=!0;const{s0:u,s1:g,s2:b,s3:k}=this,C=Kt(a);return C[0]=u,C[1]=g,C[2]=b,C[3]=k,a.reverse()}}function Mf(i){const a=(g,b)=>i(b,g.length).update(zi(g)).digest(),u=i(new Uint8Array(16),0);return a.outputLen=u.outputLen,a.blockLen=u.blockLen,a.create=(g,b)=>i(g,b),a}Mf((i,a)=>new Uf(i,a)),Mf((i,a)=>new vy(i,a));const Er=16,_y=283;function tu(i){return i<<1^_y&-(i>>7)}function jo(i,a){let u=0;for(;a>0;a>>=1)u^=i&-(a&1),i=tu(i);return u}const nu=(()=>{let i=new Uint8Array(256);for(let u=0,g=1;u<256;u++,g^=tu(g))i[u]=g;const a=new Uint8Array(256);a[0]=99;for(let u=0;u<255;u++){let g=i[255-u];g|=g<<8,a[i[u]]=(g^g>>4^g>>5^g>>6^g>>7^99)&255}return a})(),Ey=nu.map((i,a)=>nu.indexOf(a)),ky=i=>i<<24|i>>>8,ru=i=>i<<8|i>>>24;function Hf(i,a){if(i.length!==256)throw new Error("Wrong sbox length");const u=new Uint32Array(256).map((j,F)=>a(i[F])),g=u.map(ru),b=g.map(ru),k=b.map(ru),C=new Uint32Array(256*256),H=new Uint32Array(256*256),U=new Uint16Array(256*256);for(let j=0;j<256;j++)for(let F=0;F<256;F++){const V=j*256+F;C[V]=u[j]^g[F],H[V]=b[j]^k[F],U[V]=i[j]<<8|i[F]}return{sbox:i,sbox2:U,T0:u,T1:g,T2:b,T3:k,T01:C,T23:H}}const ou=Hf(nu,i=>jo(i,3)<<24|i<<16|i<<8|jo(i,2)),jf=Hf(Ey,i=>jo(i,11)<<24|jo(i,13)<<16|jo(i,9)<<8|jo(i,14)),Ay=(()=>{const i=new Uint8Array(16);for(let a=0,u=1;a<16;a++,u=tu(u))i[a]=u;return i})();function Df(i){po(i);const a=i.length;if(![16,24,32].includes(a))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${a}`);const{sbox2:u}=ou,g=Kt(i),b=g.length,k=H=>An(u,H,H,H,H),C=new Uint32Array(a+28);C.set(g);for(let H=b;H<C.length;H++){let U=C[H-1];H%b===0?U=k(ky(U))^Ay[H/b-1]:b>6&&H%b===4&&(U=k(U)),C[H]=C[H-b]^U}return C}function Sy(i){const a=Df(i),u=a.slice(),g=a.length,{sbox2:b}=ou,{T0:k,T1:C,T2:H,T3:U}=jf;for(let j=0;j<g;j+=4)for(let F=0;F<4;F++)u[j+F]=a[g-j-4+F];a.fill(0);for(let j=4;j<g-4;j++){const F=u[j],V=An(b,F,F,F,F);u[j]=k[V&255]^C[V>>>8&255]^H[V>>>16&255]^U[V>>>24]}return u}function kr(i,a,u,g,b,k){return i[u<<8&65280|g>>>8&255]^a[b>>>8&65280|k>>>24&255]}function An(i,a,u,g,b){return i[a&255|u&65280]|i[g>>>16&255|b>>>16&65280]<<16}function qf(i,a,u,g,b){const{sbox2:k,T01:C,T23:H}=ou;let U=0;a^=i[U++],u^=i[U++],g^=i[U++],b^=i[U++];const j=i.length/4-2;for(let ee=0;ee<j;ee++){const Y=i[U++]^kr(C,H,a,u,g,b),te=i[U++]^kr(C,H,u,g,b,a),ne=i[U++]^kr(C,H,g,b,a,u),Q=i[U++]^kr(C,H,b,a,u,g);a=Y,u=te,g=ne,b=Q}const F=i[U++]^An(k,a,u,g,b),V=i[U++]^An(k,u,g,b,a),X=i[U++]^An(k,g,b,a,u),J=i[U++]^An(k,b,a,u,g);return{s0:F,s1:V,s2:X,s3:J}}function $y(i,a,u,g,b){const{sbox2:k,T01:C,T23:H}=jf;let U=0;a^=i[U++],u^=i[U++],g^=i[U++],b^=i[U++];const j=i.length/4-2;for(let ee=0;ee<j;ee++){const Y=i[U++]^kr(C,H,a,b,g,u),te=i[U++]^kr(C,H,u,a,b,g),ne=i[U++]^kr(C,H,g,u,a,b),Q=i[U++]^kr(C,H,b,g,u,a);a=Y,u=te,g=ne,b=Q}const F=i[U++]^An(k,a,b,g,u),V=i[U++]^An(k,u,a,b,g),X=i[U++]^An(k,g,u,a,b),J=i[U++]^An(k,b,g,u,a);return{s0:F,s1:V,s2:X,s3:J}}function Vf(i,a){if(!a)return new Uint8Array(i);if(po(a),a.length<i)throw new Error(`aes: wrong destination length, expected at least ${i}, got: ${a.length}`);return a}function xy(i){if(po(i),i.length%Er!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Er}`)}function Ty(i,a,u){let g=i.length;const b=g%Er;if(!a&&b!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const k=Kt(i);if(a){let U=Er-b;U||(U=Er),g=g+U}const C=Vf(g,u),H=Kt(C);return{b:k,o:H,out:C}}function Py(i,a){if(!a)return i;const u=i.length;if(!u)throw new Error("aes/pcks5: empty ciphertext not allowed");const g=i[u-1];if(g<=0||g>16)throw new Error(`aes/pcks5: wrong padding byte: ${g}`);const b=i.subarray(0,-g);for(let k=0;k<g;k++)if(i[u-k-1]!==g)throw new Error("aes/pcks5: wrong padding");return b}function Ly(i){const a=new Uint8Array(16),u=Kt(a);a.set(i);const g=Er-i.length;for(let b=Er-g;b<Er;b++)a[b]=g;return u}const Ff=gy({blockSize:16,nonceLength:16},function(i,a,u={}){po(i),po(a,16);const g=!u.disablePadding;return{encrypt:(b,k)=>{const C=Df(i),{b:H,o:U,out:j}=Ty(b,g,k),F=Kt(a);let V=F[0],X=F[1],J=F[2],ee=F[3],Y=0;for(;Y+4<=H.length;)V^=H[Y+0],X^=H[Y+1],J^=H[Y+2],ee^=H[Y+3],{s0:V,s1:X,s2:J,s3:ee}=qf(C,V,X,J,ee),U[Y++]=V,U[Y++]=X,U[Y++]=J,U[Y++]=ee;if(g){const te=Ly(b.subarray(Y*4));V^=te[0],X^=te[1],J^=te[2],ee^=te[3],{s0:V,s1:X,s2:J,s3:ee}=qf(C,V,X,J,ee),U[Y++]=V,U[Y++]=X,U[Y++]=J,U[Y++]=ee}return C.fill(0),j},decrypt:(b,k)=>{xy(b);const C=Sy(i),H=Kt(a),U=Vf(b.length,k),j=Kt(b),F=Kt(U);let V=H[0],X=H[1],J=H[2],ee=H[3];for(let Y=0;Y+4<=j.length;){const te=V,ne=X,Q=J,ue=ee;V=j[Y+0],X=j[Y+1],J=j[Y+2],ee=j[Y+3];const{s0:_e,s1:Ae,s2:le,s3:ce}=$y(C,V,X,J,ee);F[Y++]=_e^te,F[Y++]=Ae^ne,F[Y++]=le^Q,F[Y++]=ce^ue}return C.fill(0),Py(U,g)}}});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Do(i){if(!Number.isSafeInteger(i))throw new Error(`Wrong integer: ${i}`)}function Wn(...i){const a=(b,k)=>C=>b(k(C)),u=Array.from(i).reverse().reduce((b,k)=>b?a(b,k.encode):k.encode,void 0),g=i.reduce((b,k)=>b?a(b,k.decode):k.decode,void 0);return{encode:u,decode:g}}function Kn(i){return{encode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return a.map(u=>{if(Do(u),u<0||u>=i.length)throw new Error(`Digit index outside alphabet: ${u} (alphabet: ${i.length})`);return i[u]})},decode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="string")throw new Error("alphabet.decode input should be array of strings");return a.map(u=>{if(typeof u!="string")throw new Error(`alphabet.decode: not string element=${u}`);const g=i.indexOf(u);if(g===-1)throw new Error(`Unknown letter: "${u}". Allowed: ${i}`);return g})}}}function Gn(i=""){if(typeof i!="string")throw new Error("join separator should be string");return{encode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="string")throw new Error("join.encode input should be array of strings");for(let u of a)if(typeof u!="string")throw new Error(`join.encode: non-string input=${u}`);return a.join(i)},decode:a=>{if(typeof a!="string")throw new Error("join.decode input should be string");return a.split(i)}}}function Rs(i,a="="){if(Do(i),typeof a!="string")throw new Error("padding chr should be string");return{encode(u){if(!Array.isArray(u)||u.length&&typeof u[0]!="string")throw new Error("padding.encode input should be array of strings");for(let g of u)if(typeof g!="string")throw new Error(`padding.encode: non-string input=${g}`);for(;u.length*i%8;)u.push(a);return u},decode(u){if(!Array.isArray(u)||u.length&&typeof u[0]!="string")throw new Error("padding.encode input should be array of strings");for(let b of u)if(typeof b!="string")throw new Error(`padding.decode: non-string input=${b}`);let g=u.length;if(g*i%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;g>0&&u[g-1]===a;g--)if(!((g-1)*i%8))throw new Error("Invalid padding: string has too much padding");return u.slice(0,g)}}}function Wf(i){if(typeof i!="function")throw new Error("normalize fn should be function");return{encode:a=>a,decode:a=>i(a)}}function Kf(i,a,u){if(a<2)throw new Error(`convertRadix: wrong from=${a}, base cannot be less than 2`);if(u<2)throw new Error(`convertRadix: wrong to=${u}, base cannot be less than 2`);if(!Array.isArray(i))throw new Error("convertRadix: data should be array");if(!i.length)return[];let g=0;const b=[],k=Array.from(i);for(k.forEach(C=>{if(Do(C),C<0||C>=a)throw new Error(`Wrong integer: ${C}`)});;){let C=0,H=!0;for(let U=g;U<k.length;U++){const j=k[U],F=a*C+j;if(!Number.isSafeInteger(F)||a*C/a!==C||F-j!==a*C)throw new Error("convertRadix: carry overflow");if(C=F%u,k[U]=Math.floor(F/u),!Number.isSafeInteger(k[U])||k[U]*u+C!==F)throw new Error("convertRadix: carry overflow");if(H)k[U]?H=!1:g=U;else continue}if(b.push(C),H)break}for(let C=0;C<i.length-1&&i[C]===0;C++)b.push(0);return b.reverse()}const Gf=(i,a)=>a?Gf(a,i%a):i,zs=(i,a)=>i+(a-Gf(i,a));function iu(i,a,u,g){if(!Array.isArray(i))throw new Error("convertRadix2: data should be array");if(a<=0||a>32)throw new Error(`convertRadix2: wrong from=${a}`);if(u<=0||u>32)throw new Error(`convertRadix2: wrong to=${u}`);if(zs(a,u)>32)throw new Error(`convertRadix2: carry overflow from=${a} to=${u} carryBits=${zs(a,u)}`);let b=0,k=0;const C=2**u-1,H=[];for(const U of i){if(Do(U),U>=2**a)throw new Error(`convertRadix2: invalid data word=${U} from=${a}`);if(b=b<<a|U,k+a>32)throw new Error(`convertRadix2: carry overflow pos=${k} from=${a}`);for(k+=a;k>=u;k-=u)H.push((b>>k-u&C)>>>0);b&=2**k-1}if(b=b<<u-k&C,!g&&k>=a)throw new Error("Excess padding");if(!g&&b)throw new Error(`Non-zero padding: ${b}`);return g&&k>0&&H.push(b>>>0),H}function Cy(i){return Do(i),{encode:a=>{if(!(a instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Kf(Array.from(a),2**8,i)},decode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Kf(a,i,2**8))}}}function Ar(i,a=!1){if(Do(i),i<=0||i>32)throw new Error("radix2: bits should be in (0..32]");if(zs(8,i)>32||zs(i,8)>32)throw new Error("radix2: carry overflow");return{encode:u=>{if(!(u instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return iu(Array.from(u),8,i,!a)},decode:u=>{if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(iu(u,i,8,a))}}}function Zf(i){if(typeof i!="function")throw new Error("unsafeWrapper fn should be function");return function(...a){try{return i.apply(null,a)}catch{}}}const By=Wn(Ar(4),Kn("0123456789ABCDEF"),Gn("")),Iy=Wn(Ar(5),Kn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Rs(5),Gn(""));Wn(Ar(5),Kn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Rs(5),Gn("")),Wn(Ar(5),Kn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Gn(""),Wf(i=>i.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Ui=Wn(Ar(6),Kn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Rs(6),Gn("")),Oy=Wn(Ar(6),Kn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Rs(6),Gn("")),su=i=>Wn(Cy(58),Kn(i),Gn("")),au=su("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");su("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),su("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Yf=[0,2,3,5,6,7,9,10,11],Ny={encode(i){let a="";for(let u=0;u<i.length;u+=8){const g=i.subarray(u,u+8);a+=au.encode(g).padStart(Yf[g.length],"1")}return a},decode(i){let a=[];for(let u=0;u<i.length;u+=11){const g=i.slice(u,u+11),b=Yf.indexOf(g.length),k=au.decode(g);for(let C=0;C<k.length-b;C++)if(k[C]!==0)throw new Error("base58xmr: wrong padding");a=a.concat(Array.from(k.slice(k.length-b)))}return Uint8Array.from(a)}},cu=Wn(Kn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Gn("")),Jf=[996825010,642813549,513874426,1027748829,705979059];function Mi(i){const a=i>>25;let u=(i&33554431)<<5;for(let g=0;g<Jf.length;g++)(a>>g&1)===1&&(u^=Jf[g]);return u}function Xf(i,a,u=1){const g=i.length;let b=1;for(let k=0;k<g;k++){const C=i.charCodeAt(k);if(C<33||C>126)throw new Error(`Invalid prefix (${i})`);b=Mi(b)^C>>5}b=Mi(b);for(let k=0;k<g;k++)b=Mi(b)^i.charCodeAt(k)&31;for(let k of a)b=Mi(b)^k;for(let k=0;k<6;k++)b=Mi(b);return b^=u,cu.encode(iu([b%2**30],30,5,!1))}function Qf(i){const a=i==="bech32"?1:734539939,u=Ar(5),g=u.decode,b=u.encode,k=Zf(g);function C(F,V,X=90){if(typeof F!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof F}`);if(!Array.isArray(V)||V.length&&typeof V[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof V}`);const J=F.length+7+V.length;if(X!==!1&&J>X)throw new TypeError(`Length ${J} exceeds limit ${X}`);return F=F.toLowerCase(),`${F}1${cu.encode(V)}${Xf(F,V,a)}`}function H(F,V=90){if(typeof F!="string")throw new Error(`bech32.decode input should be string, not ${typeof F}`);if(F.length<8||V!==!1&&F.length>V)throw new TypeError(`Wrong string length: ${F.length} (${F}). Expected (8..${V})`);const X=F.toLowerCase();if(F!==X&&F!==F.toUpperCase())throw new Error("String must be lowercase or uppercase");F=X;const J=F.lastIndexOf("1");if(J===0||J===-1)throw new Error('Letter "1" must be present between prefix and data only');const ee=F.slice(0,J),Y=F.slice(J+1);if(Y.length<6)throw new Error("Data must be at least 6 characters long");const te=cu.decode(Y).slice(0,-6),ne=Xf(ee,te,a);if(!Y.endsWith(ne))throw new Error(`Invalid checksum in ${F}: expected "${ne}"`);return{prefix:ee,words:te}}const U=Zf(H);function j(F){const{prefix:V,words:X}=H(F,!1);return{prefix:V,words:X,bytes:g(X)}}return{encode:C,decode:H,decodeToBytes:j,decodeUnsafe:U,fromWords:g,fromWordsUnsafe:k,toWords:b}}const eh=Qf("bech32");Qf("bech32m");const Ry={encode:i=>new TextDecoder().decode(i),decode:i=>new TextEncoder().encode(i)},zy=Wn(Ar(4),Kn("0123456789abcdef"),Gn(""),Wf(i=>{if(typeof i!="string"||i.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof i} with length ${i.length}`);return i.toLowerCase()}));`${Object.keys({utf8:Ry,hex:zy,base16:By,base32:Iy,base64:Ui,base64url:Oy,base58:au,base58xmr:Ny}).join(", ")}`;var go=Symbol("verified"),Uy=i=>i instanceof Object;function My(i){if(!Uy(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let a=0;a<i.tags.length;a++){let u=i.tags[a];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}var Hy=new TextDecoder("utf-8"),th=new TextEncoder;function Hi(i){i.indexOf("://")===-1&&(i="wss://"+i);let a=new URL(i);return a.pathname=a.pathname.replace(/\/+/g,"/"),a.pathname.endsWith("/")&&(a.pathname=a.pathname.slice(0,-1)),(a.port==="80"&&a.protocol==="ws:"||a.port==="443"&&a.protocol==="wss:")&&(a.port=""),a.searchParams.sort(),a.hash="",a.toString()}var jy=class{constructor(i){ae(this,"value"),ae(this,"next",null),ae(this,"prev",null),this.value=i}},Dy=class{constructor(){ae(this,"first"),ae(this,"last"),this.first=null,this.last=null}enqueue(i){const a=new jy(i);return this.last?this.last===this.first?(this.last=a,this.last.prev=this.first,this.first.next=a):(a.prev=this.last,this.last.next=a,this.last=a):(this.first=a,this.last=a),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const a=this.first;return this.first=null,this.last=null,a.value}const i=this.first;return this.first=i.next,i.value}},qy=class{generateSecretKey(){return zt.utils.randomPrivateKey()}getPublicKey(i){return Rt(zt.getPublicKey(i))}finalizeEvent(i,a){const u=i;return u.pubkey=Rt(zt.getPublicKey(a)),u.id=uu(u),u.sig=Rt(zt.sign(uu(u),a)),u[go]=!0,u}verifyEvent(i){if(typeof i[go]=="boolean")return i[go];const a=uu(i);if(a!==i.id)return i[go]=!1,!1;try{const u=zt.verify(i.sig,a,i.pubkey);return i[go]=u,u}catch{return i[go]=!1,!1}}};function Vy(i){if(!My(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function uu(i){let a=Jc(th.encode(Vy(i)));return Rt(a)}var Us=new qy,Fy=Us.generateSecretKey,Wy=Us.getPublicKey,Ky=Us.finalizeEvent,nh=Us.verifyEvent;async function Gy(i,a,u){const g=i instanceof Uint8Array?Rt(i):i,b=Oi.getSharedSecret(g,"02"+a),k=rh(b);let C=Uint8Array.from(Hm(16)),H=th.encode(u),U=Ff(k,C).encrypt(H),j=Ui.encode(new Uint8Array(U)),F=Ui.encode(new Uint8Array(C.buffer));return`${j}?iv=${F}`}async function Zy(i,a,u){const g=i instanceof Uint8Array?Rt(i):i;let[b,k]=u.split("?iv="),C=Oi.getSharedSecret(g,"02"+a),H=rh(C),U=Ui.decode(k),j=Ui.decode(b),F=Ff(H,U).decrypt(j);return Hy.decode(F)}function rh(i){return i.slice(1,33)}var Yy=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Jy;try{Jy=fetch}catch{}var Xy=22242,lu=24133,Qy=31990;function e1(i,a){if(i.ids&&i.ids.indexOf(a.id)===-1&&!i.ids.some(u=>a.id.startsWith(u))||i.kinds&&i.kinds.indexOf(a.kind)===-1||i.authors&&i.authors.indexOf(a.pubkey)===-1&&!i.authors.some(u=>a.pubkey.startsWith(u)))return!1;for(let u in i)if(u[0]==="#"){let g=u.slice(1),b=i[`#${g}`];if(b&&!a.tags.find(([k,C])=>k===u.slice(1)&&b.indexOf(C)!==-1))return!1}return!(i.since&&a.created_at<i.since||i.until&&a.created_at>i.until)}function t1(i,a){for(let u=0;u<i.length;u++)if(e1(i[u],a))return!0;return!1}function n1(i,a){let u=a.length+3,g=i.indexOf(`"${a}":`)+u,b=i.slice(g).indexOf('"')+g+1;return i.slice(b,b+64)}function r1(i){let a=i.slice(0,22).indexOf('"EVENT"');if(a===-1)return null;let u=i.slice(a+7+1).indexOf('"');if(u===-1)return null;let g=a+7+1+u,b=i.slice(g+1,80).indexOf('"');if(b===-1)return null;let k=g+1+b;return i.slice(g+1,k)}function o1(i,a){return{kind:Xy,created_at:Math.floor(Date.now()/1e3),tags:[["relay",i],["challenge",a]],content:""}}async function i1(){return new Promise(i=>{const a=new MessageChannel,u=()=>{a.port1.removeEventListener("message",u),i()};a.port1.addEventListener("message",u),a.port2.postMessage(0),a.port1.start()})}var s1=i=>(i[go]=!0,!0),oh;try{oh=WebSocket}catch{}var ih=class{constructor(i,a){ae(this,"url"),ae(this,"_connected",!1),ae(this,"onclose",null),ae(this,"onnotice",u=>console.debug(`NOTICE from ${this.url}: ${u}`)),ae(this,"_onauth",null),ae(this,"baseEoseTimeout",4400),ae(this,"connectionTimeout",4400),ae(this,"openSubs",new Map),ae(this,"connectionTimeoutHandle"),ae(this,"connectionPromise"),ae(this,"openCountRequests",new Map),ae(this,"openEventPublishes",new Map),ae(this,"ws"),ae(this,"incomingMessageQueue",new Dy),ae(this,"queueRunning",!1),ae(this,"challenge"),ae(this,"serial",0),ae(this,"verifyEvent"),this.url=Hi(i),this.verifyEvent=a.verifyEvent}static async connect(i,a){const u=new ih(i,a);return await u.connect(),u}closeAllSubscriptions(i){for(let[a,u]of this.openSubs)u.close(i);this.openSubs.clear();for(let[a,u]of this.openEventPublishes)u.reject(new Error(i));this.openEventPublishes.clear();for(let[a,u]of this.openCountRequests)u.reject(new Error(i));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((i,a)=>{this.connectionTimeoutHandle=setTimeout(()=>{var u;a("connection timed out"),this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new oh(this.url)}catch(u){a(u);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,i()},this.ws.onerror=u=>{var g;a(u.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var u;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await i1();this.queueRunning=!1}handleNext(){var i,a,u;const g=this.incomingMessageQueue.dequeue();if(!g)return!1;const b=r1(g);if(b){const k=this.openSubs.get(b);if(!k)return;const C=n1(g,"id"),H=(i=k.alreadyHaveEvent)==null?void 0:i.call(k,C);if((a=k.receivedEvent)==null||a.call(k,this,C),H)return}try{let k=JSON.parse(g);switch(k[0]){case"EVENT":{const C=this.openSubs.get(k[1]),H=k[2];this.verifyEvent(H)&&t1(C.filters,H)&&C.onevent(H);return}case"COUNT":{const C=k[1],H=k[2],U=this.openCountRequests.get(C);U&&(U.resolve(H.count),this.openCountRequests.delete(C));return}case"EOSE":{const C=this.openSubs.get(k[1]);if(!C)return;C.receivedEose();return}case"OK":{const C=k[1],H=k[2],U=k[3],j=this.openEventPublishes.get(C);H?j.resolve(U):j.reject(new Error(U)),this.openEventPublishes.delete(C);return}case"CLOSED":{const C=k[1],H=this.openSubs.get(C);if(!H)return;H.closed=!0,H.close(k[2]);return}case"NOTICE":this.onnotice(k[1]);return;case"AUTH":{this.challenge=k[1],(u=this._onauth)==null||u.call(this,k[1]);return}}}catch{return}}async send(i){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var a;(a=this.ws)==null||a.send(i)})}async auth(i){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const a=await i(o1(this.url,this.challenge)),u=new Promise((g,b)=>{this.openEventPublishes.set(a.id,{resolve:g,reject:b})});return this.send('["AUTH",'+JSON.stringify(a)+"]"),u}async publish(i){const a=new Promise((u,g)=>{this.openEventPublishes.set(i.id,{resolve:u,reject:g})});return this.send('["EVENT",'+JSON.stringify(i)+"]"),a}async count(i,a){this.serial++;const u=(a==null?void 0:a.id)||"count:"+this.serial,g=new Promise((b,k)=>{this.openCountRequests.set(u,{resolve:b,reject:k})});return this.send('["COUNT","'+u+'",'+JSON.stringify(i)+"]"),g}subscribe(i,a){const u=this.prepareSubscription(i,a);return u.fire(),u}prepareSubscription(i,a){this.serial++;const u=a.id||"sub:"+this.serial,g=new a1(this,u,i,a);return this.openSubs.set(u,g),g}close(){var i;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(i=this.ws)==null||i.close()}_onmessage(i){this.incomingMessageQueue.enqueue(i.data),this.queueRunning||this.runQueue()}},a1=class{constructor(i,a,u,g){ae(this,"relay"),ae(this,"id"),ae(this,"closed",!1),ae(this,"eosed",!1),ae(this,"filters"),ae(this,"alreadyHaveEvent"),ae(this,"receivedEvent"),ae(this,"onevent"),ae(this,"oneose"),ae(this,"onclose"),ae(this,"eoseTimeout"),ae(this,"eoseTimeoutHandle"),this.relay=i,this.filters=u,this.id=a,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||i.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(b=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,b)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var i;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(i=this.oneose)==null||i.call(this))}close(i="closed by caller"){var a;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(a=this.onclose)==null||a.call(this,i)}},c1=class{constructor(i){ae(this,"relays",new Map),ae(this,"seenOn",new Map),ae(this,"trackRelays",!1),ae(this,"verifyEvent"),ae(this,"trustedRelayURLs",new Set),this.verifyEvent=i.verifyEvent}async ensureRelay(i,a){i=Hi(i);let u=this.relays.get(i);return u||(u=new ih(i,{verifyEvent:this.trustedRelayURLs.has(i)?s1:this.verifyEvent}),a!=null&&a.connectionTimeout&&(u.connectionTimeout=a.connectionTimeout),this.relays.set(i,u)),await u.connect(),u}close(i){i.map(Hi).forEach(a=>{var u;(u=this.relays.get(a))==null||u.close()})}subscribeMany(i,a,u){return this.subscribeManyMap(Object.fromEntries(i.map(g=>[g,a])),u)}subscribeManyMap(i,a){this.trackRelays&&(a.receivedEvent=(V,X)=>{let J=this.seenOn.get(X);J||(J=new Set,this.seenOn.set(X,J)),J.add(V)});const u=new Set,g=[],b=Object.keys(i).length,k=[];let C=V=>{var X;k[V]=!0,k.filter(J=>J).length===b&&((X=a.oneose)==null||X.call(a),C=()=>{})};const H=[];let U=(V,X)=>{var J;C(V),H[V]=X,H.filter(ee=>ee).length===b&&((J=a.onclose)==null||J.call(a,H),U=()=>{})};const j=V=>{var X;if((X=a.alreadyHaveEvent)!=null&&X.call(a,V))return!0;const J=u.has(V);return u.add(V),J},F=Promise.all(Object.entries(i).map(async(V,X,J)=>{if(J.indexOf(V)!==X){U(X,"duplicate url");return}let[ee,Y]=V;ee=Hi(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:a.maxWait?Math.max(a.maxWait*.8,a.maxWait-1e3):void 0})}catch(Q){U(X,(Q==null?void 0:Q.message)||String(Q));return}let ne=te.subscribe(Y,{...a,oneose:()=>C(X),onclose:Q=>U(X,Q),alreadyHaveEvent:j,eoseTimeout:a.maxWait});g.push(ne)}));return{async close(){await F,g.forEach(V=>{V.close()})}}}subscribeManyEose(i,a,u){const g=this.subscribeMany(i,a,{...u,oneose(){g.close()}});return g}async querySync(i,a,u){return new Promise(async g=>{const b=[];this.subscribeManyEose(i,[a],{...u,onevent(k){b.push(k)},onclose(k){g(b)}})})}async get(i,a,u){a.limit=1;const g=await this.querySync(i,a,u);return g.sort((b,k)=>k.created_at-b.created_at),g[0]||null}publish(i,a){return i.map(Hi).map(async(u,g,b)=>b.indexOf(u)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(u)).publish(a))}},u1=class extends c1{constructor(){super({verifyEvent:nh})}},sh;try{sh=fetch}catch{}var Ms=/^bunker:\/\/([0-9a-f]{64})\??([?\/\w:.=&%]*)$/;async function l1(i){let a=i.match(Ms);if(a)try{const u=a[1],g=new URLSearchParams(a[2]);return{pubkey:u,relays:g.getAll("relay"),secret:g.get("secret")}}catch{}return ah(i)}async function ah(i){const a=i.match(Yy);if(!a)return null;const[u,g="_",b]=a;try{const k=`https://${b}/.well-known/nostr.json?name=${g}`,C=await(await sh(k,{redirect:"error"})).json();let H=C.names[g],U=C.nip46[H]||[];return{pubkey:H,relays:U,secret:null}}catch{return null}}var ch=class{constructor(i,a,u={}){if(ae(this,"pool"),ae(this,"subCloser"),ae(this,"isOpen"),ae(this,"serial"),ae(this,"idPrefix"),ae(this,"listeners"),ae(this,"waitingForAuth"),ae(this,"secretKey"),ae(this,"bp"),a.relays.length===0)throw new Error("no relays are specified for this bunker");this.pool=u.pool||new u1,this.secretKey=i,this.bp=a,this.isOpen=!1,this.idPrefix=Math.random().toString(36).substring(7),this.serial=0,this.listeners={},this.waitingForAuth={};const g=this.listeners,b=this.waitingForAuth;this.subCloser=this.pool.subscribeMany(this.bp.relays,[{kinds:[lu],"#p":[Wy(this.secretKey)]}],{async onevent(k){const{id:C,result:H,error:U}=JSON.parse(await Zy(i,k.pubkey,k.content));if(H==="auth_url"&&b[C]){delete b[C],u.onauth?u.onauth(U):console.warn(`nostr-tools/nip46: remote signer ${a.pubkey} tried to send an "auth_url"='${U}' but there was no onauth() callback configured.`);return}let j=g[C];j&&(U?j.reject(U):H&&j.resolve(H),delete g[C])}}),this.isOpen=!0}async close(){this.isOpen=!1,this.subCloser.close()}async sendRequest(i,a){return new Promise(async(u,g)=>{try{if(!this.isOpen)throw new Error("this signer is not open anymore, create a new one");this.serial++;const b=`${this.idPrefix}-${this.serial}`,k=await Gy(this.secretKey,this.bp.pubkey,JSON.stringify({id:b,method:i,params:a})),C=Ky({kind:lu,tags:[["p",this.bp.pubkey]],content:k,created_at:Math.floor(Date.now()/1e3)},this.secretKey);this.listeners[b]={resolve:u,reject:g},this.waitingForAuth[b]=!0,await Promise.any(this.pool.publish(this.bp.relays,C))}catch(b){g(b)}})}async ping(){let i=await this.sendRequest("ping",[]);if(i!=="pong")throw new Error(`result is not pong: ${i}`)}async connect(){await this.sendRequest("connect",[this.bp.pubkey,this.bp.secret||""])}async getPublicKey(){return this.bp.pubkey}async getRelays(){return JSON.parse(await this.sendRequest("get_relays",[]))}async signEvent(i){let a=await this.sendRequest("sign_event",[JSON.stringify(i)]),u=JSON.parse(a);if(u.pubkey===this.bp.pubkey&&nh(u))return u;throw new Error(`event returned from bunker is improperly signed: ${JSON.stringify(u)}`)}async nip04Encrypt(i,a){return await this.sendRequest("nip04_encrypt",[i,a])}async nip04Decrypt(i,a){return await this.sendRequest("nip04_decrypt",[i,a])}async nip44GetKey(i){let a=await this.sendRequest("nip44_get_key",[i]);return Lc(a)}async nip44Encrypt(i,a){return await this.sendRequest("nip44_encrypt",[i,a])}async nip44Decrypt(i,a){return await this.sendRequest("nip44_encrypt",[i,a])}};async function d1(i,a,u,g,b){let k=Fy(),C=new ch(k,i.bunkerPointer,a),H=await C.sendRequest("create_account",[u,g,""]);return C.bp.pubkey=H,await C.connect(),C}async function f1(i,a){const u=await i.querySync(a,{kinds:[Qy],"#k":[lu.toString()]});return u.sort((g,b)=>b.created_at-g.created_at),(await Promise.all(u.map(async(g,b)=>{try{const k=JSON.parse(g.content);try{if(u.findIndex(H=>JSON.parse(H.content).nip05===k.nip05)!==b)return}catch{}const C=await ah(k.nip05);if(C&&C.pubkey===g.pubkey&&C.relays.length)return{bunkerPointer:C,nip05:k.nip05,domain:k.nip05.split("@")[1],name:k.name||k.display_name,picture:k.picture,about:k.about,website:k.website,local:!1}}catch{return}}))).filter(g=>g!==void 0)}var uh=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,lh;try{lh=fetch}catch{}async function h1(i){var a;const u=i.match(uh);if(!u)return null;const[g,b="_",k]=u;try{const C=`https://${k}/.well-known/nostr.json?name=${b}`,H=await(await lh(C,{redirect:"error"})).json();let U=H.names[b];return U?{pubkey:U,relays:(a=H.relays)==null?void 0:a[U]}:null}catch{return null}}new TextDecoder("utf-8"),new TextEncoder;var p1=5e3;function g1(i){return m1("npub",Lc(i))}function w1(i,a){let u=eh.toWords(a);return eh.encode(i,u,p1)}function m1(i,a){return w1(i,a)}const qo=[];function b1(i,a=c){let u;const g=new Set;function b(H){if(m(i,H)&&(i=H,u)){const U=!qo.length;for(const j of g)j[1](),qo.push(j,i);if(U){for(let j=0;j<qo.length;j+=2)qo[j][0](qo[j+1]);qo.length=0}}}function k(H){b(H(i))}function C(H,U=c){const j=[H,U];return g.add(j),g.size===1&&(u=a(b,k)||c),H(i),()=>{g.delete(j),g.size===0&&u&&(u(),u=null)}}return{set:b,update:k,subscribe:C}}const y1=i=>{const{subscribe:a,set:u}=b1(void 0,()=>{let g=window.matchMedia(i);u(g.matches);const b=()=>u(g.matches);return"addEventListener"in g?g.addEventListener("change",b):g.addListener(b),()=>{"removeEventListener"in g?g.removeEventListener("change",b):g.removeListener(b)}});return{subscribe:a}};function v1(i){let a,u,g;return{c(){a=v("svg"),u=v("circle"),g=v("path"),x(u,"class","opacity-25"),x(u,"cx","12"),x(u,"cy","12"),x(u,"r","10"),x(u,"stroke","currentColor"),x(u,"stroke-width","4"),x(g,"class","opacity-75"),x(g,"fill","currentColor"),x(g,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),x(a,"class","ml-2 h-5 w-5 animate-spin text-white"),x(a,"xmlns","http://www.w3.org/2000/svg"),x(a,"fill","none"),x(a,"viewBox","0 0 24 24")},m(b,k){N(b,a,k),T(a,u),T(a,g)},p:c,i:c,o:c,d(b){b&&l(a)}}}class dh extends Xd{constructor(a){super(),Jd(this,a,null,v1,m,{})}}const{window:du}=M;function fh(i,a,u){const g=i.slice();return g[78]=a[u],g}function _1(i){let a,u,g,b,k,C,H,U,j,F,V,X,J=!i[20]&&!i[13]&&!i[14]&&!i[15]&&hh(i);const ee=[L1,P1,T1,x1,$1,S1,A1],Y=[];function te(ne,Q){return ne[13]?0:ne[14]?1:ne[15]?2:ne[20]?3:ne[17]?4:ne[21]?6:5}return H=te(i),U=Y[H]=ee[H](i),{c(){a=p("div"),u=p("button"),g=$(""),k=R(),J&&J.c(),C=R(),U.c(),x(u,"class",b="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+i[0]+"-600"),x(a,"class",j="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+i[0]+"-900 to-"+i[0]+"-700 "+i[27])},m(ne,Q){N(ne,a,Q),T(a,u),T(u,g),T(a,k),J&&J.m(a,null),T(a,C),Y[H].m(a,null),F=!0,V||(X=_(u,"click",function(){y(i[20]?i[32]:i[30])&&(i[20]?i[32]:i[30]).apply(this,arguments)}),V=!0)},p(ne,Q){i=ne,(!F||Q[0]&1&&b!==(b="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+i[0]+"-600"))&&x(u,"class",b),!i[20]&&!i[13]&&!i[14]&&!i[15]?J?J.p(i,Q):(J=hh(i),J.c(),J.m(a,C)):J&&(J.d(1),J=null);let ue=H;H=te(i),H===ue?Y[H].p(i,Q):(yt(),Yt(Y[ue],1,1,()=>{Y[ue]=null}),Nt(),U=Y[H],U?U.p(i,Q):(U=Y[H]=ee[H](i),U.c()),St(U,1),U.m(a,null)),(!F||Q[0]&134217729&&j!==(j="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+i[0]+"-900 to-"+i[0]+"-700 "+i[27]))&&x(a,"class",j)},i(ne){F||(St(U),F=!0)},o(ne){Yt(U),F=!1},d(ne){ne&&l(a),J&&J.d(),Y[H].d(),V=!1,X()}}}function E1(i){let a,u,g,b,k;const C=[z1,R1,N1,O1,I1],H=[];function U(j,F){return j[12]?0:!j[21]&&!j[2]?1:!j[21]&&j[2]?2:j[2]?4:3}return u=U(i),g=H[u]=C[u](i),{c(){a=p("div"),g.c(),x(a,"class",b="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+i[0]+"-700 hover:bg-"+i[0]+"-800 "+i[27])},m(j,F){N(j,a,F),H[u].m(a,null),k=!0},p(j,F){let V=u;u=U(j),u===V?H[u].p(j,F):(yt(),Yt(H[V],1,1,()=>{H[V]=null}),Nt(),g=H[u],g?g.p(j,F):(g=H[u]=C[u](j),g.c()),St(g,1),g.m(a,null)),(!k||F[0]&134217729&&b!==(b="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+j[0]+"-700 hover:bg-"+j[0]+"-800 "+j[27]))&&x(a,"class",b)},i(j){k||(St(g),k=!0)},o(j){Yt(g),k=!1},d(j){j&&l(a),H[u].d()}}}function k1(i){return{c,m:c,p:c,i:c,o:c,d:c}}function hh(i){let a,u,g,b,k;return{c(){a=p("button"),u=$("?"),x(a,"class",g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+i[0]+"-600")},m(C,H){N(C,a,H),T(a,u),b||(k=_(a,"click",i[31]),b=!0)},p(C,H){H[0]&1&&g!==(g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+C[0]+"-600")&&x(a,"class",g)},d(C){C&&l(a),b=!1,k()}}}function A1(i){let a,u,g,b,k,C,H=i[21].npub+"",U,j,F,V,X,J,ee,Y,te,ne,Q,ue=If(i[11])+"",_e,Ae,le,ce=(i[21].picture||i[21].name)&&ph(i);return{c(){a=p("div"),u=p("div"),u.textContent="You are connected to Nostr as",g=R(),b=p("a"),ce&&ce.c(),k=R(),C=p("div"),U=$(H),F=R(),V=p("button"),X=$("Disconnect"),ee=R(),Y=p("div"),te=$("This webpage is using the public key:"),ne=p("br"),Q=R(),_e=$(ue),x(u,"class","mb-4 text-sm"),x(C,"class","block break-all"),x(b,"target","_blank"),x(b,"href",j="https://nosta.me/"+i[21].npub),x(b,"class","group text-white no-underline"),x(a,"class","text-center"),x(V,"class",J="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(Y,"class","mt-6 block break-all text-center text-sm")},m(ie,fe){N(ie,a,fe),T(a,u),T(a,g),T(a,b),ce&&ce.m(b,null),T(b,k),T(b,C),T(C,U),N(ie,F,fe),N(ie,V,fe),T(V,X),N(ie,ee,fe),N(ie,Y,fe),T(Y,te),T(Y,ne),T(Y,Q),T(Y,_e),Ae||(le=_(V,"click",i[34]),Ae=!0)},p(ie,fe){ie[21].picture||ie[21].name?ce?ce.p(ie,fe):(ce=ph(ie),ce.c(),ce.m(b,k)):ce&&(ce.d(1),ce=null),fe[0]&2097152&&H!==(H=ie[21].npub+"")&&q(U,H),fe[0]&2097152&&j!==(j="https://nosta.me/"+ie[21].npub)&&x(b,"href",j),fe[0]&1&&J!==(J="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+ie[0]+"-900 hover:bg-"+ie[0]+"-950")&&x(V,"class",J),fe[0]&2048&&ue!==(ue=If(ie[11])+"")&&q(_e,ue)},i:c,o:c,d(ie){ie&&(l(a),l(F),l(V),l(ee),l(Y)),ce&&ce.d(),Ae=!1,le()}}}function S1(i){let a,u,g,b,k,C,H,U,j,F,V,X,J,ee,Y,te,ne,Q=i[19]&&mh(i);const ue=[B1,C1],_e=[];function Ae(ie,fe){return ie[12]?0:1}U=Ae(i),j=_e[U]=ue[U](i);let le=i[12]&&i[16]&&bh(i),ce=!i[12]&&yh(i);return{c(){a=p("div"),a.textContent="How do you want to connect to Nostr?",u=R(),g=p("form"),b=p("input"),k=R(),Q&&Q.c(),C=R(),H=p("button"),j.c(),X=R(),le&&le.c(),J=R(),ce&&ce.c(),ee=L(),x(a,"class","text-center text-lg"),x(b,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),x(b,"placeholder","user@provider or bunker://..."),b.autofocus=!0,b.disabled=i[12],x(b,"autocapitalize","none"),x(H,"class",F="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),H.disabled=V=!i[26]||i[12],x(g,"class","mb-1 mt-4 flex flex-col")},m(ie,fe){N(ie,a,fe),N(ie,u,fe),N(ie,g,fe),T(g,b),i[52](b),I(b,i[4]),T(g,k),Q&&Q.m(g,null),T(g,C),T(g,H),_e[U].m(H,null),T(g,X),le&&le.m(g,null),N(ie,J,fe),ce&&ce.m(ie,fe),N(ie,ee,fe),Y=!0,b.focus(),te||(ne=[_(b,"input",i[53]),_(g,"submit",i[33])],te=!0)},p(ie,fe){(!Y||fe[0]&4096)&&(b.disabled=ie[12]),fe[0]&16&&b.value!==ie[4]&&I(b,ie[4]),ie[19]?Q?Q.p(ie,fe):(Q=mh(ie),Q.c(),Q.m(g,C)):Q&&(Q.d(1),Q=null);let $e=U;U=Ae(ie),U!==$e&&(yt(),Yt(_e[$e],1,1,()=>{_e[$e]=null}),Nt(),j=_e[U],j||(j=_e[U]=ue[U](ie),j.c()),St(j,1),j.m(H,null)),(!Y||fe[0]&1&&F!==(F="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+ie[0]+"-900 hover:bg-"+ie[0]+"-950"))&&x(H,"class",F),(!Y||fe[0]&67112960&&V!==(V=!ie[26]||ie[12]))&&(H.disabled=V),ie[12]&&ie[16]?le?le.p(ie,fe):(le=bh(ie),le.c(),le.m(g,null)):le&&(le.d(1),le=null),ie[12]?ce&&(ce.d(1),ce=null):ce?ce.p(ie,fe):(ce=yh(ie),ce.c(),ce.m(ee.parentNode,ee))},i(ie){Y||(St(j),Y=!0)},o(ie){Yt(j),Y=!1},d(ie){ie&&(l(a),l(u),l(g),l(J),l(ee)),i[52](null),Q&&Q.d(),_e[U].d(),le&&le.d(),ce&&ce.d(ie),te=!1,h(ne)}}}function $1(i){let a,u,g,b,k,C,H,U,j,F,V,X,J,ee,Y,te,ne,Q,ue,_e,Ae,le,ce=Zd(i[22]),ie=[];for(let fe=0;fe<ce.length;fe+=1)ie[fe]=vh(fh(i,ce,fe));return{c(){a=p("div"),a.textContent="Create a Nostr account",u=R(),g=p("form"),b=p("div"),k=p("input"),C=R(),H=p("div"),H.textContent="@",U=R(),j=p("select");for(let fe=0;fe<ie.length;fe+=1)ie[fe].c();F=R(),V=p("button"),X=$("Continue "),Y=R(),te=p("div"),ne=$("Do you already have a Nostr address?"),Q=p("br"),ue=R(),_e=p("button"),_e.textContent="Login now",x(a,"class","text-center text-lg"),x(k,"class","box-border w-40 rounded px-2 py-1 text-lg text-neutral-800 outline-none"),x(k,"placeholder","bob"),k.autofocus=!0,x(k,"autocapitalize","none"),x(H,"class","mx-2 text-2xl"),x(j,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),i[10]===void 0&&Me(()=>i[51].call(j)),x(b,"class","flex flex-row"),x(V,"class",J="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),V.disabled=ee=!i[10]||!i[9]||i[18],x(g,"class","mb-1 mt-4"),x(_e,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),x(te,"class","mt-6 text-center text-sm leading-3")},m(fe,$e){N(fe,a,$e),N(fe,u,$e),N(fe,g,$e),T(g,b),T(b,k),i[49](k),I(k,i[9]),T(b,C),T(b,H),T(b,U),T(b,j);for(let Le=0;Le<ie.length;Le+=1)ie[Le]&&ie[Le].m(j,null);S(j,i[10],!0),T(g,F),T(g,V),T(V,X),N(fe,Y,$e),N(fe,te,$e),T(te,ne),T(te,Q),T(te,ue),T(te,_e),k.focus(),Ae||(le=[_(k,"input",i[50]),_(k,"input",i[38]),_(j,"change",i[51]),_(g,"submit",i[37]),_(_e,"click",i[36])],Ae=!0)},p(fe,$e){if($e[0]&512&&k.value!==fe[9]&&I(k,fe[9]),$e[0]&4194304){ce=Zd(fe[22]);let Le;for(Le=0;Le<ce.length;Le+=1){const at=fh(fe,ce,Le);ie[Le]?ie[Le].p(at,$e):(ie[Le]=vh(at),ie[Le].c(),ie[Le].m(j,null))}for(;Le<ie.length;Le+=1)ie[Le].d(1);ie.length=ce.length}$e[0]&4195328&&S(j,fe[10]),$e[0]&1&&J!==(J="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+fe[0]+"-900 hover:bg-"+fe[0]+"-950")&&x(V,"class",J),$e[0]&4457984&&ee!==(ee=!fe[10]||!fe[9]||fe[18])&&(V.disabled=ee)},i:c,o:c,d(fe){fe&&(l(a),l(u),l(g),l(Y),l(te)),i[49](null),w(ie,fe),Ae=!1,h(le)}}}function x1(i){let a,u,g;return{c(){a=p("div"),a.textContent="What is that?",u=R(),g=p("div"),g.innerHTML=`<p class="mb mt-4">This widget is created with <i>window.nostr.js</i>, a small script
            you can drop in any page that already uses NIP-07 and make it also
            work with NIP-46 automatically when the user doesn&#39;t have an
            extension installed.
            <br/>
            It adds a small floating button on the side of the window that users
            can use to create Nostr accuonts or connect to their NIP-46 bunkers.</p> <p class="mt-4">This tool is opensource, get the code from the <a target="_blank" class="underline" href="https://github.com/fiatjaf/window.nostr.js">project&#39;s page</a>.</p> <p class="mt-4">You don&#39;t know what Nostr is?
            <a target="_blank" class="underline" href="https://www.nostr.com">Learn more</a>.</p>`,x(a,"class","text-center text-lg"),x(g,"class","text-base leading-5")},m(b,k){N(b,a,k),N(b,u,k),N(b,g,k)},p:c,i:c,o:c,d(b){b&&(l(a),l(u),l(g))}}}function T1(i){let a,u,g,b,k,C,H=new URL(i[15]).host+"",U,j,F,V,X,J,ee,Y,te,ne;return{c(){a=p("div"),u=p("div"),u.textContent="An action requires your confirmation",g=R(),b=p("div"),k=$("Now you a new window will bring you to "),C=p("strong"),U=$(H),j=$(" where you can approve the current action. If nothing happens check that if your browser is blocking popups, pleaase."),F=p("br"),V=$(`
            After that you will be returned to this page.`),X=R(),J=p("button"),ee=$("Confirm action "),x(u,"class","text-center text-lg"),x(b,"class","mt-4 text-center text-sm leading-4"),x(J,"class",Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(a,"class","m-auto w-full")},m(Q,ue){N(Q,a,ue),T(a,u),T(a,g),T(a,b),T(b,k),T(b,C),T(C,U),T(b,j),T(b,F),T(b,V),T(a,X),T(a,J),T(J,ee),te||(ne=_(J,"click",i[48]),te=!0)},p(Q,ue){ue[0]&32768&&H!==(H=new URL(Q[15]).host+"")&&q(U,H),ue[0]&1&&Y!==(Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+Q[0]+"-900 hover:bg-"+Q[0]+"-950")&&x(J,"class",Y)},i:c,o:c,d(Q){Q&&l(a),te=!1,ne()}}}function P1(i){let a,u,g,b,k,C,H=new URL(i[14]).host+"",U,j,F,V,X,J,ee,Y,te,ne;return{c(){a=p("div"),u=p("div"),u.textContent="Login into a Nostr account",g=R(),b=p("div"),k=$("Now you a new window will bring you to "),C=p("strong"),U=$(H),j=$(" where you can login and approve the permissions. If nothing happens check that if your browser is blocking popups, pleaase."),F=p("br"),V=$(`
            After that you will be returned to this page.`),X=R(),J=p("button"),ee=$("Login now "),x(u,"class","text-center text-lg"),x(b,"class","mt-4 text-center text-sm leading-4"),x(J,"class",Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(a,"class","m-auto w-full")},m(Q,ue){N(Q,a,ue),T(a,u),T(a,g),T(a,b),T(b,k),T(b,C),T(C,U),T(b,j),T(b,F),T(b,V),T(a,X),T(a,J),T(J,ee),te||(ne=_(J,"click",i[47]),te=!0)},p(Q,ue){ue[0]&16384&&H!==(H=new URL(Q[14]).host+"")&&q(U,H),ue[0]&1&&Y!==(Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+Q[0]+"-900 hover:bg-"+Q[0]+"-950")&&x(J,"class",Y)},i:c,o:c,d(Q){Q&&l(a),te=!1,ne()}}}function L1(i){let a,u,g,b,k,C,H=new URL(i[13]).host+"",U,j,F,V,X,J,ee,Y,te,ne;return{c(){a=p("div"),u=p("div"),u.textContent="Create a Nostr account",g=R(),b=p("div"),k=$("Now you a new window will bring you to "),C=p("strong"),U=$(H),j=$(" where the account creation will take place. If nothing happens check that if your browser is blocking popups, pleaase."),F=p("br"),V=$(`
            After that you will be returned to this page.`),X=R(),J=p("button"),ee=$("Start account creation "),x(u,"class","text-center text-lg"),x(b,"class","mt-4 text-center text-sm leading-4"),x(J,"class",Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(a,"class","m-auto w-full")},m(Q,ue){N(Q,a,ue),T(a,u),T(a,g),T(a,b),T(b,k),T(b,C),T(C,U),T(b,j),T(b,F),T(b,V),T(a,X),T(a,J),T(J,ee),te||(ne=_(J,"click",i[46]),te=!0)},p(Q,ue){ue[0]&8192&&H!==(H=new URL(Q[13]).host+"")&&q(U,H),ue[0]&1&&Y!==(Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+Q[0]+"-900 hover:bg-"+Q[0]+"-950")&&x(J,"class",Y)},i:c,o:c,d(Q){Q&&l(a),te=!1,ne()}}}function ph(i){let a,u,g=i[21].picture&&gh(i),b=i[21].name&&wh(i);return{c(){a=p("div"),g&&g.c(),u=R(),b&&b.c(),x(a,"class","mb-2 flex items-center justify-center gap-2")},m(k,C){N(k,a,C),g&&g.m(a,null),T(a,u),b&&b.m(a,null)},p(k,C){k[21].picture?g?g.p(k,C):(g=gh(k),g.c(),g.m(a,u)):g&&(g.d(1),g=null),k[21].name?b?b.p(k,C):(b=wh(k),b.c(),b.m(a,null)):b&&(b.d(1),b=null)},d(k){k&&l(a),g&&g.d(),b&&b.d()}}}function gh(i){let a,u,g;return{c(){a=p("img"),P(a.src,u=i[21].picture)||x(a,"src",u),x(a,"alt",""),x(a,"class",g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+i[0]+"-100")},m(b,k){N(b,a,k)},p(b,k){k[0]&2097152&&!P(a.src,u=b[21].picture)&&x(a,"src",u),k[0]&1&&g!==(g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+b[0]+"-100")&&x(a,"class",g)},d(b){b&&l(a)}}}function wh(i){let a,u=i[21].name+"",g;return{c(){a=p("div"),g=$(u),x(a,"class","text-3xl decoration-2 underline-offset-4 group-hover:underline")},m(b,k){N(b,a,k),T(a,g)},p(b,k){k[0]&2097152&&u!==(u=b[21].name+"")&&q(g,u)},d(b){b&&l(a)}}}function mh(i){let a,u;return{c(){a=p("div"),u=$(i[19]),x(a,"class","my-2 rounded bg-yellow-100 p-2 text-center text-sm leading-4 text-red-400")},m(g,b){N(g,a,b),T(a,u)},p(g,b){b[0]&524288&&q(u,g[19])},d(g){g&&l(a)}}}function C1(i){let a;return{c(){a=$("Connect ")},m(u,g){N(u,a,g)},i:c,o:c,d(u){u&&l(a)}}}function B1(i){let a,u,g;return u=new dh({}),{c(){a=$(`Connecting to bunker
              `),Yd(u.$$.fragment)},m(b,k){N(b,a,k),Sc(u,b,k),g=!0},i(b){g||(St(u.$$.fragment,b),g=!0)},o(b){Yt(u.$$.fragment,b),g=!1},d(b){b&&l(a),$c(u,b)}}}function bh(i){let a,u,g,b,k;return{c(){a=p("div"),u=$(`Waiting too much?
              `),g=p("button"),g.textContent="Cancel the connection",x(g,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),x(a,"class","mt-6 text-center text-sm leading-3")},m(C,H){N(C,a,H),T(a,u),T(a,g),b||(k=_(g,"click",i[39]),b=!0)},p:c,d(C){C&&l(a),b=!1,k()}}}function yh(i){let a,u,g,b,k,C,H;return{c(){a=p("div"),u=$("Do you need a Nostr account?"),g=p("br"),b=R(),k=p("button"),k.textContent="Sign up now",x(k,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),x(a,"class","mt-6 text-center text-sm leading-3")},m(U,j){N(U,a,j),T(a,u),T(a,g),T(a,b),T(a,k),C||(H=_(k,"click",i[35]),C=!0)},p:c,d(U){U&&l(a),C=!1,H()}}}function vh(i){let a,u,g;return{c(){a=p("option"),x(a,"label",u=i[78].domain),a.__value=g=i[78],I(a,a.__value),x(a,"class","px-2 py-1 text-lg")},m(b,k){N(b,a,k)},p(b,k){k[0]&4194304&&u!==(u=b[78].domain)&&x(a,"label",u),k[0]&4194304&&g!==(g=b[78])&&(a.__value=g,I(a,a.__value))},d(b){b&&l(a)}}}function I1(i){let a,u;return{c(){a=p("img"),P(a.src,u=i[21].picture)||x(a,"src",u),x(a,"alt",""),x(a,"class","h-6 w-6 rounded-full")},m(g,b){N(g,a,b)},p(g,b){b[0]&2097152&&!P(a.src,u=g[21].picture)&&x(a,"src",u)},i:c,o:c,d(g){g&&l(a)}}}function O1(i){let a,u,g,b=(i[21].name||i[21].npub.slice(0,7)+""+i[21].npub.slice(-4))+"",k;function C(j,F){return j[21].picture?M1:U1}let H=C(i),U=H(i);return{c(){a=p("div"),U.c(),u=R(),g=p("div"),k=$(b),x(g,"class","max-w-56 overflow-hidden whitespace-nowrap overflow-ellipsis inline-block"),x(a,"class","flex px-2 items-center")},m(j,F){N(j,a,F),U.m(a,null),T(a,u),T(a,g),T(g,k)},p(j,F){H===(H=C(j))&&U?U.p(j,F):(U.d(1),U=H(j),U&&(U.c(),U.m(a,u))),F[0]&2097152&&b!==(b=(j[21].name||j[21].npub.slice(0,7)+""+j[21].npub.slice(-4))+"")&&q(k,b)},i:c,o:c,d(j){j&&l(a),U.d()}}}function N1(i){let a;return{c(){a=p("div"),a.textContent="N",x(a,"class","w-6 text-center")},m(u,g){N(u,a,g)},p:c,i:c,o:c,d(u){u&&l(a)}}}function R1(i){let a;return{c(){a=p("div"),a.textContent="Connect with Nostr",x(a,"class","flex px-2 items-center")},m(u,g){N(u,a,g)},p:c,i:c,o:c,d(u){u&&l(a)}}}function z1(i){let a,u,g,b;return g=new dh({}),{c(){a=p("div"),u=$(`Connecting to bunker
          `),Yd(g.$$.fragment),x(a,"class","flex px-2 items-center")},m(k,C){N(k,a,C),T(a,u),Sc(g,a,null),b=!0},p:c,i(k){b||(St(g.$$.fragment,k),b=!0)},o(k){Yt(g.$$.fragment,k),b=!1},d(k){k&&l(a),$c(g)}}}function U1(i){let a;return{c(){a=$("")},m(u,g){N(u,a,g)},p:c,d(u){u&&l(a)}}}function M1(i){let a,u;return{c(){a=p("img"),P(a.src,u=i[21].picture)||x(a,"src",u),x(a,"alt",""),x(a,"class","mr-2 h-5 w-5 rounded-full")},m(g,b){N(g,a,b)},p(g,b){b[0]&2097152&&!P(a.src,u=g[21].picture)&&x(a,"src",u)},d(g){g&&l(a)}}}function H1(i){let a,u,g,b,k,C,H;const U=[k1,E1,_1],j=[];function F(V,X){return!V[25]&&!V[21]&&V[1]?0:V[25]?2:1}return u=F(i),g=j[u]=U[u](i),{c(){a=p("div"),g.c(),x(a,"class","draggable animate-fadein font-sans text-white"),x(a,"style",b="position: fixed; "+(i[25]&&i[5]?"width: 100vw;":"")+"; right: "+(i[25]&&i[5]?"0":i[3])+"px; user-select: none; "+(i[25]&&i[5]?"bottom: 0px":i[24]+":"+i[23]+"px")),W(a,"cursor-pointer",!i[21]&&!i[25])},m(V,X){N(V,a,X),j[u].m(a,null),i[54](a),k=!0,C||(H=[_(du,"click",i[29]),_(du,"mouseup",i[42]),_(du,"mousemove",i[41]),_(a,"mousedown",i[40])],C=!0)},p(V,X){let J=u;u=F(V),u===J?j[u].p(V,X):(yt(),Yt(j[J],1,1,()=>{j[J]=null}),Nt(),g=j[u],g?g.p(V,X):(g=j[u]=U[u](V),g.c()),St(g,1),g.m(a,null)),(!k||X[0]&58720296&&b!==(b="position: fixed; "+(V[25]&&V[5]?"width: 100vw;":"")+"; right: "+(V[25]&&V[5]?"0":V[3])+"px; user-select: none; "+(V[25]&&V[5]?"bottom: 0px":V[24]+":"+V[23]+"px")))&&x(a,"style",b),(!k||X[0]&35651584)&&W(a,"cursor-pointer",!V[21]&&!V[25])},i(V){k||(St(g),k=!0)},o(V){Yt(g),k=!1},d(V){V&&l(a),j[u].d(),i[54](null),C=!1,h(H)}}}const _h="We could not connect to a NIP-46 bunker with that url, are you sure it is set up correctly?",Eh="We were not able to connect using this address. For it to work it has to come from a NIP-46 provider.",Sr=20;function fu(i){return window.open(i,"window.nostr","width=600,height=800,popup=yes")}function j1(i,a,u){let g,b,k,C,H,U;const j=y1("only screen and (max-width: 640px)");O(i,j,ge=>u(5,U=ge));const F={ORIGIN:"wnj:origin",CLIENT_SECRET:"wnj:clientSecret",Y_POS:"wnj:ypos",CALLBACK_TOKEN:"wnj:callbackToken",BUNKER_POINTER:"wnj:bunkerPointer"};let V,{accent:X}=a,{position:J="top"}=a,{startHidden:ee}=a,{compactMode:Y}=a;const te=window,ne=new fy;let Q,ue,_e,Ae,le,ce;const ie=localStorage.getItem(F.CLIENT_SECRET);ie?ce=Lc(ie):(ce=Kb(),localStorage.setItem(F.CLIENT_SECRET,Rt(ce)));let fe="closed",$e,Le,at,ct,ut,de,ve=null,ze=null,Ke=null,Ye=!1,qe,xt,_t,jt=!1,lt,en,fn=[],{right:Sn=20}=a,$r=!1,Gt=!1,xr,wo,Zt;const Zn={pool:ne,onauth(ge){qe?u(13,ve=ge):lt?(u(15,Ke=ge),u(25,k=!0)):u(14,ze=ge)}},mo=ef(()=>{switch(fe){case"justopened":u(44,fe="opened");break;case"justclosed":u(44,fe="closed");break}},500);function bo(){u(44,fe="justopened"),mo()}function Tr(){u(44,fe="justclosed"),mo()}function Hs(){if($e&&!de){wu();return}bo()}gu();let $h={isWnj:!0,async getPublicKey(){return $e?$e.pubkey:(!ut&&!de&&bo(),(await ct).bp.pubkey)},async signEvent(ge){try{return!ut&&!de&&Hs(),await(await ct).signEvent(ge)}finally{u(15,Ke=null),Tr()}},async getRelays(){return!ut&&!de&&Hs(),(await ct).getRelays()},nip04:{async encrypt(ge,rt){return!ut&&!de&&Hs(),(await ct).nip04Encrypt(ge,rt)},async decrypt(ge,rt){return!ut&&!de&&Hs(),(await ct).nip04Decrypt(ge,rt)}}};function gu(){Tr(),$e=null,ct=new Promise((ge,rt)=>{Le=ge,at=rt}),u(21,lt=null),u(12,ut=!1),u(16,Ye=!1),u(17,qe=!1),de=!1,en=null,u(19,_t="")}oe(()=>{if(!$e){let ge=localStorage.getItem(F.BUNKER_POINTER);ge&&($e=JSON.parse(ge),mu())}if(te.nostr&&!te.nostr.isWnj){te.destroyWnj();return}else Object.defineProperty(window,"nostr",{get(){return $h},set(ge){$h=ge,ge.isWnj||te.destroyWnj()},configurable:!0});return()=>{en&&en.close()}});function F1(ge){Math.abs(b-wo)>6||Date.now()-Zt>600||fe==="justopened"||fe==="justclosed"||(ge.composedPath().find(rt=>rt.id==="wnj")?bo():Tr())}function W1(ge){Tr(),u(17,qe=!1),u(13,ve=null),u(14,ze=null),u(15,Ke=null),ge.stopPropagation()}function K1(ge){u(20,jt=!0),ge.stopPropagation()}function G1(ge){u(20,jt=!1),ge.stopPropagation()}async function Z1(ge){ge.preventDefault();try{if($e=await l1(Q.value),!$e){Q.value.match(Ms)?u(19,_t=_h):u(19,_t=Eh);return}Q.setCustomValidity(""),u(19,_t=""),await wu(),mu()}catch{Q.value.match(Ms)?u(19,_t=_h):u(19,_t=Eh),u(12,ut=!1)}}async function Y1(ge){ge.preventDefault(),localStorage.removeItem(F.BUNKER_POINTER),gu()}async function J1(ge){ge.preventDefault(),u(17,qe=!0),fn.length===0&&(u(22,fn=await f1(ne,["wss://relay.nostr.band","wss://nos.lol","wss://nostr-pub.wellorder.net"])),u(10,le=fn[0]))}function X1(ge){u(17,qe=!1)}async function Q1(ge){if(ge.preventDefault(),!le)return;u(18,xt=!0);let rt=await d1(le,Zn,_e.value,le.domain);u(18,xt=!1),bo(),u(17,qe=!1),$e=rt.bp,mu(),wu(rt)}const ev=ef(async()=>{le&&_e.value.length>0&&(await h1(_e.value+"@"+le.domain)?_e.setCustomValidity(`'${_e.value}' is already taken.`):_e.setCustomValidity(""))},500);function tv(){u(16,Ye=!1),u(12,ut=!1),at("connection aborted"),gu()}async function wu(ge=void 0){ge=ge||new ch(ce,$e,Zn),u(12,ut=!0);let rt=setTimeout(()=>{u(16,Ye=!0),u(25,k=!0)},5e3);try{await ge.connect(),de=!0,localStorage.setItem(F.BUNKER_POINTER,JSON.stringify($e)),Tr(),Le(ge)}catch(Yn){at((Yn==null?void 0:Yn.message)||String(Yn))}finally{clearTimeout(rt),u(12,ut=!1),u(16,Ye=!1),u(13,ve=null),u(14,ze=null),u(15,Ke=null)}}function mu(ge=null){let rt=$e.pubkey;u(21,lt={pubkey:rt,npub:g1(rt),event:null}),en=ne.subscribeMany(["wss://purplepag.es","wss://relay.snort.social","wss://relay.nos.social"],[{kinds:[0],authors:[rt]}],{onevent(Yn){var xh;if(!((((xh=lt.event)==null?void 0:xh.created_at)||0)>=Yn.created_at))try{let{name:pv,picture:gv}=JSON.parse(Yn.content);u(21,lt.event=Yn,lt),u(21,lt.name=pv,lt),u(21,lt.picture=gv,lt),ge==null||ge(),ge=null}catch{}}})}function nv(ge){if(k)return;$r=!0;const rt=V.getBoundingClientRect();xr=ge.clientY-rt.top,wo=b,Zt=Date.now()}function rv(ge){$r&&(g==="top"?u(23,b=ge.clientY):u(23,b=window.innerHeight-ge.clientY),u(23,b-=xr),u(45,Gt=!0),b<Sr&&u(23,b=Sr),b>window.innerHeight-Sr&&u(23,b=window.innerHeight-Sr))}function ov(){if($r=!1,setTimeout(()=>{u(45,Gt=!1)},10),Gt){const ge=V.getBoundingClientRect(),rt=window.innerHeight,Yn=rt/2;ge.top<Yn?(u(24,g="top"),u(23,b=ge.top)):(u(24,g="bottom"),u(23,b=rt-ge.bottom)),b<Sr&&u(23,b=Sr),localStorage.setItem(F.ORIGIN,g),localStorage.setItem(F.Y_POS,b.toString())}}const iv=()=>fu(ve),sv=()=>fu(ze),av=()=>{fu(Ke)};function cv(ge){be[ge?"unshift":"push"](()=>{_e=ge,u(8,_e)})}function uv(){Ae=this.value,u(9,Ae)}function lv(){le=D(this),u(10,le),u(22,fn)}function dv(ge){be[ge?"unshift":"push"](()=>{Q=ge,u(7,Q)})}function fv(){ue=this.value,u(4,ue)}function hv(ge){be[ge?"unshift":"push"](()=>{V=ge,u(6,V)})}return i.$$set=ge=>{"accent"in ge&&u(0,X=ge.accent),"position"in ge&&u(43,J=ge.position),"startHidden"in ge&&u(1,ee=ge.startHidden),"compactMode"in ge&&u(2,Y=ge.compactMode),"right"in ge&&u(3,Sn=ge.right)},i.$$.update=()=>{i.$$.dirty[0]&32|i.$$.dirty[1]&4096&&u(24,g=U?"bottom":localStorage.getItem(F.ORIGIN)||J),i.$$.dirty[0]&32&&u(23,b=U?Sr:parseInt(localStorage.getItem(F.Y_POS)||"0")||Sr),i.$$.dirty[1]&8192&&u(25,k=fe==="justopened"||fe==="opened"),i.$$.dirty[0]&1|i.$$.dirty[1]&16384&&u(27,C=Gt?"cursor-grabbing outline-dashed outline-"+X+"-500 outline-1 outline-offset-4":"outline-none"),i.$$.dirty[0]&16&&u(26,H=ue&&(ue.match(Ms)||ue.match(uh)))},[X,ee,Y,Sn,ue,U,V,Q,_e,Ae,le,ce,ut,ve,ze,Ke,Ye,qe,xt,_t,jt,lt,fn,b,g,k,H,C,j,F1,W1,K1,G1,Z1,Y1,J1,X1,Q1,ev,tv,nv,rv,ov,J,fe,Gt,iv,sv,av,cv,uv,lv,dv,fv,hv]}class D1 extends Xd{constructor(a){super(),Jd(this,a,j1,H1,m,{accent:0,position:43,startHidden:1,compactMode:2,right:3},null,[-1,-1,-1])}}const Vo=window;Vo.destroyWnj=()=>{setTimeout(()=>{q1.$destroy()},1)};const hu=document.createElement("div");hu.style.zIndex="90000",document.body.appendChild(hu);const pu=document.createElement("div");pu.id="wnj";const kh=document.createElement("style");kh.innerHTML=s;const Ah=hu.attachShadow({mode:"open"});Ah.appendChild(pu),Ah.appendChild(kh);const q1=new D1({target:pu,props:{accent:((e=Vo.wnjParams)==null?void 0:e.accent)||"cyan",position:((t=Vo.wnjParams)==null?void 0:t.position)==="bottom"?"bottom":"top",startHidden:!!((n=Vo.wnjParams)!=null&&n.startHidden),compactMode:!!((r=Vo.wnjParams)!=null&&r.compactMode)}});if(!((o=Vo.wnjParams)!=null&&o.disableOverflowFix)){var Sh=document.createElement("style"),V1=`
    html, body {
      overflow: auto;
      height: 100%;
    }
  `;Sh.innerHTML=V1,document.head.appendChild(Sh)}})();const f$=bv({__proto__:null,default:ag},[ag]);
</script>
    <style rel="stylesheet" crossorigin>html{font-size:20px}@media only screen and (max-width: 768px){html{font-size:18px}}body{margin:0;padding:0}html.dark body{background-color:#242424;color:#cbcbcb}#app{box-sizing:border-box;width:80%;max-width:760px;margin:2rem auto;font-family:Arial,Helvetica,sans-serif;color:#242424}@media only screen and (max-width: 768px){#app{width:100%;padding:0 1rem;max-width:unset}}html.dark #app{background-color:#242424;color:#ebebeb}a,a:visited{color:#242424}html.dark a,html.dark a:visited{color:#f5f5f5}ol,ul{padding-left:1rem;margin:0}ol li,ul li{margin-bottom:1rem}blockquote{margin:0;padding-left:1rem;border-left:8px solid #ebebeb}code{font-size:.9rem;background-color:#f6f6f6}pre code{overflow:scroll;display:block;padding:1rem .5rem}.unfinished-setup{width:80%;margin:0 auto;text-align:center}.header.home h1{font-size:3rem}.header .external-link{text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}@media only screen and (max-width: 768px){.header .external-link{margin-bottom:1rem;margin-right:2.5rem}}.header .external-link a{text-decoration:underline;color:#cbcbcb}.header .picture-container{position:relative;display:inline-block;width:2.5rem;height:2.5rem;overflow:hidden;border-radius:50%;margin-bottom:-.25rem}.header .picture-container img{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);clip-path:circle(50%)}.header.note .picture-container{width:1.5rem;height:1.5rem;margin-bottom:-.4rem}.header a{text-decoration:none}.header a span{text-decoration:underline}html.dark .header a:visited{color:#cbcbcb}html.dark .header .external-link,html.dark .header .external-link a{color:#747474}.topic-wrapper{margin-bottom:1.5rem;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:1rem}.topic-wrapper div{display:inline-grid;margin-right:1rem}.topic-wrapper div a{padding:.4rem 1rem;background-color:#e0e0e0;text-decoration:none;border-radius:4px}.topic-wrapper div a:hover{background-color:#ebebeb}.topic-wrapper div a.selected{background-color:#242424;color:#f5f5f5}html.dark .topic-wrapper div a{background-color:#747474;color:#242424}html.dark .topic-wrapper div a:hover{background-color:#f5f5f5}html.dark .topic-wrapper div a.selected{background-color:#cbcbcb}.externalLink{display:block;text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}.externalLink a{color:#cbcbcb}.about{margin-bottom:2rem;padding-bottom:1rem;border-bottom:8px solid #ebebeb}html.dark .about{border-bottom:8px solid #373737}.separator{margin-bottom:2rem;border-bottom:8px solid #ebebeb}html.dark .separator{border-bottom:8px solid #373737}.top-notes{display:flex;color:#747474;flex-wrap:wrap;justify-content:space-between;gap:2rem;width:100%;margin-bottom:1rem;padding-bottom:2rem;border-bottom:8px solid #f5f5f5}@media only screen and (max-width: 768px){.top-notes{display:block}}@media only screen and (max-width: 768px){.top-notes{padding-bottom:0rem}}.top-notes .note{flex:1 1 calc(50% - 2rem);box-sizing:border-box}@media only screen and (max-width: 768px){.top-notes .note{margin-bottom:2rem}}.top-notes .note a{text-decoration:none}.top-notes .note img{width:100%;height:200px;object-fit:cover;margin-bottom:.5rem;border-radius:4px}.top-notes .note .title{display:block;margin-bottom:.4rem;font-size:1.1rem;font-weight:bolder}.top-notes .note .summary{margin-bottom:.4rem;font-size:.9rem}.top-notes .note .date{font-size:.8rem;color:#a9a9a9}html.dark .top-notes{color:#cbcbcb;border-bottom:8px solid #373737}.short-notes{border-bottom:8px solid #f5f5f5;padding-bottom:1rem;margin-bottom:2rem}.short-notes .splide__slide{font-size:.9rem;overflow-wrap:break-word}.short-notes .splide__slide a{text-decoration:none}.short-notes .splide__slide .date{font-size:.8rem;color:#a9a9a9;margin-bottom:.3rem}.short-notes .splide__arrow--prev{left:-3em}.short-notes .splide__arrow--next{right:-3em}@media only screen and (max-width: 768px){.short-notes .splide__arrow--prev,.short-notes .splide__arrow--next{display:none}}.short-notes .splide__arrow{background:none}.short-notes .splide__arrow svg{fill:#a9a9a9}html.dark .short-notes{border-bottom:8px solid #373737}html.dark .short-notes a{color:#cbcbcb}.listing-notes{margin-top:1rem;color:#747474}.listing-notes.short-feed-full li{margin-bottom:2rem}.listing-notes.short-feed-full .summary{color:#242424}.listing-notes ul{list-style-type:none;padding:0;margin:0}.listing-notes ul li{margin-bottom:1rem}.listing-notes ul li h2{font-size:1.1rem;margin-bottom:.5rem}.listing-notes ul li h2 a{display:block;font-size:1.1rem}.listing-notes ul li .summary{margin-bottom:.4rem;overflow-wrap:break-word}.listing-notes ul li .summary p{margin:0}.listing-notes ul li .summary img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.listing-notes ul li .summary video{width:100%;margin:2rem auto}.listing-notes ul li .summary audio{width:100%;margin:2rem auto}.listing-notes ul li .date{font-size:.8rem;color:#a9a9a9}html.dark .listing-notes{color:#cbcbcb}html.dark .listing-notes.short-feed-full .summary{color:#fff}h1{font-size:2rem;line-height:.9;margin-top:0}@media only screen and (max-width: 768px){h1{font-size:1.6rem}}.note-wrapper{position:relative;margin-top:2rem;overflow-wrap:break-word}.note-wrapper h1,.note-wrapper h2,.note-wrapper h3{margin-top:1.4rem;margin-bottom:.6rem}.note-wrapper h1:first-of-type{margin-top:0rem}.note-wrapper .content{margin-top:1.5rem}.note-wrapper p{line-height:1.3rem;margin-top:0rem}.note-wrapper .date{display:block;margin-bottom:.5rem;font-size:.8rem;color:#a9a9a9}.note-wrapper img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.note-wrapper img.note-banner{margin:2.5rem auto 3.5rem;transform:scale(1.1)}.note-wrapper video{width:100%;margin:2rem auto}.note-wrapper audio{width:100%;margin:2rem auto}.footer{margin-top:4rem;padding-top:2rem;margin-bottom:2rem;border-top:8px solid #ebebeb;font-size:.8rem;text-align:center;color:#cbcbcb}.footer a{color:#cbcbcb}html.dark .footer{border-top:8px solid #373737;color:#747474}html.dark .footer a,html.dark .footer a:visited{color:#747474}zap-threads{font-size:.9rem}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;bottom:0;contain:strict;display:inline-block;height:20px;left:0;margin:auto;position:absolute;right:0;top:0;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports (outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports (outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{bottom:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;left:auto;padding:1em 0;right:.5em;top:0}.loader-container.svelte-181fgen{display:flex;align-items:center;justify-content:center}.loader.svelte-181fgen{display:inline-block;width:92px;height:92px;opacity:0;animation:svelte-181fgen-fade-in .5s .4s forwards,svelte-181fgen-loader-animation 2s linear infinite .4s}.loader.svelte-181fgen:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #a9a9a9;border-color:#a9a9a9 transparent #a9a9a9 transparent;animation:svelte-181fgen-loader-animation 2s linear infinite}@keyframes svelte-181fgen-loader-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes svelte-181fgen-fade-in{to{opacity:1}}html.dark .loader.svelte-181fgen:after{border:6px solid #373737;border-color:#373737 transparent #373737 transparent}#theme-toggle.svelte-bxrhh.svelte-bxrhh{display:none}#theme-toggle.svelte-bxrhh+label.svelte-bxrhh{display:inline-block;cursor:pointer;height:1rem;width:1rem;position:absolute;top:1rem;right:3rem;border-radius:9px;transition-duration:.3s;content:""}@media only screen and (max-width: 768px){#theme-toggle.svelte-bxrhh+label.svelte-bxrhh{right:1rem}}#theme-toggle.svelte-bxrhh:not(:checked)+label.svelte-bxrhh{background-color:#e9e9e9}#theme-toggle.svelte-bxrhh:checked+label.svelte-bxrhh{background-color:transparent;box-shadow:inset -6px -6px 1px 1px #3f3f3f}
</style>
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.wnjParams = {
        position: 'bottom',
        accent: 'neutral',
        startHidden: true,
        compactMode: true,
      };
    </script>
  </body>
</html>
